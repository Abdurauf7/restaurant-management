{"ast":null,"code":"import _without from \"lodash/without\";\nimport _includes from \"lodash/includes\";\nimport _values from \"lodash/values\";\nimport _orderBy from \"lodash/orderBy\";\nimport _range from \"lodash/range\";\nimport _uniq from \"lodash/uniq\";\nimport _invert from \"lodash/invert\";\nimport _isObject from \"lodash/isObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _identity from \"lodash/identity\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n/* eslint-disable func-style */\n\n\nimport React from \"react\";\nimport Collection from \"./collection\";\nimport Domain from \"./domain\";\nimport Helpers from \"./helpers\";\n/**\n * Returns the axis (x or y) of a particular axis component\n * @param {Object} props: the props object.\n * @param {Boolean} horizontal: true for horizontal charts\n * @returns {String} the dimension appropriate for the axis given its props\n */\n\nfunction getAxis(props) {\n  var dependentAxis = props.dependentAxis;\n  return dependentAxis ? \"y\" : \"x\";\n}\n/**\n * Returns all axis components that pass a given predicate\n * @param {Array} childComponents: an array of children\n * @param {Function} predicate: a predicate function that will be called with each\n * @returns {Array} all axis components that pass the given predicate or []\n */\n\n\nfunction findAxisComponents(childComponents, predicate) {\n  predicate = predicate || _identity;\n\n  var findAxes = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && predicate(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        return memo.concat(findAxes(React.Children.toArray(child.props.children)));\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findAxes(childComponents);\n}\n/**\n * Returns a single axis component of the desired axis type (x or y)\n * @param {Array} childComponents: an array of children\n * @param {String} axis: desired axis either \"x\" or \"y\".\n * @returns {ReactComponent} an axis component of the desired axis or undefined\n */\n\n\nfunction getAxisComponent(childComponents, axis) {\n  var matchesAxis = function (component) {\n    var type = component.type.getAxis(component.props);\n    return type === axis;\n  };\n\n  return findAxisComponents(childComponents, matchesAxis)[0];\n}\n/**\n * Returns all axis components of the desired axis type (x or y) along with any\n * parent components excluding VictoryChart\n * @param {Array} childComponents: an optional array of children.\n * @param {String} type: desired axis either \"dependent\" or \"independent\".\n * @returns {ReactComponent} an axis component of the desired type or undefined\n */\n\n\nfunction getAxisComponentsWithParent(childComponents, type) {\n  var matchesType = function (child) {\n    return type === \"dependent\" ? child.props.dependentAxis : !child.props.dependentAxis;\n  };\n\n  var findComponents = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && matchesType(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        var childAxis = findComponents(React.Children.toArray(child.props.children));\n        return childAxis.length > 0 ? memo.concat(child) : memo;\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findComponents(childComponents);\n}\n\nfunction getOrigin(domain) {\n  var getSingleOrigin = function (d) {\n    var domainMin = Math.min.apply(Math, _toConsumableArray(d));\n    var domainMax = Math.max.apply(Math, _toConsumableArray(d));\n    return domainMax < 0 ? domainMax : Math.max(0, domainMin);\n  };\n\n  return {\n    x: Collection.containsDates(domain.x) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.x))) : getSingleOrigin(domain.x),\n    y: Collection.containsDates(domain.y) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.y))) : getSingleOrigin(domain.y)\n  };\n}\n\nfunction getOriginSign(origin, domain) {\n  var getSign = function () {\n    return origin <= 0 && Math.max.apply(Math, _toConsumableArray(domain)) <= 0 ? \"negative\" : \"positive\";\n  };\n\n  return Collection.containsDates(domain) ? \"positive\" : getSign();\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when the axis is vertical\n */\n\n\nfunction isVertical(props) {\n  var orientation = props.orientation || (props.dependentAxis ? \"left\" : \"bottom\");\n  var vertical = {\n    top: false,\n    bottom: false,\n    left: true,\n    right: true\n  };\n  return vertical[orientation];\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when tickValues contain strings\n */\n\n\nfunction stringTicks(props) {\n  return props.tickValues !== undefined && Collection.containsStrings(props.tickValues);\n}\n\nfunction getDefaultTickFormat(props) {\n  var tickValues = props.tickValues;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var fallbackFormat = tickValues && !Collection.containsDates(tickValues) ? function (x) {\n    return x;\n  } : undefined;\n\n  if (!stringMap) {\n    return stringTicks(props) ? function (x, index) {\n      return tickValues[index];\n    } : fallbackFormat;\n  } else {\n    var invertedStringMap = stringMap && _invert(stringMap);\n\n    var tickValueArray = _orderBy(_values(stringMap), function (n) {\n      return n;\n    });\n\n    var dataNames = tickValueArray.map(function (tick) {\n      return invertedStringMap[tick];\n    }); // string ticks should have one tick of padding at the beginning\n\n    var dataTicks = [\"\"].concat(_toConsumableArray(dataNames), [\"\"]);\n    return function (x) {\n      return dataTicks[x];\n    };\n  }\n}\n\nfunction getTickFormat(props, scale) {\n  var tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  if (!tickFormat) {\n    var defaultTickFormat = getDefaultTickFormat(props);\n    var scaleTickFormat = scale.tickFormat && _isFunction(scale.tickFormat) ? scale.tickFormat() : function (x) {\n      return x;\n    };\n    return defaultTickFormat || scaleTickFormat;\n  } else if (tickFormat && Array.isArray(tickFormat)) {\n    return function (x, index) {\n      return tickFormat[index];\n    };\n  } else if (tickFormat && _isFunction(tickFormat)) {\n    var applyStringTicks = function (tick, index, ticks) {\n      var invertedStringMap = _invert(stringMap);\n\n      var stringTickArray = ticks.map(function (t) {\n        return invertedStringMap[t];\n      });\n      return props.tickFormat(invertedStringMap[tick], index, stringTickArray);\n    };\n\n    return stringMap ? applyStringTicks : tickFormat;\n  } else {\n    return function (x) {\n      return x;\n    };\n  }\n}\n\nfunction getStringTicks(props) {\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var categories = Array.isArray(props.categories) ? props.categories : props.categories && props.categories[axis];\n  var ticksFromCategories = categories && Collection.containsOnlyStrings(categories) ? categories.map(function (tick) {\n    return stringMap[tick];\n  }) : undefined;\n\n  var ticksFromStringMap = stringMap && _values(stringMap);\n\n  return ticksFromCategories && ticksFromCategories.length !== 0 ? ticksFromCategories : ticksFromStringMap;\n}\n\nfunction getTickArray(props) {\n  var tickValues = props.tickValues,\n      tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  var getTicksFromFormat = function () {\n    if (!tickFormat || !Array.isArray(tickFormat)) {\n      return undefined;\n    }\n\n    return Collection.containsStrings(tickFormat) ? tickFormat.map(function (t, i) {\n      return i;\n    }) : tickFormat;\n  };\n\n  var ticks = tickValues;\n\n  if (stringMap) {\n    ticks = getStringTicks(props);\n  }\n\n  if (tickValues && Collection.containsStrings(tickValues)) {\n    ticks = stringMap ? tickValues.map(function (tick) {\n      return stringMap[tick];\n    }) : _range(1, tickValues.length + 1);\n  }\n\n  var tickArray = ticks ? _uniq(ticks) : getTicksFromFormat(props);\n\n  var filterArray = function (arr) {\n    var domain = props.domain && props.domain[axis] || props.domain;\n    return Array.isArray(domain) ? arr.filter(function (t) {\n      return t >= Math.min.apply(Math, _toConsumableArray(domain)) && t <= Math.max.apply(Math, _toConsumableArray(domain));\n    }) : arr;\n  };\n\n  return Array.isArray(tickArray) && tickArray.length ? filterArray(tickArray) : undefined;\n}\n\nfunction downsampleTicks(ticks, tickCount) {\n  if (!tickCount || !Array.isArray(ticks) || ticks.length <= tickCount) {\n    return ticks;\n  }\n\n  var k = Math.floor(ticks.length / tickCount);\n  return ticks.filter(function (d, i) {\n    return i % k === 0;\n  });\n}\n\nfunction getTicks(props, scale, filterZero) {\n  var tickCount = props.tickCount;\n  var tickValues = getTickArray(props);\n\n  if (tickValues) {\n    return downsampleTicks(tickValues, tickCount);\n  } else if (scale.ticks && _isFunction(scale.ticks)) {\n    // eslint-disable-next-line no-magic-numbers\n    var defaultTickCount = tickCount || 5;\n    var scaleTicks = scale.ticks(defaultTickCount);\n    var tickArray = Array.isArray(scaleTicks) && scaleTicks.length ? scaleTicks : scale.domain();\n    var ticks = downsampleTicks(tickArray, tickCount);\n\n    if (filterZero) {\n      var filteredTicks = _includes(ticks, 0) ? _without(ticks, 0) : ticks;\n      return filteredTicks.length ? filteredTicks : ticks;\n    }\n\n    return ticks;\n  }\n\n  return scale.domain();\n}\n/**\n * Returns a domain based tickValues\n * @param {Object} props: the props object\n * @param {String} axis: either x or y\n * @returns {Array} returns a domain from tickValues\n */\n//eslint-disable-next-line max-statements\n\n\nfunction getDomainFromData(props, axis) {\n  var polar = props.polar,\n      _props$startAngle = props.startAngle,\n      startAngle = _props$startAngle === void 0 ? 0 : _props$startAngle,\n      _props$endAngle = props.endAngle,\n      endAngle = _props$endAngle === void 0 ? 360 : _props$endAngle;\n  var tickValues = getTickArray(props);\n\n  if (!Array.isArray(tickValues)) {\n    return undefined;\n  }\n\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var tickStrings = stringTicks(props);\n  var ticks = tickValues.map(function (value) {\n    return +value;\n  });\n  var defaultMin = tickStrings ? 1 : Collection.getMinValue(ticks);\n  var defaultMax = tickStrings ? tickValues.length : Collection.getMaxValue(ticks);\n  var min = minDomain !== undefined ? minDomain : defaultMin;\n  var max = maxDomain !== undefined ? maxDomain : defaultMax;\n  var initialDomain = Domain.getDomainFromMinMax(min, max);\n  var domain = polar && axis === \"x\" && Math.abs(startAngle - endAngle) === 360 ? Domain.getSymmetricDomain(initialDomain, ticks) : initialDomain;\n\n  if (isVertical(props) && !polar) {\n    domain.reverse();\n  }\n\n  return domain;\n} // exposed for use by VictoryChart\n\n\nfunction getDomain(props, axis) {\n  var inherentAxis = getAxis(props);\n\n  if (axis && axis !== inherentAxis) {\n    return undefined;\n  }\n\n  return Domain.createDomainFunction(getDomainFromData)(props, inherentAxis);\n}\n\nfunction getAxisValue(props, axis) {\n  if (!props.axisValue) {\n    return undefined;\n  }\n\n  var scaleAxis = axis === \"x\" ? \"y\" : \"x\";\n  var scale = _isObject(props.scale) && _isFunction(props.scale[scaleAxis]) ? props.scale[scaleAxis] : undefined;\n\n  if (!scale) {\n    return undefined;\n  }\n\n  var stringMapAxis = axis === \"x\" ? \"y\" : \"x\";\n  var stringMap = _isObject(props.stringMap) && props.stringMap[stringMapAxis];\n  var axisValue = stringMap && typeof props.axisValue === \"string\" ? stringMap[props.axisValue] : props.axisValue;\n  return scale(axisValue);\n}\n\nfunction modifyProps(props, fallbackProps) {\n  if (!_isObject(props.theme)) {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var role = \"axis\";\n\n  if (props.dependentAxis && props.theme.dependentAxis) {\n    role = \"dependentAxis\";\n  } else if (!props.dependentAxis && props.theme.independentAxis) {\n    role = \"independentAxis\";\n  }\n\n  if (role === \"axis\") {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var axisTheme = _defaults({}, props.theme[role], props.theme.axis);\n\n  var theme = _assign({}, props.theme, {\n    axis: axisTheme\n  });\n\n  return Helpers.modifyProps(_assign({}, props, {\n    theme: theme\n  }), fallbackProps, \"axis\");\n}\n\nexport default {\n  getTicks: getTicks,\n  getTickFormat: getTickFormat,\n  getAxis: getAxis,\n  getAxisComponent: getAxisComponent,\n  getAxisComponentsWithParent: getAxisComponentsWithParent,\n  getAxisValue: getAxisValue,\n  findAxisComponents: findAxisComponents,\n  getOrigin: getOrigin,\n  getOriginSign: getOriginSign,\n  getDomain: getDomain,\n  isVertical: isVertical,\n  modifyProps: modifyProps,\n  stringTicks: stringTicks\n};","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/node_modules/victory-core/es/victory-util/axis.js"],"names":["_without","_includes","_values","_orderBy","_range","_uniq","_invert","_isObject","_isFunction","_identity","_defaults","_assign","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","React","Collection","Domain","Helpers","getAxis","props","dependentAxis","findAxisComponents","childComponents","predicate","findAxes","children","reduce","memo","child","type","role","concat","Children","toArray","getAxisComponent","axis","matchesAxis","component","getAxisComponentsWithParent","matchesType","findComponents","childAxis","getOrigin","domain","getSingleOrigin","d","domainMin","Math","min","apply","domainMax","max","x","containsDates","Date","y","getOriginSign","origin","getSign","isVertical","orientation","vertical","top","bottom","left","right","stringTicks","tickValues","undefined","containsStrings","getDefaultTickFormat","stringMap","fallbackFormat","index","invertedStringMap","tickValueArray","n","dataNames","map","tick","dataTicks","getTickFormat","scale","tickFormat","defaultTickFormat","scaleTickFormat","applyStringTicks","ticks","stringTickArray","t","getStringTicks","categories","ticksFromCategories","containsOnlyStrings","ticksFromStringMap","getTickArray","getTicksFromFormat","tickArray","filterArray","filter","downsampleTicks","tickCount","k","floor","getTicks","filterZero","defaultTickCount","scaleTicks","filteredTicks","getDomainFromData","polar","_props$startAngle","startAngle","_props$endAngle","endAngle","minDomain","getMinFromProps","maxDomain","getMaxFromProps","tickStrings","value","defaultMin","getMinValue","defaultMax","getMaxValue","initialDomain","getDomainFromMinMax","abs","getSymmetricDomain","reverse","getDomain","inherentAxis","createDomainFunction","getAxisValue","axisValue","scaleAxis","stringMapAxis","modifyProps","fallbackProps","theme","independentAxis","axisTheme"],"mappings":"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","sourcesContent":["import _without from \"lodash/without\";\nimport _includes from \"lodash/includes\";\nimport _values from \"lodash/values\";\nimport _orderBy from \"lodash/orderBy\";\nimport _range from \"lodash/range\";\nimport _uniq from \"lodash/uniq\";\nimport _invert from \"lodash/invert\";\nimport _isObject from \"lodash/isObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _identity from \"lodash/identity\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n/* eslint-disable func-style */\nimport React from \"react\";\nimport Collection from \"./collection\";\nimport Domain from \"./domain\";\nimport Helpers from \"./helpers\";\n/**\n * Returns the axis (x or y) of a particular axis component\n * @param {Object} props: the props object.\n * @param {Boolean} horizontal: true for horizontal charts\n * @returns {String} the dimension appropriate for the axis given its props\n */\n\nfunction getAxis(props) {\n  var dependentAxis = props.dependentAxis;\n  return dependentAxis ? \"y\" : \"x\";\n}\n/**\n * Returns all axis components that pass a given predicate\n * @param {Array} childComponents: an array of children\n * @param {Function} predicate: a predicate function that will be called with each\n * @returns {Array} all axis components that pass the given predicate or []\n */\n\n\nfunction findAxisComponents(childComponents, predicate) {\n  predicate = predicate || _identity;\n\n  var findAxes = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && predicate(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        return memo.concat(findAxes(React.Children.toArray(child.props.children)));\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findAxes(childComponents);\n}\n/**\n * Returns a single axis component of the desired axis type (x or y)\n * @param {Array} childComponents: an array of children\n * @param {String} axis: desired axis either \"x\" or \"y\".\n * @returns {ReactComponent} an axis component of the desired axis or undefined\n */\n\n\nfunction getAxisComponent(childComponents, axis) {\n  var matchesAxis = function (component) {\n    var type = component.type.getAxis(component.props);\n    return type === axis;\n  };\n\n  return findAxisComponents(childComponents, matchesAxis)[0];\n}\n/**\n * Returns all axis components of the desired axis type (x or y) along with any\n * parent components excluding VictoryChart\n * @param {Array} childComponents: an optional array of children.\n * @param {String} type: desired axis either \"dependent\" or \"independent\".\n * @returns {ReactComponent} an axis component of the desired type or undefined\n */\n\n\nfunction getAxisComponentsWithParent(childComponents, type) {\n  var matchesType = function (child) {\n    return type === \"dependent\" ? child.props.dependentAxis : !child.props.dependentAxis;\n  };\n\n  var findComponents = function (children) {\n    return children.reduce(function (memo, child) {\n      if (child.type && child.type.role === \"axis\" && matchesType(child)) {\n        return memo.concat(child);\n      } else if (child.props && child.props.children) {\n        var childAxis = findComponents(React.Children.toArray(child.props.children));\n        return childAxis.length > 0 ? memo.concat(child) : memo;\n      }\n\n      return memo;\n    }, []);\n  };\n\n  return findComponents(childComponents);\n}\n\nfunction getOrigin(domain) {\n  var getSingleOrigin = function (d) {\n    var domainMin = Math.min.apply(Math, _toConsumableArray(d));\n    var domainMax = Math.max.apply(Math, _toConsumableArray(d));\n    return domainMax < 0 ? domainMax : Math.max(0, domainMin);\n  };\n\n  return {\n    x: Collection.containsDates(domain.x) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.x))) : getSingleOrigin(domain.x),\n    y: Collection.containsDates(domain.y) ? new Date(Math.min.apply(Math, _toConsumableArray(domain.y))) : getSingleOrigin(domain.y)\n  };\n}\n\nfunction getOriginSign(origin, domain) {\n  var getSign = function () {\n    return origin <= 0 && Math.max.apply(Math, _toConsumableArray(domain)) <= 0 ? \"negative\" : \"positive\";\n  };\n\n  return Collection.containsDates(domain) ? \"positive\" : getSign();\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when the axis is vertical\n */\n\n\nfunction isVertical(props) {\n  var orientation = props.orientation || (props.dependentAxis ? \"left\" : \"bottom\");\n  var vertical = {\n    top: false,\n    bottom: false,\n    left: true,\n    right: true\n  };\n  return vertical[orientation];\n}\n/**\n * @param {Object} props: axis component props\n * @returns {Boolean} true when tickValues contain strings\n */\n\n\nfunction stringTicks(props) {\n  return props.tickValues !== undefined && Collection.containsStrings(props.tickValues);\n}\n\nfunction getDefaultTickFormat(props) {\n  var tickValues = props.tickValues;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var fallbackFormat = tickValues && !Collection.containsDates(tickValues) ? function (x) {\n    return x;\n  } : undefined;\n\n  if (!stringMap) {\n    return stringTicks(props) ? function (x, index) {\n      return tickValues[index];\n    } : fallbackFormat;\n  } else {\n    var invertedStringMap = stringMap && _invert(stringMap);\n\n    var tickValueArray = _orderBy(_values(stringMap), function (n) {\n      return n;\n    });\n\n    var dataNames = tickValueArray.map(function (tick) {\n      return invertedStringMap[tick];\n    }); // string ticks should have one tick of padding at the beginning\n\n    var dataTicks = [\"\"].concat(_toConsumableArray(dataNames), [\"\"]);\n    return function (x) {\n      return dataTicks[x];\n    };\n  }\n}\n\nfunction getTickFormat(props, scale) {\n  var tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  if (!tickFormat) {\n    var defaultTickFormat = getDefaultTickFormat(props);\n    var scaleTickFormat = scale.tickFormat && _isFunction(scale.tickFormat) ? scale.tickFormat() : function (x) {\n      return x;\n    };\n    return defaultTickFormat || scaleTickFormat;\n  } else if (tickFormat && Array.isArray(tickFormat)) {\n    return function (x, index) {\n      return tickFormat[index];\n    };\n  } else if (tickFormat && _isFunction(tickFormat)) {\n    var applyStringTicks = function (tick, index, ticks) {\n      var invertedStringMap = _invert(stringMap);\n\n      var stringTickArray = ticks.map(function (t) {\n        return invertedStringMap[t];\n      });\n      return props.tickFormat(invertedStringMap[tick], index, stringTickArray);\n    };\n\n    return stringMap ? applyStringTicks : tickFormat;\n  } else {\n    return function (x) {\n      return x;\n    };\n  }\n}\n\nfunction getStringTicks(props) {\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n  var categories = Array.isArray(props.categories) ? props.categories : props.categories && props.categories[axis];\n  var ticksFromCategories = categories && Collection.containsOnlyStrings(categories) ? categories.map(function (tick) {\n    return stringMap[tick];\n  }) : undefined;\n\n  var ticksFromStringMap = stringMap && _values(stringMap);\n\n  return ticksFromCategories && ticksFromCategories.length !== 0 ? ticksFromCategories : ticksFromStringMap;\n}\n\nfunction getTickArray(props) {\n  var tickValues = props.tickValues,\n      tickFormat = props.tickFormat;\n  var axis = getAxis(props);\n  var stringMap = props.stringMap && props.stringMap[axis];\n\n  var getTicksFromFormat = function () {\n    if (!tickFormat || !Array.isArray(tickFormat)) {\n      return undefined;\n    }\n\n    return Collection.containsStrings(tickFormat) ? tickFormat.map(function (t, i) {\n      return i;\n    }) : tickFormat;\n  };\n\n  var ticks = tickValues;\n\n  if (stringMap) {\n    ticks = getStringTicks(props);\n  }\n\n  if (tickValues && Collection.containsStrings(tickValues)) {\n    ticks = stringMap ? tickValues.map(function (tick) {\n      return stringMap[tick];\n    }) : _range(1, tickValues.length + 1);\n  }\n\n  var tickArray = ticks ? _uniq(ticks) : getTicksFromFormat(props);\n\n  var filterArray = function (arr) {\n    var domain = props.domain && props.domain[axis] || props.domain;\n    return Array.isArray(domain) ? arr.filter(function (t) {\n      return t >= Math.min.apply(Math, _toConsumableArray(domain)) && t <= Math.max.apply(Math, _toConsumableArray(domain));\n    }) : arr;\n  };\n\n  return Array.isArray(tickArray) && tickArray.length ? filterArray(tickArray) : undefined;\n}\n\nfunction downsampleTicks(ticks, tickCount) {\n  if (!tickCount || !Array.isArray(ticks) || ticks.length <= tickCount) {\n    return ticks;\n  }\n\n  var k = Math.floor(ticks.length / tickCount);\n  return ticks.filter(function (d, i) {\n    return i % k === 0;\n  });\n}\n\nfunction getTicks(props, scale, filterZero) {\n  var tickCount = props.tickCount;\n  var tickValues = getTickArray(props);\n\n  if (tickValues) {\n    return downsampleTicks(tickValues, tickCount);\n  } else if (scale.ticks && _isFunction(scale.ticks)) {\n    // eslint-disable-next-line no-magic-numbers\n    var defaultTickCount = tickCount || 5;\n    var scaleTicks = scale.ticks(defaultTickCount);\n    var tickArray = Array.isArray(scaleTicks) && scaleTicks.length ? scaleTicks : scale.domain();\n    var ticks = downsampleTicks(tickArray, tickCount);\n\n    if (filterZero) {\n      var filteredTicks = _includes(ticks, 0) ? _without(ticks, 0) : ticks;\n      return filteredTicks.length ? filteredTicks : ticks;\n    }\n\n    return ticks;\n  }\n\n  return scale.domain();\n}\n/**\n * Returns a domain based tickValues\n * @param {Object} props: the props object\n * @param {String} axis: either x or y\n * @returns {Array} returns a domain from tickValues\n */\n//eslint-disable-next-line max-statements\n\n\nfunction getDomainFromData(props, axis) {\n  var polar = props.polar,\n      _props$startAngle = props.startAngle,\n      startAngle = _props$startAngle === void 0 ? 0 : _props$startAngle,\n      _props$endAngle = props.endAngle,\n      endAngle = _props$endAngle === void 0 ? 360 : _props$endAngle;\n  var tickValues = getTickArray(props);\n\n  if (!Array.isArray(tickValues)) {\n    return undefined;\n  }\n\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var tickStrings = stringTicks(props);\n  var ticks = tickValues.map(function (value) {\n    return +value;\n  });\n  var defaultMin = tickStrings ? 1 : Collection.getMinValue(ticks);\n  var defaultMax = tickStrings ? tickValues.length : Collection.getMaxValue(ticks);\n  var min = minDomain !== undefined ? minDomain : defaultMin;\n  var max = maxDomain !== undefined ? maxDomain : defaultMax;\n  var initialDomain = Domain.getDomainFromMinMax(min, max);\n  var domain = polar && axis === \"x\" && Math.abs(startAngle - endAngle) === 360 ? Domain.getSymmetricDomain(initialDomain, ticks) : initialDomain;\n\n  if (isVertical(props) && !polar) {\n    domain.reverse();\n  }\n\n  return domain;\n} // exposed for use by VictoryChart\n\n\nfunction getDomain(props, axis) {\n  var inherentAxis = getAxis(props);\n\n  if (axis && axis !== inherentAxis) {\n    return undefined;\n  }\n\n  return Domain.createDomainFunction(getDomainFromData)(props, inherentAxis);\n}\n\nfunction getAxisValue(props, axis) {\n  if (!props.axisValue) {\n    return undefined;\n  }\n\n  var scaleAxis = axis === \"x\" ? \"y\" : \"x\";\n  var scale = _isObject(props.scale) && _isFunction(props.scale[scaleAxis]) ? props.scale[scaleAxis] : undefined;\n\n  if (!scale) {\n    return undefined;\n  }\n\n  var stringMapAxis = axis === \"x\" ? \"y\" : \"x\";\n  var stringMap = _isObject(props.stringMap) && props.stringMap[stringMapAxis];\n  var axisValue = stringMap && typeof props.axisValue === \"string\" ? stringMap[props.axisValue] : props.axisValue;\n  return scale(axisValue);\n}\n\nfunction modifyProps(props, fallbackProps) {\n  if (!_isObject(props.theme)) {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var role = \"axis\";\n\n  if (props.dependentAxis && props.theme.dependentAxis) {\n    role = \"dependentAxis\";\n  } else if (!props.dependentAxis && props.theme.independentAxis) {\n    role = \"independentAxis\";\n  }\n\n  if (role === \"axis\") {\n    return Helpers.modifyProps(props, fallbackProps, \"axis\");\n  }\n\n  var axisTheme = _defaults({}, props.theme[role], props.theme.axis);\n\n  var theme = _assign({}, props.theme, {\n    axis: axisTheme\n  });\n\n  return Helpers.modifyProps(_assign({}, props, {\n    theme: theme\n  }), fallbackProps, \"axis\");\n}\n\nexport default {\n  getTicks: getTicks,\n  getTickFormat: getTickFormat,\n  getAxis: getAxis,\n  getAxisComponent: getAxisComponent,\n  getAxisComponentsWithParent: getAxisComponentsWithParent,\n  getAxisValue: getAxisValue,\n  findAxisComponents: findAxisComponents,\n  getOrigin: getOrigin,\n  getOriginSign: getOriginSign,\n  getDomain: getDomain,\n  isVertical: isVertical,\n  modifyProps: modifyProps,\n  stringTicks: stringTicks\n};"]},"metadata":{},"sourceType":"module"}