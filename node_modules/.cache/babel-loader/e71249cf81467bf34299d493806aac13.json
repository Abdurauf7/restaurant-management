{"ast":null,"code":"import _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, Scale, Domain, Data, LabelHelpers } from \"victory-core\";\nvar TYPES = [\"close\", \"open\", \"high\", \"low\"];\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function (dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getStyles = function (style) {\n  var defaultStyles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = \"100%\";\n  var height = \"100%\";\n\n  if (!style) {\n    return _defaults({\n      parent: {\n        height: height,\n        width: width\n      }\n    }, defaultStyles);\n  }\n\n  var defaultParent = defaultStyles.parent || {};\n  var defaultLabels = defaultStyles.labels || {};\n  var defaultData = defaultStyles.data || {};\n\n  var labelStyle = _defaults({}, style.labels, defaultLabels);\n\n  return {\n    parent: _defaults({}, style.parent, defaultParent, {\n      width: width,\n      height: height\n    }),\n    labels: labelStyle,\n    data: _defaults({}, style.data, defaultData),\n    openLabels: _defaults({}, style.openLabels, defaultStyles.openLabels, labelStyle),\n    closeLabels: _defaults({}, style.closeLabels, defaultStyles.closeLabels, labelStyle),\n    lowLabels: _defaults({}, style.lowLabels, defaultStyles.lowLabels, labelStyle),\n    highLabels: _defaults({}, style.highLabels, defaultStyles.highLabels, labelStyle)\n  };\n};\n\nvar getCalculatedValues = function (props) {\n  var theme = props.theme,\n      polar = props.polar;\n  var defaultStyle = theme && theme.candlestick && theme.candlestick.style ? theme.candlestick.style : {};\n  var style = getStyles(props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  var defaultOrientation = props.horizontal ? \"top\" : \"right\";\n  var labelOrientation = props.labelOrientation || defaultOrientation;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin,\n    labelOrientation: labelOrientation\n  };\n};\n\nvar isTransparent = function (attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function (datum, style, props) {\n  style = style || {};\n  var candleColor = datum._open > datum._close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getText = function (props, type) {\n  var datum = props.datum,\n      index = props.index,\n      labels = props.labels;\n  var propName = \"\".concat(type, \"Labels\");\n  var labelProp = props[propName];\n\n  if (!labelProp && !labels) {\n    return null;\n  } else if (labelProp === true || labels === true) {\n    var dataName = \"_\".concat(type);\n    return \"\".concat(datum[dataName]);\n  }\n\n  return Array.isArray(labelProp) ? labelProp[index] : labelProp;\n};\n\nvar getCandleWidth = function (props, style) {\n  var data = props.data,\n      candleWidth = props.candleWidth,\n      scale = props.scale,\n      defaultCandleWidth = props.defaultCandleWidth;\n\n  if (candleWidth) {\n    return _isFunction(candleWidth) ? Helpers.evaluateProp(candleWidth, props) : candleWidth;\n  } else if (style && style.width) {\n    return style.width;\n  }\n\n  var range = scale.x.range();\n  var extent = Math.abs(range[1] - range[0]);\n  var candles = data.length + 2;\n  var candleRatio = props.candleRatio || 0.5;\n  var defaultWidth = candleRatio * (data.length < 2 ? defaultCandleWidth : extent / candles);\n  return Math.max(1, defaultWidth);\n};\n\nvar getOrientation = function (labelOrientation) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"labels\";\n  return _isPlainObject(labelOrientation) ? labelOrientation[type] : labelOrientation;\n};\n/* eslint-disable complexity*/\n\n\nvar calculatePlotValues = function (props) {\n  var positions = props.positions,\n      labelStyle = props.labelStyle,\n      x = props.x,\n      horizontal = props.horizontal,\n      computedType = props.computedType,\n      candleWidth = props.candleWidth,\n      orientation = props.orientation;\n  positions.labels = (positions.open + positions.close) / 2;\n  var signX = orientation === \"left\" ? -1 : 1;\n  var signY = orientation === \"top\" ? -1 : 1;\n\n  if (horizontal) {\n    var yValue = x;\n    var xValue = positions[computedType];\n    var dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (candleWidth / 2) + signY * (labelStyle.padding || 0) : 0;\n    var dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (labelStyle.padding || 1);\n    return {\n      yValue: yValue,\n      xValue: xValue,\n      dx: dx,\n      dy: dy\n    };\n  } else {\n    var _xValue = x;\n    var _yValue = positions[computedType];\n\n    var _dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (labelStyle.padding || 1) : 0;\n\n    var _dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (candleWidth / 2) + signX * (labelStyle.padding || 0);\n\n    return {\n      yValue: _yValue,\n      xValue: _xValue,\n      dx: _dx,\n      dy: _dy\n    };\n  }\n};\n/* eslint-enable complexity*/\n\n/* eslint-disable max-params*/\n\n\nvar getLabelProps = function (props, text, style, type) {\n  var x = props.x,\n      high = props.high,\n      low = props.low,\n      open = props.open,\n      close = props.close,\n      index = props.index,\n      scale = props.scale,\n      datum = props.datum,\n      data = props.data,\n      horizontal = props.horizontal,\n      candleWidth = props.candleWidth,\n      labelOrientation = props.labelOrientation;\n  var component = props[\"\".concat(type, \"LabelComponent\")] || props.labelComponent;\n  var defaultOrientation = horizontal ? \"top\" : \"right\";\n  var orientation = component.props && component.props.orientation || getOrientation(labelOrientation, type) || defaultOrientation;\n  var positions = {\n    high: high,\n    low: low,\n    open: open,\n    close: close\n  };\n  var namespace = type ? \"\".concat(type, \"Labels\") : \"labels\";\n  var labelStyle = style[namespace] || style.labels;\n  var defaultVerticalAnchors = {\n    top: \"end\",\n    bottom: \"start\",\n    left: \"middle\",\n    right: \"middle\"\n  };\n  var defaultTextAnchors = {\n    left: \"end\",\n    right: \"start\",\n    top: \"middle\",\n    bottom: \"middle\"\n  };\n  var computedType = type ? type : \"labels\";\n  var plotProps = {\n    positions: positions,\n    labelStyle: labelStyle,\n    x: x,\n    horizontal: horizontal,\n    computedType: computedType,\n    candleWidth: candleWidth,\n    orientation: orientation\n  };\n\n  var _calculatePlotValues = calculatePlotValues(plotProps),\n      yValue = _calculatePlotValues.yValue,\n      xValue = _calculatePlotValues.xValue,\n      dx = _calculatePlotValues.dx,\n      dy = _calculatePlotValues.dy;\n\n  return {\n    style: labelStyle,\n    y: yValue,\n    x: xValue,\n    dx: dx,\n    dy: dy,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    orientation: orientation,\n    textAnchor: labelStyle.textAnchor || defaultTextAnchors[orientation],\n    verticalAnchor: labelStyle.verticalAnchor || defaultVerticalAnchors[orientation],\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n/* eslint-enable max-params*/\n\n\nvar getBaseProps = function (props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin,\n      labelOrientation = calculatedValues.labelOrientation;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal,\n      labelOrientation: labelOrientation\n    };\n    dataProps.candleWidth = getCandleWidth(dataProps);\n\n    var extendedProps = _defaults(Object.assign({}, dataProps), props);\n\n    childProps[eventKey] = {\n      data: dataProps\n    };\n\n    if (labels) {\n      var text = LabelHelpers.getText(props, datum, index);\n\n      if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n        childProps[eventKey].labels = getLabelProps(extendedProps, text, style);\n      }\n    }\n\n    TYPES.forEach(function (type) {\n      var labelText = getText(extendedProps, type);\n      var labelProp = props.labels || props[\"\".concat(type, \"Labels\")];\n\n      if (labelText !== null && labelText !== undefined || labelProp && (events || sharedEvents)) {\n        var target = \"\".concat(type, \"Labels\");\n        childProps[eventKey][target] = getLabelProps(extendedProps, labelText, style, type);\n      }\n    });\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/node_modules/victory-candlestick/es/helper-methods.js"],"names":["_isPlainObject","_isFunction","_isNil","_defaults","_assign","Helpers","Scale","Domain","Data","LabelHelpers","TYPES","getData","props","accessorTypes","formatData","data","reduceData","dataset","axis","type","yDataTypes","min","max","dataType","baseCondition","Infinity","reduce","memo","datum","current","getDomainFromData","minDomain","getMinFromProps","maxDomain","getMaxFromProps","length","undefined","getDomainFromMinMax","getDomain","createDomainFunction","getStyles","style","defaultStyles","arguments","width","height","parent","defaultParent","defaultLabels","labels","defaultData","labelStyle","openLabels","closeLabels","lowLabels","highLabels","getCalculatedValues","theme","polar","defaultStyle","candlestick","range","x","getRange","y","domain","scale","getBaseScale","horizontal","origin","getPolarOrigin","defaultOrientation","labelOrientation","isTransparent","attr","getDataStyles","candleColor","_open","_close","candleColors","negative","positive","fill","strokeColor","stroke","getText","index","propName","concat","labelProp","dataName","Array","isArray","getCandleWidth","candleWidth","defaultCandleWidth","evaluateProp","extent","Math","abs","candles","candleRatio","defaultWidth","getOrientation","calculatePlotValues","positions","computedType","orientation","open","close","signX","signY","yValue","xValue","dy","padding","dx","_xValue","_yValue","_dy","_dx","getLabelProps","text","high","low","component","labelComponent","namespace","defaultVerticalAnchors","top","bottom","left","right","defaultTextAnchors","plotProps","_calculatePlotValues","textAnchor","verticalAnchor","angle","getBaseProps","fallbackProps","modifyProps","calculatedValues","_props","groupComponent","standalone","name","wickStrokeWidth","events","sharedEvents","initialChildProps","childProps","eventKey","_x1","_x","_high","_low","dataStyle","dataProps","extendedProps","Object","assign","forEach","labelText","target"],"mappings":"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","sourcesContent":["import _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, Scale, Domain, Data, LabelHelpers } from \"victory-core\";\nvar TYPES = [\"close\", \"open\", \"high\", \"low\"];\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function (dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getStyles = function (style) {\n  var defaultStyles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = \"100%\";\n  var height = \"100%\";\n\n  if (!style) {\n    return _defaults({\n      parent: {\n        height: height,\n        width: width\n      }\n    }, defaultStyles);\n  }\n\n  var defaultParent = defaultStyles.parent || {};\n  var defaultLabels = defaultStyles.labels || {};\n  var defaultData = defaultStyles.data || {};\n\n  var labelStyle = _defaults({}, style.labels, defaultLabels);\n\n  return {\n    parent: _defaults({}, style.parent, defaultParent, {\n      width: width,\n      height: height\n    }),\n    labels: labelStyle,\n    data: _defaults({}, style.data, defaultData),\n    openLabels: _defaults({}, style.openLabels, defaultStyles.openLabels, labelStyle),\n    closeLabels: _defaults({}, style.closeLabels, defaultStyles.closeLabels, labelStyle),\n    lowLabels: _defaults({}, style.lowLabels, defaultStyles.lowLabels, labelStyle),\n    highLabels: _defaults({}, style.highLabels, defaultStyles.highLabels, labelStyle)\n  };\n};\n\nvar getCalculatedValues = function (props) {\n  var theme = props.theme,\n      polar = props.polar;\n  var defaultStyle = theme && theme.candlestick && theme.candlestick.style ? theme.candlestick.style : {};\n  var style = getStyles(props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  var defaultOrientation = props.horizontal ? \"top\" : \"right\";\n  var labelOrientation = props.labelOrientation || defaultOrientation;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin,\n    labelOrientation: labelOrientation\n  };\n};\n\nvar isTransparent = function (attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function (datum, style, props) {\n  style = style || {};\n  var candleColor = datum._open > datum._close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getText = function (props, type) {\n  var datum = props.datum,\n      index = props.index,\n      labels = props.labels;\n  var propName = \"\".concat(type, \"Labels\");\n  var labelProp = props[propName];\n\n  if (!labelProp && !labels) {\n    return null;\n  } else if (labelProp === true || labels === true) {\n    var dataName = \"_\".concat(type);\n    return \"\".concat(datum[dataName]);\n  }\n\n  return Array.isArray(labelProp) ? labelProp[index] : labelProp;\n};\n\nvar getCandleWidth = function (props, style) {\n  var data = props.data,\n      candleWidth = props.candleWidth,\n      scale = props.scale,\n      defaultCandleWidth = props.defaultCandleWidth;\n\n  if (candleWidth) {\n    return _isFunction(candleWidth) ? Helpers.evaluateProp(candleWidth, props) : candleWidth;\n  } else if (style && style.width) {\n    return style.width;\n  }\n\n  var range = scale.x.range();\n  var extent = Math.abs(range[1] - range[0]);\n  var candles = data.length + 2;\n  var candleRatio = props.candleRatio || 0.5;\n  var defaultWidth = candleRatio * (data.length < 2 ? defaultCandleWidth : extent / candles);\n  return Math.max(1, defaultWidth);\n};\n\nvar getOrientation = function (labelOrientation) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"labels\";\n  return _isPlainObject(labelOrientation) ? labelOrientation[type] : labelOrientation;\n};\n/* eslint-disable complexity*/\n\n\nvar calculatePlotValues = function (props) {\n  var positions = props.positions,\n      labelStyle = props.labelStyle,\n      x = props.x,\n      horizontal = props.horizontal,\n      computedType = props.computedType,\n      candleWidth = props.candleWidth,\n      orientation = props.orientation;\n  positions.labels = (positions.open + positions.close) / 2;\n  var signX = orientation === \"left\" ? -1 : 1;\n  var signY = orientation === \"top\" ? -1 : 1;\n\n  if (horizontal) {\n    var yValue = x;\n    var xValue = positions[computedType];\n    var dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (candleWidth / 2) + signY * (labelStyle.padding || 0) : 0;\n    var dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (labelStyle.padding || 1);\n    return {\n      yValue: yValue,\n      xValue: xValue,\n      dx: dx,\n      dy: dy\n    };\n  } else {\n    var _xValue = x;\n    var _yValue = positions[computedType];\n\n    var _dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (labelStyle.padding || 1) : 0;\n\n    var _dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (candleWidth / 2) + signX * (labelStyle.padding || 0);\n\n    return {\n      yValue: _yValue,\n      xValue: _xValue,\n      dx: _dx,\n      dy: _dy\n    };\n  }\n};\n/* eslint-enable complexity*/\n\n/* eslint-disable max-params*/\n\n\nvar getLabelProps = function (props, text, style, type) {\n  var x = props.x,\n      high = props.high,\n      low = props.low,\n      open = props.open,\n      close = props.close,\n      index = props.index,\n      scale = props.scale,\n      datum = props.datum,\n      data = props.data,\n      horizontal = props.horizontal,\n      candleWidth = props.candleWidth,\n      labelOrientation = props.labelOrientation;\n  var component = props[\"\".concat(type, \"LabelComponent\")] || props.labelComponent;\n  var defaultOrientation = horizontal ? \"top\" : \"right\";\n  var orientation = component.props && component.props.orientation || getOrientation(labelOrientation, type) || defaultOrientation;\n  var positions = {\n    high: high,\n    low: low,\n    open: open,\n    close: close\n  };\n  var namespace = type ? \"\".concat(type, \"Labels\") : \"labels\";\n  var labelStyle = style[namespace] || style.labels;\n  var defaultVerticalAnchors = {\n    top: \"end\",\n    bottom: \"start\",\n    left: \"middle\",\n    right: \"middle\"\n  };\n  var defaultTextAnchors = {\n    left: \"end\",\n    right: \"start\",\n    top: \"middle\",\n    bottom: \"middle\"\n  };\n  var computedType = type ? type : \"labels\";\n  var plotProps = {\n    positions: positions,\n    labelStyle: labelStyle,\n    x: x,\n    horizontal: horizontal,\n    computedType: computedType,\n    candleWidth: candleWidth,\n    orientation: orientation\n  };\n\n  var _calculatePlotValues = calculatePlotValues(plotProps),\n      yValue = _calculatePlotValues.yValue,\n      xValue = _calculatePlotValues.xValue,\n      dx = _calculatePlotValues.dx,\n      dy = _calculatePlotValues.dy;\n\n  return {\n    style: labelStyle,\n    y: yValue,\n    x: xValue,\n    dx: dx,\n    dy: dy,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    orientation: orientation,\n    textAnchor: labelStyle.textAnchor || defaultTextAnchors[orientation],\n    verticalAnchor: labelStyle.verticalAnchor || defaultVerticalAnchors[orientation],\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n/* eslint-enable max-params*/\n\n\nvar getBaseProps = function (props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin,\n      labelOrientation = calculatedValues.labelOrientation;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal,\n      labelOrientation: labelOrientation\n    };\n    dataProps.candleWidth = getCandleWidth(dataProps);\n\n    var extendedProps = _defaults(Object.assign({}, dataProps), props);\n\n    childProps[eventKey] = {\n      data: dataProps\n    };\n\n    if (labels) {\n      var text = LabelHelpers.getText(props, datum, index);\n\n      if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n        childProps[eventKey].labels = getLabelProps(extendedProps, text, style);\n      }\n    }\n\n    TYPES.forEach(function (type) {\n      var labelText = getText(extendedProps, type);\n      var labelProp = props.labels || props[\"\".concat(type, \"Labels\")];\n\n      if (labelText !== null && labelText !== undefined || labelProp && (events || sharedEvents)) {\n        var target = \"\".concat(type, \"Labels\");\n        childProps[eventKey][target] = getLabelProps(extendedProps, labelText, style, type);\n      }\n    });\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };"]},"metadata":{},"sourceType":"module"}