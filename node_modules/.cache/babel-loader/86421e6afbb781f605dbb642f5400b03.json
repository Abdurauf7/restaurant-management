{"ast":null,"code":"var _jsxFileName = \"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/src/components/Admin/components/DishComponent/components/dishContent.jsx\";\n// React\nimport React, { Fragment, useEffect, useState } from \"react\"; // Third Part\n\nimport { Layout } from \"antd\"; // Custom\n\nimport { HeaderTitle, openNotification, CustomDrawerButton } from \"../../../../custom/\";\nimport * as All from \"./\"; // import DishDarawer from \"./dishDrawer\";\n// import DishTable from \"./dishTable\";\n// import DishModal from \"./dishModal\";\n// Services\n\nimport { getDishes, addDishes, deleteDishes, updateDishes } from \"../../../../../services/dishServices\";\nconst {\n  Content\n} = Layout;\n\nconst DishContent = () => {\n  // initializing states\n  const [data, setData] = useState([]);\n  const [visible, setVisible] = useState();\n  const [editData, setEditData] = useState({});\n  const [drawerVisible, setDrawerVisible] = useState(); //   hook cycles\n\n  const fetchDishData = async () => {\n    await getDishes().then(res => res.data).then(res => setData(res)).catch(err => openNotification(\"error\", \"Cannot get informations\", \"Please check connection\"));\n  };\n\n  useEffect(() => {\n    fetchDishData();\n  }, []); // custom Drawer\n\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n\n  const onhandleAdd = async items => {\n    await addDishes(items);\n  };\n\n  const onClose = () => {\n    setDrawerVisible(false);\n  }; //   Modal handle\n\n\n  const onCancel = () => {\n    setVisible(false);\n  }; //   handle actions in table item\n\n\n  const onhandleUpdate = async item => {\n    const orginaldata = { ...item\n    };\n\n    try {\n      await updateDishes(item);\n    } catch (error) {\n      setEditData(orginaldata);\n    }\n  };\n\n  const deleteItem = async item => {\n    const orginaldata = data;\n\n    try {\n      await deleteDishes(item);\n    } catch (error) {\n      setData(orginaldata);\n    }\n  };\n\n  const editItem = async item => {\n    const newData = { ...item\n    };\n    setEditData(newData);\n    setVisible(true);\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Content, {\n    style: {\n      margin: \"2em 16px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      background: \"#fff\",\n      padding: 24,\n      minHeight: 280\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(HeaderTitle, {\n    title: \"Dish Menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(CustomDrawerButton, {\n    title: \"Add\",\n    showDrawer: showDrawer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(All.DishDarawer, {\n    title: \"Add Dish\",\n    visible: drawerVisible,\n    onClose: onClose,\n    onhandleAdd: onhandleAdd,\n    firsItem: \"name\",\n    secondItem: \"price\",\n    thirdItem: \"type\",\n    fourthItem: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(All.DishTable, {\n    data: data,\n    colOne: \"name\",\n    colTwo: \"price\",\n    colThird: \"type\",\n    colFourth: \"date\",\n    colFive: \"Actions\",\n    deleteItem: deleteItem,\n    editItem: editItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(All.DishModal, {\n    visible: visible,\n    onCancel: onCancel,\n    data: editData,\n    onhandleUpdate: onhandleUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }))));\n};\n\nexport default DishContent;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Admin/components/DishComponent/components/dishContent.jsx"],"names":["React","Fragment","useEffect","useState","Layout","HeaderTitle","openNotification","CustomDrawerButton","All","getDishes","addDishes","deleteDishes","updateDishes","Content","DishContent","data","setData","visible","setVisible","editData","setEditData","drawerVisible","setDrawerVisible","fetchDishData","then","res","catch","err","showDrawer","onhandleAdd","items","onClose","onCancel","onhandleUpdate","item","orginaldata","error","deleteItem","editItem","newData","margin","background","padding","minHeight"],"mappings":"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","sourcesContent":["// React\nimport React, { Fragment, useEffect, useState } from \"react\";\n\n// Third Part\nimport { Layout } from \"antd\";\n\n// Custom\nimport {\n  HeaderTitle,\n  openNotification,\n  CustomDrawerButton\n} from \"../../../../custom/\";\nimport * as All from \"./\";\n// import DishDarawer from \"./dishDrawer\";\n// import DishTable from \"./dishTable\";\n// import DishModal from \"./dishModal\";\n// Services\nimport {\n  getDishes,\n  addDishes,\n  deleteDishes,\n  updateDishes\n} from \"../../../../../services/dishServices\";\n\nconst { Content } = Layout;\n\nconst DishContent = () => {\n  // initializing states\n  const [data, setData] = useState([]);\n  const [visible, setVisible] = useState();\n  const [editData, setEditData] = useState({});\n  const [drawerVisible, setDrawerVisible] = useState();\n\n  //   hook cycles\n  const fetchDishData = async () => {\n    await getDishes()\n      .then(res => res.data)\n      .then(res => setData(res))\n      .catch(err =>\n        openNotification(\n          \"error\",\n          \"Cannot get informations\",\n          \"Please check connection\"\n        )\n      );\n  };\n  useEffect(() => {\n    fetchDishData();\n  }, []);\n\n  // custom Drawer\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n  const onhandleAdd = async items => {\n    await addDishes(items);\n  };\n\n  const onClose = () => {\n    setDrawerVisible(false);\n  };\n\n  //   Modal handle\n  const onCancel = () => {\n    setVisible(false);\n  };\n\n  //   handle actions in table item\n  const onhandleUpdate = async item => {\n    const orginaldata = { ...item };\n    try {\n      await updateDishes(item);\n    } catch (error) {\n      setEditData(orginaldata);\n    }\n  };\n  const deleteItem = async item => {\n    const orginaldata = data;\n    try {\n      await deleteDishes(item);\n    } catch (error) {\n      setData(orginaldata);\n    }\n  };\n\n  const editItem = async item => {\n    const newData = { ...item };\n    setEditData(newData);\n    setVisible(true);\n  };\n\n  return (\n    <Fragment>\n      <Content style={{ margin: \"2em 16px\" }}>\n        <div style={{ background: \"#fff\", padding: 24, minHeight: 280 }}>\n          <HeaderTitle title={\"Dish Menu\"} />\n          <CustomDrawerButton title=\"Add\" showDrawer={showDrawer} />\n\n          <All.DishDarawer\n            title=\"Add Dish\"\n            visible={drawerVisible}\n            onClose={onClose}\n            onhandleAdd={onhandleAdd}\n            firsItem={\"name\"}\n            secondItem={\"price\"}\n            thirdItem={\"type\"}\n            fourthItem={\"date\"}\n          />\n          <All.DishTable\n            data={data}\n            colOne={\"name\"}\n            colTwo={\"price\"}\n            colThird={\"type\"}\n            colFourth={\"date\"}\n            colFive={\"Actions\"}\n            deleteItem={deleteItem}\n            editItem={editItem}\n          />\n          <All.DishModal\n            visible={visible}\n            onCancel={onCancel}\n            data={editData}\n            onhandleUpdate={onhandleUpdate}\n          />\n        </div>\n      </Content>\n    </Fragment>\n  );\n};\n\nexport default DishContent;\n"]},"metadata":{},"sourceType":"module"}