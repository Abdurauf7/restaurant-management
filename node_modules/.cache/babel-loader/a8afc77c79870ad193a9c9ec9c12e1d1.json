{"ast":null,"code":"import _isPlainObject from \"lodash/isPlainObject\";\nimport _values from \"lodash/values\";\nimport _uniqBy from \"lodash/uniqBy\";\nimport _groupBy from \"lodash/groupBy\";\nimport _some from \"lodash/some\";\nimport _uniq from \"lodash/uniq\";\nimport _isFunction from \"lodash/isFunction\";\nimport _flatten from \"lodash/flatten\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nimport React from \"react\";\nimport Axis from \"./axis\";\nimport Style from \"./style\";\nimport Transitions from \"./transitions\";\nimport Data from \"./data\";\nimport Domain from \"./domain\";\nimport Events from \"./events\";\nimport Collection from \"./collection\";\nimport Helpers from \"./helpers\";\nimport Scale from \"./scale\";\nexport default {\n  getData: function (props, childComponents) {\n    if (props.data) {\n      return Data.getData(props);\n    }\n\n    childComponents = childComponents || React.Children.toArray(props.children);\n    return this.getDataFromChildren(childComponents);\n  },\n  getDefaultDomainPadding: function (props, axis, childComponents) {\n    if (props.polar || axis !== \"x\") {\n      return undefined;\n    }\n\n    var groupComponent = childComponents.filter(function (child) {\n      return child.type && child.type.role && child.type.role === \"group\";\n    });\n\n    if (groupComponent.length < 1) {\n      return undefined;\n    }\n\n    var _groupComponent$0$pro = groupComponent[0].props,\n        offset = _groupComponent$0$pro.offset,\n        children = _groupComponent$0$pro.children;\n    return {\n      x: offset * children.length / 2\n    };\n  },\n  getDomain: function (props, axis, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var propsDomain = Domain.getDomainFromProps(props, axis);\n    var minDomain = Domain.getMinFromProps(props, axis);\n    var maxDomain = Domain.getMaxFromProps(props, axis);\n    var domainPadding = this.getDefaultDomainPadding(props, axis, childComponents);\n    var domain;\n\n    if (propsDomain) {\n      domain = propsDomain;\n    } else {\n      var dataset = (props.data || props.y) && Data.getData(props);\n      var dataDomain = dataset ? Domain.getDomainFromData(props, axis, dataset) : [];\n      var childDomain = this.getDomainFromChildren(props, axis, childComponents);\n      var min = minDomain || Collection.getMinValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      var max = maxDomain || Collection.getMaxValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      domain = Domain.getDomainFromMinMax(min, max);\n    }\n\n    return Domain.formatDomain(domain, _assign({\n      domainPadding: domainPadding\n    }, props), axis);\n  },\n  getScale: function (props, axis, childComponents) {\n    if (props.data) {\n      return Scale.getBaseScale(props, axis);\n    }\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, {\n        horizontal: props.horizontal\n      });\n\n      return Scale.getScaleType(sharedProps, axis);\n    };\n\n    var childScale = _uniq(Helpers.reduceChildren(children, iteratee, props)); // default to linear scale if more than one uniq scale type is given by children\n\n\n    return childScale.length > 1 ? Scale.getScaleFromName(\"linear\") : Scale.getScaleFromName(childScale[0]);\n  },\n  setAnimationState: function (props, nextProps) {\n    if (!props.animate) {\n      return;\n    }\n\n    if (props.animate.parentState) {\n      var nodesWillExit = props.animate.parentState.nodesWillExit;\n      var oldProps = nodesWillExit ? props : null;\n      this.setState(_defaults({\n        oldProps: oldProps,\n        nextProps: nextProps\n      }, props.animate.parentState));\n    } else {\n      var oldChildren = React.Children.toArray(props.children);\n      var nextChildren = React.Children.toArray(nextProps.children);\n\n      var isContinuous = function (child) {\n        var check = function (c) {\n          return c.type && c.type.continuous;\n        };\n\n        return Array.isArray(child) ? _some(child, check) : check(child);\n      };\n\n      var continuous = !props.polar && _some(oldChildren, function (child) {\n        return isContinuous(child) || child.props.children && isContinuous(child.props.children);\n      });\n\n      var _Transitions$getIniti = Transitions.getInitialTransitionState(oldChildren, nextChildren),\n          _nodesWillExit = _Transitions$getIniti.nodesWillExit,\n          nodesWillEnter = _Transitions$getIniti.nodesWillEnter,\n          childrenTransitions = _Transitions$getIniti.childrenTransitions,\n          nodesShouldEnter = _Transitions$getIniti.nodesShouldEnter;\n\n      this.setState({\n        nodesWillExit: _nodesWillExit,\n        nodesWillEnter: nodesWillEnter,\n        nodesShouldEnter: nodesShouldEnter,\n        childrenTransitions: Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[0] : childrenTransitions,\n        oldProps: _nodesWillExit ? props : null,\n        nextProps: nextProps,\n        continuous: continuous\n      });\n    }\n  },\n  getAllEvents: function (props) {\n    var components = [\"groupComponent\", \"containerComponent\", \"labelComponent\"];\n    this.componentEvents = Events.getComponentEvents(props, components);\n    var events = props.events;\n\n    if (Array.isArray(this.componentEvents)) {\n      var _componentEvents;\n\n      events = Array.isArray(props.events) ? (_componentEvents = this.componentEvents).concat.apply(_componentEvents, _toConsumableArray(props.events)) : this.componentEvents;\n    }\n\n    return events || [];\n  },\n  getAnimationProps: function (props, child, index) {\n    var _this = this;\n\n    if (!props.animate) {\n      return child.props.animate;\n    }\n\n    var getFilteredState = function () {\n      var childrenTransitions = _this.state && _this.state.childrenTransitions;\n      childrenTransitions = Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[index] : childrenTransitions;\n      return _defaults({\n        childrenTransitions: childrenTransitions\n      }, _this.state);\n    };\n\n    var getTransitions = props.animate && props.animate.getTransitions;\n    var state = getFilteredState();\n    var parentState = props.animate && props.animate.parentState || state;\n\n    if (!getTransitions) {\n      var getTransitionProps = Transitions.getTransitionPropsFactory(props, state, function (newState) {\n        return _this.setState(newState);\n      });\n\n      getTransitions = function (childComponent) {\n        return getTransitionProps(childComponent, index);\n      };\n    }\n\n    return _defaults({\n      getTransitions: getTransitions,\n      parentState: parentState\n    }, props.animate, child.props.animate);\n  },\n  getDomainFromChildren: function (props, axis, childComponents) {\n    // eslint-disable-line max-statements, complexity, max-len\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var parentData = props.data ? Data.getData(props, axis) : undefined;\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain,\n        horizontal = props.horizontal;\n    var baseParentProps = {\n      horizontal: horizontal,\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      minDomain: minDomain,\n      maxDomain: maxDomain,\n      categories: categories\n    };\n    var parentProps = parentData ? _assign(baseParentProps, {\n      data: parentData\n    }) : baseParentProps;\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, parentProps);\n\n      if (!Domain.isDomainComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getDomain)) {\n        return child.props && child.type.getDomain(sharedProps, axis);\n      } else {\n        return Domain.getDomain(sharedProps, axis);\n      }\n    };\n\n    var childDomains = Helpers.reduceChildren(children, iteratee, props);\n    var min = childDomains.length === 0 ? 0 : Collection.getMinValue(childDomains);\n    var max = childDomains.length === 0 ? 1 : Collection.getMaxValue(childDomains);\n    return [min, max];\n  },\n  getDataFromChildren: function (props, childComponents) {\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain;\n    var parentProps = {\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      categories: categories,\n      minDomain: minDomain,\n      maxDomain: maxDomain\n    };\n    var stack = 0;\n\n    var iteratee = function (child, childName, parent) {\n      var childProps = _assign({}, child.props, parentProps);\n\n      var childData;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        child = parent ? React.cloneElement(child, parent.props) : child;\n        childData = child.type.getData(childProps);\n      } else {\n        childData = Data.getData(childProps);\n      }\n\n      stack += 1;\n      return childData.map(function (datum, index) {\n        return _assign({\n          _stack: stack,\n          _group: index\n        }, datum);\n      });\n    };\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var stacked = children.filter(function (c) {\n      return c.type && c.type.role === \"stack\";\n    }).length;\n\n    var combine = function (memo, val) {\n      return memo.concat(_uniqBy(val, \"_group\"));\n    };\n\n    var datasets = Helpers.reduceChildren(children, iteratee, props, [], combine);\n    var group = stacked ? \"_group\" : \"_stack\";\n    return _values(_groupBy(datasets, group));\n  },\n  getColor: function (calculatedProps, child, index) {\n    // check for styles first\n    var style = calculatedProps.style;\n    var colorScale = calculatedProps.colorScale,\n        color = calculatedProps.color;\n\n    if (style && style.data && style.data.fill) {\n      return style.data.fill;\n    }\n\n    colorScale = child.props && child.props.colorScale ? child.props.colorScale : colorScale;\n    color = child.props && child.props.color ? child.props.color : color;\n\n    if (!colorScale && !color) {\n      return undefined;\n    }\n\n    var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n    return color || colors[index % colors.length];\n  },\n  getWidth: function (props) {\n    var datasets = props.datasets,\n        scale = props.scale,\n        horizontal = props.horizontal;\n    var range = horizontal ? scale.y.range() : scale.x.range();\n    var extent = Math.abs(range[1] - range[0]);\n    var seriesLength = Array.isArray(datasets[0]) ? datasets[0].length : 1;\n    var bars = datasets.length * seriesLength + 2;\n    var barRatio = 0.5;\n    return {\n      width: Math.round(barRatio * extent / bars)\n    };\n  },\n  getStyle: function (theme, style, role) {\n    var defaultStyle = theme && theme[role] && theme[role].style ? theme[role].style : {};\n    return Helpers.getStyles(style, defaultStyle);\n  },\n  getChildStyle: function (child, index, calculatedProps) {\n    var style = calculatedProps.style,\n        role = calculatedProps.role;\n    var childStyle = child.props.style || {};\n\n    if (Array.isArray(childStyle)) {\n      return childStyle;\n    }\n\n    var childRole = child.type && child.type.role;\n    var defaultFill = childRole === \"stack\" ? undefined : this.getColor(calculatedProps, child, index);\n    var defaultColor = childRole === \"line\" ? {\n      fill: \"none\",\n      stroke: defaultFill\n    } : {\n      fill: defaultFill\n    };\n    var dataWidth = role === \"stack\" ? {} : this.getWidth(calculatedProps);\n\n    var dataStyle = _defaults({}, childStyle.data, _assign({}, dataWidth, style.data, defaultColor));\n\n    var labelsStyle = _defaults({}, childStyle.labels, style.labels);\n\n    return {\n      parent: style.parent,\n      data: dataStyle,\n      labels: labelsStyle\n    };\n  },\n  getStringsFromCategories: function (childComponents, axis) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n\n      if (!Domain.isDomainComponent(child) || !childProps.categories) {\n        return null;\n      } else {\n        var categories = childProps.categories && !Array.isArray(childProps.categories) ? childProps.categories[axis] : childProps.props.categories;\n        var categoryStrings = categories && categories.filter(function (val) {\n          return typeof val === \"string\";\n        });\n        return categoryStrings ? Collection.removeUndefined(categoryStrings) : [];\n      }\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee);\n  },\n  getStringsFromData: function (childComponents) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n      var data;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        data = child.type.getData(childProps);\n      } else {\n        data = Data.getData(childProps);\n      }\n\n      return data.map(function (d) {\n        return {\n          x: d.xName,\n          y: d.yName\n        };\n      });\n    };\n\n    var initialMemo = {\n      x: [],\n      y: []\n    };\n\n    var combine = function (memo, datum) {\n      var x = Array.isArray(datum) ? datum.map(function (d) {\n        return d.x;\n      }).filter(Boolean) : datum.x;\n      var y = Array.isArray(datum) ? datum.map(function (d) {\n        return d.y;\n      }).filter(Boolean) : datum.y;\n      return {\n        x: x !== undefined ? memo.x.concat(x) : memo.x,\n        y: y !== undefined ? memo.y.concat(y) : memo.y\n      };\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee, {}, initialMemo, combine);\n  },\n  getCategoryAndAxisStringsFromChildren: function (props, axis, childComponents) {\n    var categories = _isPlainObject(props.categories) ? props.categories[axis] : props.categories;\n    var axisComponent = Axis.getAxisComponent(childComponents, axis);\n    var axisStrings = axisComponent ? Data.getStringsFromAxes(axisComponent.props, axis) : [];\n    var categoryStrings = categories || this.getStringsFromCategories(childComponents, axis);\n    return _uniq(_flatten(_toConsumableArray(categoryStrings).concat(_toConsumableArray(axisStrings))));\n  },\n  getStringsFromChildren: function (props, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var xStrings = this.getCategoryAndAxisStringsFromChildren(props, \"x\", childComponents);\n    var yStrings = this.getCategoryAndAxisStringsFromChildren(props, \"y\", childComponents);\n    var dataStrings = this.getStringsFromData(childComponents);\n    return {\n      x: _uniq(_flatten(_toConsumableArray(xStrings).concat(_toConsumableArray(dataStrings.x)))),\n      y: _uniq(_flatten(_toConsumableArray(yStrings).concat(_toConsumableArray(dataStrings.y))))\n    };\n  },\n  getCategories: function (props) {\n    var xPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.x : props.categories;\n    var yPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.y : props.categories;\n    var fallbackRequired = !xPropCategories || !yPropCategories;\n    var fallbackProps = fallbackRequired ? this.getStringsFromChildren(props) : {};\n    var xCategories = xPropCategories || fallbackProps.x;\n    var yCategories = yPropCategories || fallbackProps.y;\n    return {\n      x: xCategories.length > 0 ? xCategories : undefined,\n      y: yCategories.length > 0 ? yCategories : undefined\n    };\n  }\n};","map":{"version":3,"sources":["/Users/abdurauf/Desktop/diploma/restaurant-management-system/plov/node_modules/victory-core/es/victory-util/wrapper.js"],"names":["_isPlainObject","_values","_uniqBy","_groupBy","_some","_uniq","_isFunction","_flatten","_defaults","_assign","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","React","Axis","Style","Transitions","Data","Domain","Events","Collection","Helpers","Scale","getData","props","childComponents","data","Children","toArray","children","getDataFromChildren","getDefaultDomainPadding","axis","polar","undefined","groupComponent","filter","child","type","role","_groupComponent$0$pro","offset","x","getDomain","propsDomain","getDomainFromProps","minDomain","getMinFromProps","maxDomain","getMaxFromProps","domainPadding","domain","dataset","y","dataDomain","getDomainFromData","childDomain","getDomainFromChildren","min","getMinValue","concat","max","getMaxValue","getDomainFromMinMax","formatDomain","getScale","getBaseScale","slice","iteratee","sharedProps","horizontal","getScaleType","childScale","reduceChildren","getScaleFromName","setAnimationState","nextProps","animate","parentState","nodesWillExit","oldProps","setState","oldChildren","nextChildren","isContinuous","check","c","continuous","_Transitions$getIniti","getInitialTransitionState","_nodesWillExit","nodesWillEnter","childrenTransitions","nodesShouldEnter","isArrayOfArrays","getAllEvents","components","componentEvents","getComponentEvents","events","_componentEvents","apply","getAnimationProps","index","_this","getFilteredState","state","getTransitions","getTransitionProps","getTransitionPropsFactory","newState","childComponent","parentData","startAngle","endAngle","categories","baseParentProps","parentProps","isDomainComponent","childDomains","stack","childName","parent","childProps","childData","isDataComponent","cloneElement","map","datum","_stack","_group","stacked","combine","memo","val","datasets","group","getColor","calculatedProps","style","colorScale","color","fill","colors","getColorScale","getWidth","scale","range","extent","Math","abs","seriesLength","bars","barRatio","width","round","getStyle","theme","defaultStyle","getStyles","getChildStyle","childStyle","childRole","defaultFill","defaultColor","stroke","dataWidth","dataStyle","labelsStyle","labels","getStringsFromCategories","categoryStrings","removeUndefined","getStringsFromData","d","xName","yName","initialMemo","Boolean","getCategoryAndAxisStringsFromChildren","axisComponent","getAxisComponent","axisStrings","getStringsFromAxes","getStringsFromChildren","xStrings","yStrings","dataStrings","getCategories","xPropCategories","yPropCategories","fallbackRequired","fallbackProps","xCategories","yCategories"],"mappings":"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","sourcesContent":["import _isPlainObject from \"lodash/isPlainObject\";\nimport _values from \"lodash/values\";\nimport _uniqBy from \"lodash/uniqBy\";\nimport _groupBy from \"lodash/groupBy\";\nimport _some from \"lodash/some\";\nimport _uniq from \"lodash/uniq\";\nimport _isFunction from \"lodash/isFunction\";\nimport _flatten from \"lodash/flatten\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport React from \"react\";\nimport Axis from \"./axis\";\nimport Style from \"./style\";\nimport Transitions from \"./transitions\";\nimport Data from \"./data\";\nimport Domain from \"./domain\";\nimport Events from \"./events\";\nimport Collection from \"./collection\";\nimport Helpers from \"./helpers\";\nimport Scale from \"./scale\";\nexport default {\n  getData: function (props, childComponents) {\n    if (props.data) {\n      return Data.getData(props);\n    }\n\n    childComponents = childComponents || React.Children.toArray(props.children);\n    return this.getDataFromChildren(childComponents);\n  },\n  getDefaultDomainPadding: function (props, axis, childComponents) {\n    if (props.polar || axis !== \"x\") {\n      return undefined;\n    }\n\n    var groupComponent = childComponents.filter(function (child) {\n      return child.type && child.type.role && child.type.role === \"group\";\n    });\n\n    if (groupComponent.length < 1) {\n      return undefined;\n    }\n\n    var _groupComponent$0$pro = groupComponent[0].props,\n        offset = _groupComponent$0$pro.offset,\n        children = _groupComponent$0$pro.children;\n    return {\n      x: offset * children.length / 2\n    };\n  },\n  getDomain: function (props, axis, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var propsDomain = Domain.getDomainFromProps(props, axis);\n    var minDomain = Domain.getMinFromProps(props, axis);\n    var maxDomain = Domain.getMaxFromProps(props, axis);\n    var domainPadding = this.getDefaultDomainPadding(props, axis, childComponents);\n    var domain;\n\n    if (propsDomain) {\n      domain = propsDomain;\n    } else {\n      var dataset = (props.data || props.y) && Data.getData(props);\n      var dataDomain = dataset ? Domain.getDomainFromData(props, axis, dataset) : [];\n      var childDomain = this.getDomainFromChildren(props, axis, childComponents);\n      var min = minDomain || Collection.getMinValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      var max = maxDomain || Collection.getMaxValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      domain = Domain.getDomainFromMinMax(min, max);\n    }\n\n    return Domain.formatDomain(domain, _assign({\n      domainPadding: domainPadding\n    }, props), axis);\n  },\n  getScale: function (props, axis, childComponents) {\n    if (props.data) {\n      return Scale.getBaseScale(props, axis);\n    }\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, {\n        horizontal: props.horizontal\n      });\n\n      return Scale.getScaleType(sharedProps, axis);\n    };\n\n    var childScale = _uniq(Helpers.reduceChildren(children, iteratee, props)); // default to linear scale if more than one uniq scale type is given by children\n\n\n    return childScale.length > 1 ? Scale.getScaleFromName(\"linear\") : Scale.getScaleFromName(childScale[0]);\n  },\n  setAnimationState: function (props, nextProps) {\n    if (!props.animate) {\n      return;\n    }\n\n    if (props.animate.parentState) {\n      var nodesWillExit = props.animate.parentState.nodesWillExit;\n      var oldProps = nodesWillExit ? props : null;\n      this.setState(_defaults({\n        oldProps: oldProps,\n        nextProps: nextProps\n      }, props.animate.parentState));\n    } else {\n      var oldChildren = React.Children.toArray(props.children);\n      var nextChildren = React.Children.toArray(nextProps.children);\n\n      var isContinuous = function (child) {\n        var check = function (c) {\n          return c.type && c.type.continuous;\n        };\n\n        return Array.isArray(child) ? _some(child, check) : check(child);\n      };\n\n      var continuous = !props.polar && _some(oldChildren, function (child) {\n        return isContinuous(child) || child.props.children && isContinuous(child.props.children);\n      });\n\n      var _Transitions$getIniti = Transitions.getInitialTransitionState(oldChildren, nextChildren),\n          _nodesWillExit = _Transitions$getIniti.nodesWillExit,\n          nodesWillEnter = _Transitions$getIniti.nodesWillEnter,\n          childrenTransitions = _Transitions$getIniti.childrenTransitions,\n          nodesShouldEnter = _Transitions$getIniti.nodesShouldEnter;\n\n      this.setState({\n        nodesWillExit: _nodesWillExit,\n        nodesWillEnter: nodesWillEnter,\n        nodesShouldEnter: nodesShouldEnter,\n        childrenTransitions: Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[0] : childrenTransitions,\n        oldProps: _nodesWillExit ? props : null,\n        nextProps: nextProps,\n        continuous: continuous\n      });\n    }\n  },\n  getAllEvents: function (props) {\n    var components = [\"groupComponent\", \"containerComponent\", \"labelComponent\"];\n    this.componentEvents = Events.getComponentEvents(props, components);\n    var events = props.events;\n\n    if (Array.isArray(this.componentEvents)) {\n      var _componentEvents;\n\n      events = Array.isArray(props.events) ? (_componentEvents = this.componentEvents).concat.apply(_componentEvents, _toConsumableArray(props.events)) : this.componentEvents;\n    }\n\n    return events || [];\n  },\n  getAnimationProps: function (props, child, index) {\n    var _this = this;\n\n    if (!props.animate) {\n      return child.props.animate;\n    }\n\n    var getFilteredState = function () {\n      var childrenTransitions = _this.state && _this.state.childrenTransitions;\n      childrenTransitions = Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[index] : childrenTransitions;\n      return _defaults({\n        childrenTransitions: childrenTransitions\n      }, _this.state);\n    };\n\n    var getTransitions = props.animate && props.animate.getTransitions;\n    var state = getFilteredState();\n    var parentState = props.animate && props.animate.parentState || state;\n\n    if (!getTransitions) {\n      var getTransitionProps = Transitions.getTransitionPropsFactory(props, state, function (newState) {\n        return _this.setState(newState);\n      });\n\n      getTransitions = function (childComponent) {\n        return getTransitionProps(childComponent, index);\n      };\n    }\n\n    return _defaults({\n      getTransitions: getTransitions,\n      parentState: parentState\n    }, props.animate, child.props.animate);\n  },\n  getDomainFromChildren: function (props, axis, childComponents) {\n    // eslint-disable-line max-statements, complexity, max-len\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var parentData = props.data ? Data.getData(props, axis) : undefined;\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain,\n        horizontal = props.horizontal;\n    var baseParentProps = {\n      horizontal: horizontal,\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      minDomain: minDomain,\n      maxDomain: maxDomain,\n      categories: categories\n    };\n    var parentProps = parentData ? _assign(baseParentProps, {\n      data: parentData\n    }) : baseParentProps;\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, parentProps);\n\n      if (!Domain.isDomainComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getDomain)) {\n        return child.props && child.type.getDomain(sharedProps, axis);\n      } else {\n        return Domain.getDomain(sharedProps, axis);\n      }\n    };\n\n    var childDomains = Helpers.reduceChildren(children, iteratee, props);\n    var min = childDomains.length === 0 ? 0 : Collection.getMinValue(childDomains);\n    var max = childDomains.length === 0 ? 1 : Collection.getMaxValue(childDomains);\n    return [min, max];\n  },\n  getDataFromChildren: function (props, childComponents) {\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain;\n    var parentProps = {\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      categories: categories,\n      minDomain: minDomain,\n      maxDomain: maxDomain\n    };\n    var stack = 0;\n\n    var iteratee = function (child, childName, parent) {\n      var childProps = _assign({}, child.props, parentProps);\n\n      var childData;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        child = parent ? React.cloneElement(child, parent.props) : child;\n        childData = child.type.getData(childProps);\n      } else {\n        childData = Data.getData(childProps);\n      }\n\n      stack += 1;\n      return childData.map(function (datum, index) {\n        return _assign({\n          _stack: stack,\n          _group: index\n        }, datum);\n      });\n    };\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var stacked = children.filter(function (c) {\n      return c.type && c.type.role === \"stack\";\n    }).length;\n\n    var combine = function (memo, val) {\n      return memo.concat(_uniqBy(val, \"_group\"));\n    };\n\n    var datasets = Helpers.reduceChildren(children, iteratee, props, [], combine);\n    var group = stacked ? \"_group\" : \"_stack\";\n    return _values(_groupBy(datasets, group));\n  },\n  getColor: function (calculatedProps, child, index) {\n    // check for styles first\n    var style = calculatedProps.style;\n    var colorScale = calculatedProps.colorScale,\n        color = calculatedProps.color;\n\n    if (style && style.data && style.data.fill) {\n      return style.data.fill;\n    }\n\n    colorScale = child.props && child.props.colorScale ? child.props.colorScale : colorScale;\n    color = child.props && child.props.color ? child.props.color : color;\n\n    if (!colorScale && !color) {\n      return undefined;\n    }\n\n    var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n    return color || colors[index % colors.length];\n  },\n  getWidth: function (props) {\n    var datasets = props.datasets,\n        scale = props.scale,\n        horizontal = props.horizontal;\n    var range = horizontal ? scale.y.range() : scale.x.range();\n    var extent = Math.abs(range[1] - range[0]);\n    var seriesLength = Array.isArray(datasets[0]) ? datasets[0].length : 1;\n    var bars = datasets.length * seriesLength + 2;\n    var barRatio = 0.5;\n    return {\n      width: Math.round(barRatio * extent / bars)\n    };\n  },\n  getStyle: function (theme, style, role) {\n    var defaultStyle = theme && theme[role] && theme[role].style ? theme[role].style : {};\n    return Helpers.getStyles(style, defaultStyle);\n  },\n  getChildStyle: function (child, index, calculatedProps) {\n    var style = calculatedProps.style,\n        role = calculatedProps.role;\n    var childStyle = child.props.style || {};\n\n    if (Array.isArray(childStyle)) {\n      return childStyle;\n    }\n\n    var childRole = child.type && child.type.role;\n    var defaultFill = childRole === \"stack\" ? undefined : this.getColor(calculatedProps, child, index);\n    var defaultColor = childRole === \"line\" ? {\n      fill: \"none\",\n      stroke: defaultFill\n    } : {\n      fill: defaultFill\n    };\n    var dataWidth = role === \"stack\" ? {} : this.getWidth(calculatedProps);\n\n    var dataStyle = _defaults({}, childStyle.data, _assign({}, dataWidth, style.data, defaultColor));\n\n    var labelsStyle = _defaults({}, childStyle.labels, style.labels);\n\n    return {\n      parent: style.parent,\n      data: dataStyle,\n      labels: labelsStyle\n    };\n  },\n  getStringsFromCategories: function (childComponents, axis) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n\n      if (!Domain.isDomainComponent(child) || !childProps.categories) {\n        return null;\n      } else {\n        var categories = childProps.categories && !Array.isArray(childProps.categories) ? childProps.categories[axis] : childProps.props.categories;\n        var categoryStrings = categories && categories.filter(function (val) {\n          return typeof val === \"string\";\n        });\n        return categoryStrings ? Collection.removeUndefined(categoryStrings) : [];\n      }\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee);\n  },\n  getStringsFromData: function (childComponents) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n      var data;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        data = child.type.getData(childProps);\n      } else {\n        data = Data.getData(childProps);\n      }\n\n      return data.map(function (d) {\n        return {\n          x: d.xName,\n          y: d.yName\n        };\n      });\n    };\n\n    var initialMemo = {\n      x: [],\n      y: []\n    };\n\n    var combine = function (memo, datum) {\n      var x = Array.isArray(datum) ? datum.map(function (d) {\n        return d.x;\n      }).filter(Boolean) : datum.x;\n      var y = Array.isArray(datum) ? datum.map(function (d) {\n        return d.y;\n      }).filter(Boolean) : datum.y;\n      return {\n        x: x !== undefined ? memo.x.concat(x) : memo.x,\n        y: y !== undefined ? memo.y.concat(y) : memo.y\n      };\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee, {}, initialMemo, combine);\n  },\n  getCategoryAndAxisStringsFromChildren: function (props, axis, childComponents) {\n    var categories = _isPlainObject(props.categories) ? props.categories[axis] : props.categories;\n    var axisComponent = Axis.getAxisComponent(childComponents, axis);\n    var axisStrings = axisComponent ? Data.getStringsFromAxes(axisComponent.props, axis) : [];\n    var categoryStrings = categories || this.getStringsFromCategories(childComponents, axis);\n    return _uniq(_flatten(_toConsumableArray(categoryStrings).concat(_toConsumableArray(axisStrings))));\n  },\n  getStringsFromChildren: function (props, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var xStrings = this.getCategoryAndAxisStringsFromChildren(props, \"x\", childComponents);\n    var yStrings = this.getCategoryAndAxisStringsFromChildren(props, \"y\", childComponents);\n    var dataStrings = this.getStringsFromData(childComponents);\n    return {\n      x: _uniq(_flatten(_toConsumableArray(xStrings).concat(_toConsumableArray(dataStrings.x)))),\n      y: _uniq(_flatten(_toConsumableArray(yStrings).concat(_toConsumableArray(dataStrings.y))))\n    };\n  },\n  getCategories: function (props) {\n    var xPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.x : props.categories;\n    var yPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.y : props.categories;\n    var fallbackRequired = !xPropCategories || !yPropCategories;\n    var fallbackProps = fallbackRequired ? this.getStringsFromChildren(props) : {};\n    var xCategories = xPropCategories || fallbackProps.x;\n    var yCategories = yPropCategories || fallbackProps.y;\n    return {\n      x: xCategories.length > 0 ? xCategories : undefined,\n      y: yCategories.length > 0 ? yCategories : undefined\n    };\n  }\n};"]},"metadata":{},"sourceType":"module"}