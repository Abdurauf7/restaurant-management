{"ast":null,"code":"import _isNil from \"lodash/isNil\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, LabelHelpers, Scale, Domain, Data } from \"victory-core\";\n\nvar getErrors = function (props, datum, axis) {\n  /**\n   * check if it is asymmetric error or symmetric error, asymmetric error should be an array\n   * and the first value is the positive error, the second is the negative error\n   * @param  {Boolean} isArray(errorX)\n   * @return {String or Array}\n   */\n  var errorNames = {\n    x: \"_errorX\",\n    y: \"_errorY\"\n  };\n  var errors = datum[errorNames[axis]];\n\n  if (errors === 0) {\n    return false;\n  }\n\n  var scale = props.scale[axis];\n  return Array.isArray(errors) ? [errors[0] === 0 ? false : scale(errors[0] + datum[\"_\".concat(axis)]), errors[1] === 0 ? false : scale(datum[\"_\".concat(axis)] - errors[1])] : [scale(errors + datum[\"_\".concat(axis)]), scale(datum[\"_\".concat(axis)] - errors)];\n};\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"y\", \"errorX\", \"errorY\"];\n\n  if (props.data) {\n    return Data.formatData(props.data, props, accessorTypes);\n  } else {\n    var generatedData = props.errorX || props.errorY ? Data.generateData(props) : [];\n    return Data.formatData(generatedData, props, accessorTypes);\n  }\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var error = axis === \"x\" ? \"_errorX\" : \"_errorY\";\n\n  var reduceErrorData = function (type) {\n    var baseCondition = type === \"min\" ? Infinity : -Infinity;\n    var errorIndex = type === \"min\" ? 1 : 0;\n    var sign = type === \"min\" ? -1 : 1;\n    return dataset.reduce(function (memo, datum) {\n      var currentError = Array.isArray(datum[error]) ? datum[error][errorIndex] : datum[error];\n      var current = datum[\"_\".concat(axis)] + sign * (currentError || 0);\n      return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n    }, baseCondition);\n  };\n\n  var min = minDomain !== undefined ? minDomain : reduceErrorData(\"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceErrorData(\"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getCalculatedValues = function (props) {\n  var defaultStyles = props.theme && props.theme.errorbar && props.theme.errorbar.style ? props.theme.errorbar.style : {};\n  var style = Helpers.getStyles(props.style, defaultStyles) || {};\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = props.polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin\n  };\n};\n\nvar getLabelProps = function (dataProps, text, style) {\n  var x = dataProps.x,\n      y = dataProps.y,\n      index = dataProps.index,\n      scale = dataProps.scale,\n      errorY = dataProps.errorY,\n      errorX = dataProps.errorX,\n      horizontal = dataProps.horizontal;\n\n  var getError = function () {\n    var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"x\";\n    var baseError = type === \"y\" ? errorY : errorX;\n    var error = baseError && Array.isArray(baseError) ? baseError[0] : baseError;\n    return error || dataProps[type];\n  };\n\n  var labelStyle = style.labels || {};\n  var padding = labelStyle.padding || 0;\n  var textAnchor = horizontal ? \"start\" : \"middle\";\n  var verticalAnchor = horizontal ? \"middle\" : \"end\";\n  return {\n    style: labelStyle,\n    y: horizontal ? y : getError(\"y\"),\n    x: horizontal ? getError(\"x\") : x,\n    dy: horizontal ? 0 : -padding,\n    dx: horizontal ? padding : 0,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: dataProps.datum,\n    data: dataProps.data,\n    textAnchor: labelStyle.textAnchor || textAnchor,\n    verticalAnchor: labelStyle.verticalAnchor || verticalAnchor,\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n\nvar getBaseProps = function (props, fallbackProps) {\n  var modifiedProps = Helpers.modifyProps(props, fallbackProps, \"errorbar\");\n  props = _assign({}, modifiedProps, getCalculatedValues(modifiedProps));\n  var _props = props,\n      borderWidth = _props.borderWidth,\n      data = _props.data,\n      domain = _props.domain,\n      events = _props.events,\n      groupComponent = _props.groupComponent,\n      height = _props.height,\n      horizontal = _props.horizontal,\n      labels = _props.labels,\n      name = _props.name,\n      origin = _props.origin,\n      padding = _props.padding,\n      polar = _props.polar,\n      scale = _props.scale,\n      sharedEvents = _props.sharedEvents,\n      standalone = _props.standalone,\n      style = _props.style,\n      theme = _props.theme,\n      width = _props.width;\n  var initialChildProps = {\n    parent: {\n      data: data,\n      domain: domain,\n      height: height,\n      horizontal: horizontal,\n      name: name,\n      origin: origin,\n      padding: padding,\n      polar: polar,\n      scale: scale,\n      standalone: standalone,\n      style: style.parent,\n      theme: theme,\n      width: width\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n\n    var _Helpers$scalePoint = Helpers.scalePoint(_assign({}, props, {\n      scale: scale\n    }), datum),\n        x = _Helpers$scalePoint.x,\n        y = _Helpers$scalePoint.y;\n\n    var errorX = getErrors(props, datum, \"x\");\n    var errorY = getErrors(props, datum, \"y\");\n    var dataProps = {\n      borderWidth: borderWidth,\n      data: data,\n      datum: datum,\n      errorX: horizontal ? errorY : errorX,\n      errorY: horizontal ? errorX : errorY,\n      groupComponent: groupComponent,\n      horizontal: horizontal,\n      index: index,\n      scale: scale,\n      style: style.data,\n      x: x,\n      y: y\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = LabelHelpers.getText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      childProps[eventKey].labels = getLabelProps(dataProps, text, style);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };","map":{"version":3,"sources":["/Users/abdurauf/Desktop/diploma/restaurant-management-system/plov/node_modules/victory-errorbar/es/helper-methods.js"],"names":["_isNil","_assign","Helpers","LabelHelpers","Scale","Domain","Data","getErrors","props","datum","axis","errorNames","x","y","errors","scale","Array","isArray","concat","getData","accessorTypes","data","formatData","generatedData","errorX","errorY","generateData","getDomainFromData","minDomain","getMinFromProps","maxDomain","getMaxFromProps","dataset","length","undefined","getDomainFromMinMax","error","reduceErrorData","type","baseCondition","Infinity","errorIndex","sign","reduce","memo","currentError","current","min","max","getDomain","createDomainFunction","getCalculatedValues","defaultStyles","theme","errorbar","style","getStyles","range","getRange","domain","getBaseScale","horizontal","origin","polar","getPolarOrigin","getLabelProps","dataProps","text","index","getError","arguments","baseError","labelStyle","labels","padding","textAnchor","verticalAnchor","dy","dx","angle","getBaseProps","fallbackProps","modifiedProps","modifyProps","_props","borderWidth","events","groupComponent","height","name","sharedEvents","standalone","width","initialChildProps","parent","childProps","eventKey","_Helpers$scalePoint","scalePoint","getText"],"mappings":"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","sourcesContent":["import _isNil from \"lodash/isNil\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, LabelHelpers, Scale, Domain, Data } from \"victory-core\";\n\nvar getErrors = function (props, datum, axis) {\n  /**\n   * check if it is asymmetric error or symmetric error, asymmetric error should be an array\n   * and the first value is the positive error, the second is the negative error\n   * @param  {Boolean} isArray(errorX)\n   * @return {String or Array}\n   */\n  var errorNames = {\n    x: \"_errorX\",\n    y: \"_errorY\"\n  };\n  var errors = datum[errorNames[axis]];\n\n  if (errors === 0) {\n    return false;\n  }\n\n  var scale = props.scale[axis];\n  return Array.isArray(errors) ? [errors[0] === 0 ? false : scale(errors[0] + datum[\"_\".concat(axis)]), errors[1] === 0 ? false : scale(datum[\"_\".concat(axis)] - errors[1])] : [scale(errors + datum[\"_\".concat(axis)]), scale(datum[\"_\".concat(axis)] - errors)];\n};\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"y\", \"errorX\", \"errorY\"];\n\n  if (props.data) {\n    return Data.formatData(props.data, props, accessorTypes);\n  } else {\n    var generatedData = props.errorX || props.errorY ? Data.generateData(props) : [];\n    return Data.formatData(generatedData, props, accessorTypes);\n  }\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var error = axis === \"x\" ? \"_errorX\" : \"_errorY\";\n\n  var reduceErrorData = function (type) {\n    var baseCondition = type === \"min\" ? Infinity : -Infinity;\n    var errorIndex = type === \"min\" ? 1 : 0;\n    var sign = type === \"min\" ? -1 : 1;\n    return dataset.reduce(function (memo, datum) {\n      var currentError = Array.isArray(datum[error]) ? datum[error][errorIndex] : datum[error];\n      var current = datum[\"_\".concat(axis)] + sign * (currentError || 0);\n      return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n    }, baseCondition);\n  };\n\n  var min = minDomain !== undefined ? minDomain : reduceErrorData(\"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceErrorData(\"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getCalculatedValues = function (props) {\n  var defaultStyles = props.theme && props.theme.errorbar && props.theme.errorbar.style ? props.theme.errorbar.style : {};\n  var style = Helpers.getStyles(props.style, defaultStyles) || {};\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = props.polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin\n  };\n};\n\nvar getLabelProps = function (dataProps, text, style) {\n  var x = dataProps.x,\n      y = dataProps.y,\n      index = dataProps.index,\n      scale = dataProps.scale,\n      errorY = dataProps.errorY,\n      errorX = dataProps.errorX,\n      horizontal = dataProps.horizontal;\n\n  var getError = function () {\n    var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"x\";\n    var baseError = type === \"y\" ? errorY : errorX;\n    var error = baseError && Array.isArray(baseError) ? baseError[0] : baseError;\n    return error || dataProps[type];\n  };\n\n  var labelStyle = style.labels || {};\n  var padding = labelStyle.padding || 0;\n  var textAnchor = horizontal ? \"start\" : \"middle\";\n  var verticalAnchor = horizontal ? \"middle\" : \"end\";\n  return {\n    style: labelStyle,\n    y: horizontal ? y : getError(\"y\"),\n    x: horizontal ? getError(\"x\") : x,\n    dy: horizontal ? 0 : -padding,\n    dx: horizontal ? padding : 0,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: dataProps.datum,\n    data: dataProps.data,\n    textAnchor: labelStyle.textAnchor || textAnchor,\n    verticalAnchor: labelStyle.verticalAnchor || verticalAnchor,\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n};\n\nvar getBaseProps = function (props, fallbackProps) {\n  var modifiedProps = Helpers.modifyProps(props, fallbackProps, \"errorbar\");\n  props = _assign({}, modifiedProps, getCalculatedValues(modifiedProps));\n  var _props = props,\n      borderWidth = _props.borderWidth,\n      data = _props.data,\n      domain = _props.domain,\n      events = _props.events,\n      groupComponent = _props.groupComponent,\n      height = _props.height,\n      horizontal = _props.horizontal,\n      labels = _props.labels,\n      name = _props.name,\n      origin = _props.origin,\n      padding = _props.padding,\n      polar = _props.polar,\n      scale = _props.scale,\n      sharedEvents = _props.sharedEvents,\n      standalone = _props.standalone,\n      style = _props.style,\n      theme = _props.theme,\n      width = _props.width;\n  var initialChildProps = {\n    parent: {\n      data: data,\n      domain: domain,\n      height: height,\n      horizontal: horizontal,\n      name: name,\n      origin: origin,\n      padding: padding,\n      polar: polar,\n      scale: scale,\n      standalone: standalone,\n      style: style.parent,\n      theme: theme,\n      width: width\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n\n    var _Helpers$scalePoint = Helpers.scalePoint(_assign({}, props, {\n      scale: scale\n    }), datum),\n        x = _Helpers$scalePoint.x,\n        y = _Helpers$scalePoint.y;\n\n    var errorX = getErrors(props, datum, \"x\");\n    var errorY = getErrors(props, datum, \"y\");\n    var dataProps = {\n      borderWidth: borderWidth,\n      data: data,\n      datum: datum,\n      errorX: horizontal ? errorY : errorX,\n      errorY: horizontal ? errorX : errorY,\n      groupComponent: groupComponent,\n      horizontal: horizontal,\n      index: index,\n      scale: scale,\n      style: style.data,\n      x: x,\n      y: y\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = LabelHelpers.getText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      childProps[eventKey].labels = getLabelProps(dataProps, text, style);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };"]},"metadata":{},"sourceType":"module"}