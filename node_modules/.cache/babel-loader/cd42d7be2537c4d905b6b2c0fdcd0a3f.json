{"ast":null,"code":"import _objectSpread from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// React\nimport React,{Fragment,useEffect,useState}from\"react\";// Third Part\nimport{Layout,Divider}from\"antd\";// Custom\nimport{HeaderTitle,openNotification,CustomDrawerButton}from\"../../../../custom/\";import*as All from\"./\";// Services\nimport{getDishes,addDishes,deleteDishes,updateDishes}from\"../../../../../services/dishServices\";var Content=Layout.Content;var DishContent=function DishContent(){// initializing states\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),editData=_useState6[0],setEditData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),drawerVisible=_useState8[0],setDrawerVisible=_useState8[1];//   hook cycles\nvar fetchDishData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDishes().then(function(res){return res.data;}).then(function(res){return setData(res);}).catch(function(err){return openNotification(\"error\",\"Cannot get informations\",\"Please check connection\");});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchDishData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchDishData();},[]);// custom Drawer\nvar showDrawer=function showDrawer(){setDrawerVisible(true);};var onhandleAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(items){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addDishes(items);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onhandleAdd(_x){return _ref2.apply(this,arguments);};}();var onClose=function onClose(){setDrawerVisible(false);window.location.reload();};//   Modal handle\nvar onCancel=function onCancel(){setVisible(false);window.location.reload();};//   handle actions in table item\nvar onhandleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){var orginaldata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:orginaldata=_objectSpread({},item);_context3.prev=1;_context3.next=4;return updateDishes(item);case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](1);setEditData(orginaldata);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[1,6]]);}));return function onhandleUpdate(_x2){return _ref3.apply(this,arguments);};}();var deleteItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item){var orginaldata;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:orginaldata=data;_context4.prev=1;_context4.next=4;return deleteDishes(item);case 4:_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](1);setData(orginaldata);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[1,6]]);}));return function deleteItem(_x3){return _ref4.apply(this,arguments);};}();var editItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item){var newData;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newData=_objectSpread({},item);setEditData(newData);setVisible(true);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function editItem(_x4){return _ref5.apply(this,arguments);};}();return React.createElement(Fragment,null,React.createElement(Content,{style:{margin:\"2em 16px\"}},React.createElement(\"div\",{className:\"border border-dark rounded\",style:{background:\"#fff\",padding:24,minHeight:280}},React.createElement(HeaderTitle,{title:\"Dish Menu\",legth:data.length}),React.createElement(CustomDrawerButton,{title:\"Add\",showDrawer:showDrawer}),React.createElement(Divider,null),React.createElement(All.DishDarawer,{title:\"Add Dish\",visible:drawerVisible,onClose:onClose,onhandleAdd:onhandleAdd}),React.createElement(All.DishTable,{data:data,deleteItem:deleteItem,editItem:editItem}),React.createElement(All.DishModal,{visible:visible,onCancel:onCancel,data:editData,onhandleUpdate:onhandleUpdate}))));};export default DishContent;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Admin/components/DishComponent/components/dishContent.jsx"],"names":["React","Fragment","useEffect","useState","Layout","Divider","HeaderTitle","openNotification","CustomDrawerButton","All","getDishes","addDishes","deleteDishes","updateDishes","Content","DishContent","data","setData","visible","setVisible","editData","setEditData","drawerVisible","setDrawerVisible","fetchDishData","then","res","catch","err","showDrawer","onhandleAdd","items","onClose","window","location","reload","onCancel","onhandleUpdate","item","orginaldata","deleteItem","editItem","newData","margin","background","padding","minHeight","length"],"mappings":"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","sourcesContent":["// React\nimport React, { Fragment, useEffect, useState } from \"react\";\n\n// Third Part\nimport { Layout, Divider } from \"antd\";\n\n// Custom\nimport {\n  HeaderTitle,\n  openNotification,\n  CustomDrawerButton\n} from \"../../../../custom/\";\nimport * as All from \"./\";\n\n// Services\nimport {\n  getDishes,\n  addDishes,\n  deleteDishes,\n  updateDishes\n} from \"../../../../../services/dishServices\";\n\nconst { Content } = Layout;\n\nconst DishContent = () => {\n  // initializing states\n  const [data, setData] = useState([]);\n  const [visible, setVisible] = useState();\n  const [editData, setEditData] = useState({});\n  const [drawerVisible, setDrawerVisible] = useState();\n\n  //   hook cycles\n  const fetchDishData = async () => {\n    await getDishes()\n      .then(res => res.data)\n      .then(res => setData(res))\n      .catch(err =>\n        openNotification(\n          \"error\",\n          \"Cannot get informations\",\n          \"Please check connection\"\n        )\n      );\n  };\n  useEffect(() => {\n    fetchDishData();\n  }, []);\n\n  // custom Drawer\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n  const onhandleAdd = async items => {\n    await addDishes(items);\n  };\n\n  const onClose = () => {\n    setDrawerVisible(false);\n    window.location.reload();\n  };\n\n  //   Modal handle\n  const onCancel = () => {\n    setVisible(false);\n    window.location.reload();\n  };\n\n  //   handle actions in table item\n  const onhandleUpdate = async item => {\n    const orginaldata = { ...item };\n    try {\n      await updateDishes(item);\n    } catch (error) {\n      setEditData(orginaldata);\n    }\n  };\n  const deleteItem = async item => {\n    const orginaldata = data;\n    try {\n      await deleteDishes(item);\n    } catch (error) {\n      setData(orginaldata);\n    }\n  };\n\n  const editItem = async item => {\n    const newData = { ...item };\n    setEditData(newData);\n    setVisible(true);\n  };\n\n  return (\n    <Fragment>\n      <Content style={{ margin: \"2em 16px\" }}>\n        <div\n          className=\"border border-dark rounded\"\n          style={{ background: \"#fff\", padding: 24, minHeight: 280 }}\n        >\n          <HeaderTitle title={\"Dish Menu\"} legth={data.length} />\n          <CustomDrawerButton title=\"Add\" showDrawer={showDrawer} />\n          <Divider />\n          <All.DishDarawer\n            title=\"Add Dish\"\n            visible={drawerVisible}\n            onClose={onClose}\n            onhandleAdd={onhandleAdd}\n          />\n          <All.DishTable\n            data={data}\n            deleteItem={deleteItem}\n            editItem={editItem}\n          />\n          <All.DishModal\n            visible={visible}\n            onCancel={onCancel}\n            data={editData}\n            onhandleUpdate={onhandleUpdate}\n          />\n        </div>\n      </Content>\n    </Fragment>\n  );\n};\n\nexport default DishContent;\n"]},"metadata":{},"sourceType":"module"}