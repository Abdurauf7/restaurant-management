{"ast":null,"code":"import _orderBy from \"lodash/orderBy\";\nimport _keys from \"lodash/keys\";\nimport _assign from \"lodash/assign\";\nimport React from \"react\";\nimport { Helpers, Scale, Wrapper } from \"victory-core\";\nvar fallbackProps = {\n  width: 450,\n  height: 300,\n  padding: 50\n}; // Assumes data in `datasets` is sorted by `Data.getData`.\n\nfunction fillData(props, datasets) {\n  var fillInMissingData = props.fillInMissingData;\n  var xMap = datasets.reduce(function (prev, dataset) {\n    dataset.forEach(function (datum) {\n      prev[datum._x instanceof Date ? datum._x.getTime() : datum._x] = true;\n    });\n    return prev;\n  }, {});\n\n  var xKeys = _keys(xMap).map(function (k) {\n    return +k;\n  });\n\n  var xArr = _orderBy(xKeys);\n\n  return datasets.map(function (dataset) {\n    var indexOffset = 0;\n    var isDate = dataset[0] && dataset[0]._x instanceof Date;\n    var filledInData = xArr.map(function (x, index) {\n      x = +x;\n      var datum = dataset[index - indexOffset];\n\n      if (datum) {\n        var x1 = isDate ? datum._x.getTime() : datum._x;\n\n        if (x1 === x) {\n          return datum;\n        } else {\n          indexOffset++;\n          var y = fillInMissingData ? 0 : null;\n          x = isDate ? new Date(x) : x;\n          return {\n            x: x,\n            y: y,\n            _x: x,\n            _y: y\n          };\n        }\n      } else {\n        var _y = fillInMissingData ? 0 : null;\n\n        x = isDate ? new Date(x) : x;\n        return {\n          x: x,\n          y: _y,\n          _x: x,\n          _y: _y\n        };\n      }\n    });\n    return filledInData;\n  });\n}\n\nfunction getY0(datum, index, datasets) {\n  if (datum.y0) {\n    return datum.y0;\n  }\n\n  var y = datum._y;\n  var previousDatasets = datasets.slice(0, index);\n  var previousPoints = previousDatasets.reduce(function (prev, dataset) {\n    return prev.concat(dataset.filter(function (previousDatum) {\n      return datum._x instanceof Date ? previousDatum._x.getTime() === datum._x.getTime() : previousDatum._x === datum._x;\n    }).map(function (previousDatum) {\n      return previousDatum._y || 0;\n    }));\n  }, []);\n  var y0 = previousPoints.length && previousPoints.reduce(function (memo, value) {\n    var sameSign = y < 0 && value < 0 || y >= 0 && value >= 0;\n    return sameSign ? +value + memo : memo;\n  }, 0);\n  return previousPoints.some(function (point) {\n    return point instanceof Date;\n  }) ? new Date(y0) : y0;\n}\n/* eslint-disable no-nested-ternary */\n\n\nfunction addLayoutData(props, datasets, index) {\n  var xOffset = props.xOffset || 0;\n  return datasets[index].map(function (datum) {\n    var yOffset = getY0(datum, index, datasets) || 0;\n    return _assign({}, datum, {\n      _y0: !(datum._y instanceof Date) ? yOffset : yOffset ? new Date(yOffset) : datum._y,\n      _y1: datum._y === null ? null : datum._y instanceof Date ? new Date(+datum._y + +yOffset) : datum._y + yOffset,\n      _x1: datum._x === null ? null : datum._x instanceof Date ? new Date(+datum._x + +xOffset) : datum._x + xOffset\n    });\n  });\n}\n/* eslint-enable no-nested-ternary */\n\n\nfunction stackData(props, childComponents) {\n  var dataFromChildren = Wrapper.getDataFromChildren(props, childComponents);\n  var datasets = fillData(props, dataFromChildren);\n  return datasets.map(function (d, i) {\n    return addLayoutData(props, datasets, i);\n  });\n}\n\nfunction getCalculatedProps(props, childComponents) {\n  childComponents = childComponents || React.Children.toArray(props.children);\n  var role = \"stack\";\n  props = Helpers.modifyProps(props, fallbackProps, role);\n  var style = Wrapper.getStyle(props.theme, props.style, role);\n  var categories = props.categories || Wrapper.getCategories(props, childComponents);\n  var datasets = props.datasets || stackData(props, childComponents);\n  var children = childComponents.map(function (c, i) {\n    return React.cloneElement(c, {\n      data: datasets[i]\n    });\n  });\n  var domain = props.domain || {\n    x: Wrapper.getDomain(_assign({}, props, {\n      categories: categories\n    }), \"x\", children),\n    y: Wrapper.getDomain(_assign({}, props, {\n      categories: categories\n    }), \"y\", children)\n  };\n  var range = props.range || {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var baseScale = {\n    x: Scale.getScaleFromProps(props, \"x\") || Wrapper.getScale(props, \"x\"),\n    y: Scale.getScaleFromProps(props, \"y\") || Wrapper.getScale(props, \"y\")\n  };\n  var scale = {\n    x: baseScale.x.domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: baseScale.y.domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var _props = props,\n      colorScale = _props.colorScale,\n      horizontal = _props.horizontal;\n  return {\n    datasets: datasets,\n    categories: categories,\n    range: range,\n    domain: domain,\n    horizontal: horizontal,\n    scale: scale,\n    style: style,\n    colorScale: colorScale,\n    role: role\n  };\n}\n\nfunction getLabels(props, datasets, index) {\n  if (!props.labels) {\n    return undefined;\n  }\n\n  return datasets.length === index + 1 ? props.labels : undefined;\n}\n\nfunction getChildProps(props, calculatedProps) {\n  var categories = calculatedProps.categories,\n      domain = calculatedProps.domain,\n      range = calculatedProps.range,\n      scale = calculatedProps.scale,\n      horizontal = calculatedProps.horizontal;\n  return {\n    height: props.height,\n    width: props.width,\n    padding: Helpers.getPadding(props),\n    standalone: false,\n    theme: props.theme,\n    categories: categories,\n    domain: domain,\n    range: range,\n    scale: scale,\n    horizontal: horizontal\n  };\n}\n\nfunction getColorScale(props, child) {\n  var role = child.type && child.type.role;\n  var colorScaleOptions = child.props.colorScale || props.colorScale;\n\n  if (role !== \"group\" && role !== \"stack\") {\n    return undefined;\n  }\n\n  return props.theme ? colorScaleOptions || props.theme.props.colorScale : colorScaleOptions;\n}\n\nfunction getChildren(props, childComponents, calculatedProps) {\n  props = Helpers.modifyProps(props, fallbackProps, \"stack\");\n  childComponents = childComponents || React.Children.toArray(props.children);\n  calculatedProps = calculatedProps || getCalculatedProps(props, childComponents);\n  var _calculatedProps = calculatedProps,\n      datasets = _calculatedProps.datasets;\n  var childProps = getChildProps(props, calculatedProps);\n  var parentName = props.name || \"stack\";\n  return childComponents.map(function (child, index) {\n    var role = child.type && child.type.role;\n    var data = datasets[index];\n    var style = Wrapper.getChildStyle(child, index, calculatedProps);\n    var labels = props.labels ? getLabels(props, datasets, index) : child.props.labels;\n    var name = child.props.name || \"\".concat(parentName, \"-\").concat(role, \"-\").concat(index);\n    return React.cloneElement(child, _assign({\n      key: \"\".concat(name, \"-key-\").concat(index),\n      labels: labels,\n      name: name,\n      domainPadding: child.props.domainPadding || props.domainPadding,\n      theme: props.theme,\n      labelComponent: props.labelComponent || child.props.labelComponent,\n      style: style,\n      colorScale: getColorScale(props, child),\n      data: data,\n      polar: props.polar\n    }, childProps));\n  });\n}\n\nexport { getChildren, getCalculatedProps };","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/node_modules/victory-stack/es/helper-methods.js"],"names":["_orderBy","_keys","_assign","React","Helpers","Scale","Wrapper","fallbackProps","width","height","padding","fillData","props","datasets","fillInMissingData","xMap","reduce","prev","dataset","forEach","datum","_x","Date","getTime","xKeys","map","k","xArr","indexOffset","isDate","filledInData","x","index","x1","y","_y","getY0","y0","previousDatasets","slice","previousPoints","concat","filter","previousDatum","length","memo","value","sameSign","some","point","addLayoutData","xOffset","yOffset","_y0","_y1","_x1","stackData","childComponents","dataFromChildren","getDataFromChildren","d","i","getCalculatedProps","Children","toArray","children","role","modifyProps","style","getStyle","theme","categories","getCategories","c","cloneElement","data","domain","getDomain","range","getRange","baseScale","getScaleFromProps","getScale","scale","horizontal","_props","colorScale","getLabels","labels","undefined","getChildProps","calculatedProps","getPadding","standalone","getColorScale","child","type","colorScaleOptions","getChildren","_calculatedProps","childProps","parentName","name","getChildStyle","key","domainPadding","labelComponent","polar"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,gBAArB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,KAAlB,EAAyBC,OAAzB,QAAwC,cAAxC;AACA,IAAIC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,GADW;AAElBC,EAAAA,MAAM,EAAE,GAFU;AAGlBC,EAAAA,OAAO,EAAE;AAHS,CAApB,C,CAIG;;AAEH,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAAmC;AACjC,MAAIC,iBAAiB,GAAGF,KAAK,CAACE,iBAA9B;AACA,MAAIC,IAAI,GAAGF,QAAQ,CAACG,MAAT,CAAgB,UAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AAClDA,IAAAA,OAAO,CAACC,OAAR,CAAgB,UAAUC,KAAV,EAAiB;AAC/BH,MAAAA,IAAI,CAACG,KAAK,CAACC,EAAN,YAAoBC,IAApB,GAA2BF,KAAK,CAACC,EAAN,CAASE,OAAT,EAA3B,GAAgDH,KAAK,CAACC,EAAvD,CAAJ,GAAiE,IAAjE;AACD,KAFD;AAGA,WAAOJ,IAAP;AACD,GALU,EAKR,EALQ,CAAX;;AAOA,MAAIO,KAAK,GAAGvB,KAAK,CAACc,IAAD,CAAL,CAAYU,GAAZ,CAAgB,UAAUC,CAAV,EAAa;AACvC,WAAO,CAACA,CAAR;AACD,GAFW,CAAZ;;AAIA,MAAIC,IAAI,GAAG3B,QAAQ,CAACwB,KAAD,CAAnB;;AAEA,SAAOX,QAAQ,CAACY,GAAT,CAAa,UAAUP,OAAV,EAAmB;AACrC,QAAIU,WAAW,GAAG,CAAlB;AACA,QAAIC,MAAM,GAAGX,OAAO,CAAC,CAAD,CAAP,IAAcA,OAAO,CAAC,CAAD,CAAP,CAAWG,EAAX,YAAyBC,IAApD;AACA,QAAIQ,YAAY,GAAGH,IAAI,CAACF,GAAL,CAAS,UAAUM,CAAV,EAAaC,KAAb,EAAoB;AAC9CD,MAAAA,CAAC,GAAG,CAACA,CAAL;AACA,UAAIX,KAAK,GAAGF,OAAO,CAACc,KAAK,GAAGJ,WAAT,CAAnB;;AAEA,UAAIR,KAAJ,EAAW;AACT,YAAIa,EAAE,GAAGJ,MAAM,GAAGT,KAAK,CAACC,EAAN,CAASE,OAAT,EAAH,GAAwBH,KAAK,CAACC,EAA7C;;AAEA,YAAIY,EAAE,KAAKF,CAAX,EAAc;AACZ,iBAAOX,KAAP;AACD,SAFD,MAEO;AACLQ,UAAAA,WAAW;AACX,cAAIM,CAAC,GAAGpB,iBAAiB,GAAG,CAAH,GAAO,IAAhC;AACAiB,UAAAA,CAAC,GAAGF,MAAM,GAAG,IAAIP,IAAJ,CAASS,CAAT,CAAH,GAAiBA,CAA3B;AACA,iBAAO;AACLA,YAAAA,CAAC,EAAEA,CADE;AAELG,YAAAA,CAAC,EAAEA,CAFE;AAGLb,YAAAA,EAAE,EAAEU,CAHC;AAILI,YAAAA,EAAE,EAAED;AAJC,WAAP;AAMD;AACF,OAhBD,MAgBO;AACL,YAAIC,EAAE,GAAGrB,iBAAiB,GAAG,CAAH,GAAO,IAAjC;;AAEAiB,QAAAA,CAAC,GAAGF,MAAM,GAAG,IAAIP,IAAJ,CAASS,CAAT,CAAH,GAAiBA,CAA3B;AACA,eAAO;AACLA,UAAAA,CAAC,EAAEA,CADE;AAELG,UAAAA,CAAC,EAAEC,EAFE;AAGLd,UAAAA,EAAE,EAAEU,CAHC;AAILI,UAAAA,EAAE,EAAEA;AAJC,SAAP;AAMD;AACF,KA/BkB,CAAnB;AAgCA,WAAOL,YAAP;AACD,GApCM,CAAP;AAqCD;;AAED,SAASM,KAAT,CAAehB,KAAf,EAAsBY,KAAtB,EAA6BnB,QAA7B,EAAuC;AACrC,MAAIO,KAAK,CAACiB,EAAV,EAAc;AACZ,WAAOjB,KAAK,CAACiB,EAAb;AACD;;AAED,MAAIH,CAAC,GAAGd,KAAK,CAACe,EAAd;AACA,MAAIG,gBAAgB,GAAGzB,QAAQ,CAAC0B,KAAT,CAAe,CAAf,EAAkBP,KAAlB,CAAvB;AACA,MAAIQ,cAAc,GAAGF,gBAAgB,CAACtB,MAAjB,CAAwB,UAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AACpE,WAAOD,IAAI,CAACwB,MAAL,CAAYvB,OAAO,CAACwB,MAAR,CAAe,UAAUC,aAAV,EAAyB;AACzD,aAAOvB,KAAK,CAACC,EAAN,YAAoBC,IAApB,GAA2BqB,aAAa,CAACtB,EAAd,CAAiBE,OAAjB,OAA+BH,KAAK,CAACC,EAAN,CAASE,OAAT,EAA1D,GAA+EoB,aAAa,CAACtB,EAAd,KAAqBD,KAAK,CAACC,EAAjH;AACD,KAFkB,EAEhBI,GAFgB,CAEZ,UAAUkB,aAAV,EAAyB;AAC9B,aAAOA,aAAa,CAACR,EAAd,IAAoB,CAA3B;AACD,KAJkB,CAAZ,CAAP;AAKD,GANoB,EAMlB,EANkB,CAArB;AAOA,MAAIE,EAAE,GAAGG,cAAc,CAACI,MAAf,IAAyBJ,cAAc,CAACxB,MAAf,CAAsB,UAAU6B,IAAV,EAAgBC,KAAhB,EAAuB;AAC7E,QAAIC,QAAQ,GAAGb,CAAC,GAAG,CAAJ,IAASY,KAAK,GAAG,CAAjB,IAAsBZ,CAAC,IAAI,CAAL,IAAUY,KAAK,IAAI,CAAxD;AACA,WAAOC,QAAQ,GAAG,CAACD,KAAD,GAASD,IAAZ,GAAmBA,IAAlC;AACD,GAHiC,EAG/B,CAH+B,CAAlC;AAIA,SAAOL,cAAc,CAACQ,IAAf,CAAoB,UAAUC,KAAV,EAAiB;AAC1C,WAAOA,KAAK,YAAY3B,IAAxB;AACD,GAFM,IAEF,IAAIA,IAAJ,CAASe,EAAT,CAFE,GAEaA,EAFpB;AAGD;AACD;;;AAGA,SAASa,aAAT,CAAuBtC,KAAvB,EAA8BC,QAA9B,EAAwCmB,KAAxC,EAA+C;AAC7C,MAAImB,OAAO,GAAGvC,KAAK,CAACuC,OAAN,IAAiB,CAA/B;AACA,SAAOtC,QAAQ,CAACmB,KAAD,CAAR,CAAgBP,GAAhB,CAAoB,UAAUL,KAAV,EAAiB;AAC1C,QAAIgC,OAAO,GAAGhB,KAAK,CAAChB,KAAD,EAAQY,KAAR,EAAenB,QAAf,CAAL,IAAiC,CAA/C;AACA,WAAOX,OAAO,CAAC,EAAD,EAAKkB,KAAL,EAAY;AACxBiC,MAAAA,GAAG,EAAE,EAAEjC,KAAK,CAACe,EAAN,YAAoBb,IAAtB,IAA8B8B,OAA9B,GAAwCA,OAAO,GAAG,IAAI9B,IAAJ,CAAS8B,OAAT,CAAH,GAAuBhC,KAAK,CAACe,EADzD;AAExBmB,MAAAA,GAAG,EAAElC,KAAK,CAACe,EAAN,KAAa,IAAb,GAAoB,IAApB,GAA2Bf,KAAK,CAACe,EAAN,YAAoBb,IAApB,GAA2B,IAAIA,IAAJ,CAAS,CAACF,KAAK,CAACe,EAAP,GAAY,CAACiB,OAAtB,CAA3B,GAA4DhC,KAAK,CAACe,EAAN,GAAWiB,OAF/E;AAGxBG,MAAAA,GAAG,EAAEnC,KAAK,CAACC,EAAN,KAAa,IAAb,GAAoB,IAApB,GAA2BD,KAAK,CAACC,EAAN,YAAoBC,IAApB,GAA2B,IAAIA,IAAJ,CAAS,CAACF,KAAK,CAACC,EAAP,GAAY,CAAC8B,OAAtB,CAA3B,GAA4D/B,KAAK,CAACC,EAAN,GAAW8B;AAH/E,KAAZ,CAAd;AAKD,GAPM,CAAP;AAQD;AACD;;;AAGA,SAASK,SAAT,CAAmB5C,KAAnB,EAA0B6C,eAA1B,EAA2C;AACzC,MAAIC,gBAAgB,GAAGpD,OAAO,CAACqD,mBAAR,CAA4B/C,KAA5B,EAAmC6C,eAAnC,CAAvB;AACA,MAAI5C,QAAQ,GAAGF,QAAQ,CAACC,KAAD,EAAQ8C,gBAAR,CAAvB;AACA,SAAO7C,QAAQ,CAACY,GAAT,CAAa,UAAUmC,CAAV,EAAaC,CAAb,EAAgB;AAClC,WAAOX,aAAa,CAACtC,KAAD,EAAQC,QAAR,EAAkBgD,CAAlB,CAApB;AACD,GAFM,CAAP;AAGD;;AAED,SAASC,kBAAT,CAA4BlD,KAA5B,EAAmC6C,eAAnC,EAAoD;AAClDA,EAAAA,eAAe,GAAGA,eAAe,IAAItD,KAAK,CAAC4D,QAAN,CAAeC,OAAf,CAAuBpD,KAAK,CAACqD,QAA7B,CAArC;AACA,MAAIC,IAAI,GAAG,OAAX;AACAtD,EAAAA,KAAK,GAAGR,OAAO,CAAC+D,WAAR,CAAoBvD,KAApB,EAA2BL,aAA3B,EAA0C2D,IAA1C,CAAR;AACA,MAAIE,KAAK,GAAG9D,OAAO,CAAC+D,QAAR,CAAiBzD,KAAK,CAAC0D,KAAvB,EAA8B1D,KAAK,CAACwD,KAApC,EAA2CF,IAA3C,CAAZ;AACA,MAAIK,UAAU,GAAG3D,KAAK,CAAC2D,UAAN,IAAoBjE,OAAO,CAACkE,aAAR,CAAsB5D,KAAtB,EAA6B6C,eAA7B,CAArC;AACA,MAAI5C,QAAQ,GAAGD,KAAK,CAACC,QAAN,IAAkB2C,SAAS,CAAC5C,KAAD,EAAQ6C,eAAR,CAA1C;AACA,MAAIQ,QAAQ,GAAGR,eAAe,CAAChC,GAAhB,CAAoB,UAAUgD,CAAV,EAAaZ,CAAb,EAAgB;AACjD,WAAO1D,KAAK,CAACuE,YAAN,CAAmBD,CAAnB,EAAsB;AAC3BE,MAAAA,IAAI,EAAE9D,QAAQ,CAACgD,CAAD;AADa,KAAtB,CAAP;AAGD,GAJc,CAAf;AAKA,MAAIe,MAAM,GAAGhE,KAAK,CAACgE,MAAN,IAAgB;AAC3B7C,IAAAA,CAAC,EAAEzB,OAAO,CAACuE,SAAR,CAAkB3E,OAAO,CAAC,EAAD,EAAKU,KAAL,EAAY;AACtC2D,MAAAA,UAAU,EAAEA;AAD0B,KAAZ,CAAzB,EAEC,GAFD,EAEMN,QAFN,CADwB;AAI3B/B,IAAAA,CAAC,EAAE5B,OAAO,CAACuE,SAAR,CAAkB3E,OAAO,CAAC,EAAD,EAAKU,KAAL,EAAY;AACtC2D,MAAAA,UAAU,EAAEA;AAD0B,KAAZ,CAAzB,EAEC,GAFD,EAEMN,QAFN;AAJwB,GAA7B;AAQA,MAAIa,KAAK,GAAGlE,KAAK,CAACkE,KAAN,IAAe;AACzB/C,IAAAA,CAAC,EAAE3B,OAAO,CAAC2E,QAAR,CAAiBnE,KAAjB,EAAwB,GAAxB,CADsB;AAEzBsB,IAAAA,CAAC,EAAE9B,OAAO,CAAC2E,QAAR,CAAiBnE,KAAjB,EAAwB,GAAxB;AAFsB,GAA3B;AAIA,MAAIoE,SAAS,GAAG;AACdjD,IAAAA,CAAC,EAAE1B,KAAK,CAAC4E,iBAAN,CAAwBrE,KAAxB,EAA+B,GAA/B,KAAuCN,OAAO,CAAC4E,QAAR,CAAiBtE,KAAjB,EAAwB,GAAxB,CAD5B;AAEdsB,IAAAA,CAAC,EAAE7B,KAAK,CAAC4E,iBAAN,CAAwBrE,KAAxB,EAA+B,GAA/B,KAAuCN,OAAO,CAAC4E,QAAR,CAAiBtE,KAAjB,EAAwB,GAAxB;AAF5B,GAAhB;AAIA,MAAIuE,KAAK,GAAG;AACVpD,IAAAA,CAAC,EAAEiD,SAAS,CAACjD,CAAV,CAAY6C,MAAZ,CAAmBA,MAAM,CAAC7C,CAA1B,EAA6B+C,KAA7B,CAAmClE,KAAK,CAACwE,UAAN,GAAmBN,KAAK,CAAC5C,CAAzB,GAA6B4C,KAAK,CAAC/C,CAAtE,CADO;AAEVG,IAAAA,CAAC,EAAE8C,SAAS,CAAC9C,CAAV,CAAY0C,MAAZ,CAAmBA,MAAM,CAAC1C,CAA1B,EAA6B4C,KAA7B,CAAmClE,KAAK,CAACwE,UAAN,GAAmBN,KAAK,CAAC/C,CAAzB,GAA6B+C,KAAK,CAAC5C,CAAtE;AAFO,GAAZ;AAIA,MAAImD,MAAM,GAAGzE,KAAb;AAAA,MACI0E,UAAU,GAAGD,MAAM,CAACC,UADxB;AAAA,MAEIF,UAAU,GAAGC,MAAM,CAACD,UAFxB;AAGA,SAAO;AACLvE,IAAAA,QAAQ,EAAEA,QADL;AAEL0D,IAAAA,UAAU,EAAEA,UAFP;AAGLO,IAAAA,KAAK,EAAEA,KAHF;AAILF,IAAAA,MAAM,EAAEA,MAJH;AAKLQ,IAAAA,UAAU,EAAEA,UALP;AAMLD,IAAAA,KAAK,EAAEA,KANF;AAOLf,IAAAA,KAAK,EAAEA,KAPF;AAQLkB,IAAAA,UAAU,EAAEA,UARP;AASLpB,IAAAA,IAAI,EAAEA;AATD,GAAP;AAWD;;AAED,SAASqB,SAAT,CAAmB3E,KAAnB,EAA0BC,QAA1B,EAAoCmB,KAApC,EAA2C;AACzC,MAAI,CAACpB,KAAK,CAAC4E,MAAX,EAAmB;AACjB,WAAOC,SAAP;AACD;;AAED,SAAO5E,QAAQ,CAAC+B,MAAT,KAAoBZ,KAAK,GAAG,CAA5B,GAAgCpB,KAAK,CAAC4E,MAAtC,GAA+CC,SAAtD;AACD;;AAED,SAASC,aAAT,CAAuB9E,KAAvB,EAA8B+E,eAA9B,EAA+C;AAC7C,MAAIpB,UAAU,GAAGoB,eAAe,CAACpB,UAAjC;AAAA,MACIK,MAAM,GAAGe,eAAe,CAACf,MAD7B;AAAA,MAEIE,KAAK,GAAGa,eAAe,CAACb,KAF5B;AAAA,MAGIK,KAAK,GAAGQ,eAAe,CAACR,KAH5B;AAAA,MAIIC,UAAU,GAAGO,eAAe,CAACP,UAJjC;AAKA,SAAO;AACL3E,IAAAA,MAAM,EAAEG,KAAK,CAACH,MADT;AAELD,IAAAA,KAAK,EAAEI,KAAK,CAACJ,KAFR;AAGLE,IAAAA,OAAO,EAAEN,OAAO,CAACwF,UAAR,CAAmBhF,KAAnB,CAHJ;AAILiF,IAAAA,UAAU,EAAE,KAJP;AAKLvB,IAAAA,KAAK,EAAE1D,KAAK,CAAC0D,KALR;AAMLC,IAAAA,UAAU,EAAEA,UANP;AAOLK,IAAAA,MAAM,EAAEA,MAPH;AAQLE,IAAAA,KAAK,EAAEA,KARF;AASLK,IAAAA,KAAK,EAAEA,KATF;AAULC,IAAAA,UAAU,EAAEA;AAVP,GAAP;AAYD;;AAED,SAASU,aAAT,CAAuBlF,KAAvB,EAA8BmF,KAA9B,EAAqC;AACnC,MAAI7B,IAAI,GAAG6B,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAW9B,IAApC;AACA,MAAI+B,iBAAiB,GAAGF,KAAK,CAACnF,KAAN,CAAY0E,UAAZ,IAA0B1E,KAAK,CAAC0E,UAAxD;;AAEA,MAAIpB,IAAI,KAAK,OAAT,IAAoBA,IAAI,KAAK,OAAjC,EAA0C;AACxC,WAAOuB,SAAP;AACD;;AAED,SAAO7E,KAAK,CAAC0D,KAAN,GAAc2B,iBAAiB,IAAIrF,KAAK,CAAC0D,KAAN,CAAY1D,KAAZ,CAAkB0E,UAArD,GAAkEW,iBAAzE;AACD;;AAED,SAASC,WAAT,CAAqBtF,KAArB,EAA4B6C,eAA5B,EAA6CkC,eAA7C,EAA8D;AAC5D/E,EAAAA,KAAK,GAAGR,OAAO,CAAC+D,WAAR,CAAoBvD,KAApB,EAA2BL,aAA3B,EAA0C,OAA1C,CAAR;AACAkD,EAAAA,eAAe,GAAGA,eAAe,IAAItD,KAAK,CAAC4D,QAAN,CAAeC,OAAf,CAAuBpD,KAAK,CAACqD,QAA7B,CAArC;AACA0B,EAAAA,eAAe,GAAGA,eAAe,IAAI7B,kBAAkB,CAAClD,KAAD,EAAQ6C,eAAR,CAAvD;AACA,MAAI0C,gBAAgB,GAAGR,eAAvB;AAAA,MACI9E,QAAQ,GAAGsF,gBAAgB,CAACtF,QADhC;AAEA,MAAIuF,UAAU,GAAGV,aAAa,CAAC9E,KAAD,EAAQ+E,eAAR,CAA9B;AACA,MAAIU,UAAU,GAAGzF,KAAK,CAAC0F,IAAN,IAAc,OAA/B;AACA,SAAO7C,eAAe,CAAChC,GAAhB,CAAoB,UAAUsE,KAAV,EAAiB/D,KAAjB,EAAwB;AACjD,QAAIkC,IAAI,GAAG6B,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAW9B,IAApC;AACA,QAAIS,IAAI,GAAG9D,QAAQ,CAACmB,KAAD,CAAnB;AACA,QAAIoC,KAAK,GAAG9D,OAAO,CAACiG,aAAR,CAAsBR,KAAtB,EAA6B/D,KAA7B,EAAoC2D,eAApC,CAAZ;AACA,QAAIH,MAAM,GAAG5E,KAAK,CAAC4E,MAAN,GAAeD,SAAS,CAAC3E,KAAD,EAAQC,QAAR,EAAkBmB,KAAlB,CAAxB,GAAmD+D,KAAK,CAACnF,KAAN,CAAY4E,MAA5E;AACA,QAAIc,IAAI,GAAGP,KAAK,CAACnF,KAAN,CAAY0F,IAAZ,IAAoB,GAAG7D,MAAH,CAAU4D,UAAV,EAAsB,GAAtB,EAA2B5D,MAA3B,CAAkCyB,IAAlC,EAAwC,GAAxC,EAA6CzB,MAA7C,CAAoDT,KAApD,CAA/B;AACA,WAAO7B,KAAK,CAACuE,YAAN,CAAmBqB,KAAnB,EAA0B7F,OAAO,CAAC;AACvCsG,MAAAA,GAAG,EAAE,GAAG/D,MAAH,CAAU6D,IAAV,EAAgB,OAAhB,EAAyB7D,MAAzB,CAAgCT,KAAhC,CADkC;AAEvCwD,MAAAA,MAAM,EAAEA,MAF+B;AAGvCc,MAAAA,IAAI,EAAEA,IAHiC;AAIvCG,MAAAA,aAAa,EAAEV,KAAK,CAACnF,KAAN,CAAY6F,aAAZ,IAA6B7F,KAAK,CAAC6F,aAJX;AAKvCnC,MAAAA,KAAK,EAAE1D,KAAK,CAAC0D,KAL0B;AAMvCoC,MAAAA,cAAc,EAAE9F,KAAK,CAAC8F,cAAN,IAAwBX,KAAK,CAACnF,KAAN,CAAY8F,cANb;AAOvCtC,MAAAA,KAAK,EAAEA,KAPgC;AAQvCkB,MAAAA,UAAU,EAAEQ,aAAa,CAAClF,KAAD,EAAQmF,KAAR,CARc;AASvCpB,MAAAA,IAAI,EAAEA,IATiC;AAUvCgC,MAAAA,KAAK,EAAE/F,KAAK,CAAC+F;AAV0B,KAAD,EAWrCP,UAXqC,CAAjC,CAAP;AAYD,GAlBM,CAAP;AAmBD;;AAED,SAASF,WAAT,EAAsBpC,kBAAtB","sourcesContent":["import _orderBy from \"lodash/orderBy\";\nimport _keys from \"lodash/keys\";\nimport _assign from \"lodash/assign\";\nimport React from \"react\";\nimport { Helpers, Scale, Wrapper } from \"victory-core\";\nvar fallbackProps = {\n  width: 450,\n  height: 300,\n  padding: 50\n}; // Assumes data in `datasets` is sorted by `Data.getData`.\n\nfunction fillData(props, datasets) {\n  var fillInMissingData = props.fillInMissingData;\n  var xMap = datasets.reduce(function (prev, dataset) {\n    dataset.forEach(function (datum) {\n      prev[datum._x instanceof Date ? datum._x.getTime() : datum._x] = true;\n    });\n    return prev;\n  }, {});\n\n  var xKeys = _keys(xMap).map(function (k) {\n    return +k;\n  });\n\n  var xArr = _orderBy(xKeys);\n\n  return datasets.map(function (dataset) {\n    var indexOffset = 0;\n    var isDate = dataset[0] && dataset[0]._x instanceof Date;\n    var filledInData = xArr.map(function (x, index) {\n      x = +x;\n      var datum = dataset[index - indexOffset];\n\n      if (datum) {\n        var x1 = isDate ? datum._x.getTime() : datum._x;\n\n        if (x1 === x) {\n          return datum;\n        } else {\n          indexOffset++;\n          var y = fillInMissingData ? 0 : null;\n          x = isDate ? new Date(x) : x;\n          return {\n            x: x,\n            y: y,\n            _x: x,\n            _y: y\n          };\n        }\n      } else {\n        var _y = fillInMissingData ? 0 : null;\n\n        x = isDate ? new Date(x) : x;\n        return {\n          x: x,\n          y: _y,\n          _x: x,\n          _y: _y\n        };\n      }\n    });\n    return filledInData;\n  });\n}\n\nfunction getY0(datum, index, datasets) {\n  if (datum.y0) {\n    return datum.y0;\n  }\n\n  var y = datum._y;\n  var previousDatasets = datasets.slice(0, index);\n  var previousPoints = previousDatasets.reduce(function (prev, dataset) {\n    return prev.concat(dataset.filter(function (previousDatum) {\n      return datum._x instanceof Date ? previousDatum._x.getTime() === datum._x.getTime() : previousDatum._x === datum._x;\n    }).map(function (previousDatum) {\n      return previousDatum._y || 0;\n    }));\n  }, []);\n  var y0 = previousPoints.length && previousPoints.reduce(function (memo, value) {\n    var sameSign = y < 0 && value < 0 || y >= 0 && value >= 0;\n    return sameSign ? +value + memo : memo;\n  }, 0);\n  return previousPoints.some(function (point) {\n    return point instanceof Date;\n  }) ? new Date(y0) : y0;\n}\n/* eslint-disable no-nested-ternary */\n\n\nfunction addLayoutData(props, datasets, index) {\n  var xOffset = props.xOffset || 0;\n  return datasets[index].map(function (datum) {\n    var yOffset = getY0(datum, index, datasets) || 0;\n    return _assign({}, datum, {\n      _y0: !(datum._y instanceof Date) ? yOffset : yOffset ? new Date(yOffset) : datum._y,\n      _y1: datum._y === null ? null : datum._y instanceof Date ? new Date(+datum._y + +yOffset) : datum._y + yOffset,\n      _x1: datum._x === null ? null : datum._x instanceof Date ? new Date(+datum._x + +xOffset) : datum._x + xOffset\n    });\n  });\n}\n/* eslint-enable no-nested-ternary */\n\n\nfunction stackData(props, childComponents) {\n  var dataFromChildren = Wrapper.getDataFromChildren(props, childComponents);\n  var datasets = fillData(props, dataFromChildren);\n  return datasets.map(function (d, i) {\n    return addLayoutData(props, datasets, i);\n  });\n}\n\nfunction getCalculatedProps(props, childComponents) {\n  childComponents = childComponents || React.Children.toArray(props.children);\n  var role = \"stack\";\n  props = Helpers.modifyProps(props, fallbackProps, role);\n  var style = Wrapper.getStyle(props.theme, props.style, role);\n  var categories = props.categories || Wrapper.getCategories(props, childComponents);\n  var datasets = props.datasets || stackData(props, childComponents);\n  var children = childComponents.map(function (c, i) {\n    return React.cloneElement(c, {\n      data: datasets[i]\n    });\n  });\n  var domain = props.domain || {\n    x: Wrapper.getDomain(_assign({}, props, {\n      categories: categories\n    }), \"x\", children),\n    y: Wrapper.getDomain(_assign({}, props, {\n      categories: categories\n    }), \"y\", children)\n  };\n  var range = props.range || {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var baseScale = {\n    x: Scale.getScaleFromProps(props, \"x\") || Wrapper.getScale(props, \"x\"),\n    y: Scale.getScaleFromProps(props, \"y\") || Wrapper.getScale(props, \"y\")\n  };\n  var scale = {\n    x: baseScale.x.domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: baseScale.y.domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var _props = props,\n      colorScale = _props.colorScale,\n      horizontal = _props.horizontal;\n  return {\n    datasets: datasets,\n    categories: categories,\n    range: range,\n    domain: domain,\n    horizontal: horizontal,\n    scale: scale,\n    style: style,\n    colorScale: colorScale,\n    role: role\n  };\n}\n\nfunction getLabels(props, datasets, index) {\n  if (!props.labels) {\n    return undefined;\n  }\n\n  return datasets.length === index + 1 ? props.labels : undefined;\n}\n\nfunction getChildProps(props, calculatedProps) {\n  var categories = calculatedProps.categories,\n      domain = calculatedProps.domain,\n      range = calculatedProps.range,\n      scale = calculatedProps.scale,\n      horizontal = calculatedProps.horizontal;\n  return {\n    height: props.height,\n    width: props.width,\n    padding: Helpers.getPadding(props),\n    standalone: false,\n    theme: props.theme,\n    categories: categories,\n    domain: domain,\n    range: range,\n    scale: scale,\n    horizontal: horizontal\n  };\n}\n\nfunction getColorScale(props, child) {\n  var role = child.type && child.type.role;\n  var colorScaleOptions = child.props.colorScale || props.colorScale;\n\n  if (role !== \"group\" && role !== \"stack\") {\n    return undefined;\n  }\n\n  return props.theme ? colorScaleOptions || props.theme.props.colorScale : colorScaleOptions;\n}\n\nfunction getChildren(props, childComponents, calculatedProps) {\n  props = Helpers.modifyProps(props, fallbackProps, \"stack\");\n  childComponents = childComponents || React.Children.toArray(props.children);\n  calculatedProps = calculatedProps || getCalculatedProps(props, childComponents);\n  var _calculatedProps = calculatedProps,\n      datasets = _calculatedProps.datasets;\n  var childProps = getChildProps(props, calculatedProps);\n  var parentName = props.name || \"stack\";\n  return childComponents.map(function (child, index) {\n    var role = child.type && child.type.role;\n    var data = datasets[index];\n    var style = Wrapper.getChildStyle(child, index, calculatedProps);\n    var labels = props.labels ? getLabels(props, datasets, index) : child.props.labels;\n    var name = child.props.name || \"\".concat(parentName, \"-\").concat(role, \"-\").concat(index);\n    return React.cloneElement(child, _assign({\n      key: \"\".concat(name, \"-key-\").concat(index),\n      labels: labels,\n      name: name,\n      domainPadding: child.props.domainPadding || props.domainPadding,\n      theme: props.theme,\n      labelComponent: props.labelComponent || child.props.labelComponent,\n      style: style,\n      colorScale: getColorScale(props, child),\n      data: data,\n      polar: props.polar\n    }, childProps));\n  });\n}\n\nexport { getChildren, getCalculatedProps };"]},"metadata":{},"sourceType":"module"}