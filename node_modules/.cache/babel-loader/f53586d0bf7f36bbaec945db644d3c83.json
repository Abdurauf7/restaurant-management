{"ast":null,"code":"import _isNil from \"lodash/isNil\";\nimport _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport * as d3Shape from \"d3-shape\";\nimport { Helpers, Data, Style } from \"victory-core\";\n\nvar checkForValidText = function checkForValidText(text) {\n  if (text === undefined || text === null || _isFunction(text)) {\n    return text;\n  } else {\n    return \"\".concat(text);\n  }\n};\n\nvar getColor = function getColor(style, colors, index) {\n  if (style && style.data && style.data.fill) {\n    return style.data.fill;\n  }\n\n  return colors && colors[index % colors.length];\n};\n\nvar getRadius = function getRadius(props, padding) {\n  if (typeof props.radius === \"number\") {\n    return props.radius;\n  }\n\n  return Math.min(props.width - padding.left - padding.right, props.height - padding.top - padding.bottom) / 2;\n};\n\nvar getOrigin = function getOrigin(props, padding) {\n  var width = props.width,\n      height = props.height;\n  var origin = _isPlainObject(props.origin) ? props.origin : {};\n  return {\n    x: origin.x !== undefined ? origin.x : (padding.left - padding.right + width) / 2,\n    y: origin.y !== undefined ? origin.y : (padding.top - padding.bottom + height) / 2\n  };\n};\n\nvar getSlices = function getSlices(props, data) {\n  var padAngle = _isFunction(props.padAngle) ? 0 : props.padAngle;\n  var layoutFunction = d3Shape.pie().sort(null).startAngle(Helpers.degreesToRadians(props.startAngle)).endAngle(Helpers.degreesToRadians(props.endAngle)).padAngle(Helpers.degreesToRadians(padAngle)).value(function (datum) {\n    return datum._y;\n  });\n  return layoutFunction(data);\n};\n\nvar getCalculatedValues = function getCalculatedValues(props) {\n  var theme = props.theme,\n      colorScale = props.colorScale;\n  var styleObject = theme && theme.pie && theme.pie.style ? theme.pie.style : {};\n  var style = Helpers.getStyles(props.style, styleObject, \"auto\", \"100%\");\n  var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n  var padding = Helpers.getPadding(props);\n  var defaultRadius = getRadius(props, padding);\n  var origin = getOrigin(props, padding);\n  var data = Data.getData(props);\n  var slices = getSlices(props, data);\n  return _assign({}, props, {\n    style: style,\n    colors: colors,\n    padding: padding,\n    defaultRadius: defaultRadius,\n    data: data,\n    slices: slices,\n    origin: origin\n  });\n};\n\nvar getSliceStyle = function getSliceStyle(index, calculatedValues) {\n  var style = calculatedValues.style,\n      colors = calculatedValues.colors;\n  var fill = getColor(style, colors, index);\n  return _assign({\n    fill: fill\n  }, style.data);\n};\n\nvar getLabelText = function getLabelText(props, datum, index) {\n  var text;\n\n  if (datum.label) {\n    text = datum.label;\n  } else if (Array.isArray(props.labels)) {\n    text = props.labels[index];\n  } else {\n    text = _isFunction(props.labels) ? props.labels : datum.xName || datum._x;\n  }\n\n  return checkForValidText(text);\n};\n\nvar getLabelArc = function getLabelArc(radius, labelRadius, style) {\n  var padding = style && style.padding || 0;\n  var arcRadius = labelRadius || radius + padding;\n  return d3Shape.arc().outerRadius(arcRadius).innerRadius(arcRadius);\n};\n\nvar getLabelPosition = function getLabelPosition(arc, slice, position) {\n  var construct = {\n    startAngle: position === \"startAngle\" ? slice.endAngle : slice.startAngle,\n    endAngle: position === \"endAngle\" ? slice.startAngle : slice.endAngle\n  };\n\n  var clonedArc = _assign({}, slice, construct);\n\n  return arc.centroid(clonedArc);\n};\n\nvar getLabelOrientation = function getLabelOrientation(slice) {\n  var radiansToDegrees = function radiansToDegrees(radians) {\n    return radians * (180 / Math.PI);\n  };\n\n  var start = radiansToDegrees(slice.startAngle);\n  var end = radiansToDegrees(slice.endAngle);\n  var degree = start + (end - start) / 2;\n\n  if (degree < 45 || degree > 315) {\n    return \"top\";\n  } else if (degree >= 45 && degree < 135) {\n    return \"right\";\n  } else if (degree >= 135 && degree < 225) {\n    return \"bottom\";\n  } else {\n    return \"left\";\n  }\n};\n\nvar getTextAnchor = function getTextAnchor(orientation) {\n  if (orientation === \"top\" || orientation === \"bottom\") {\n    return \"middle\";\n  }\n\n  return orientation === \"right\" ? \"start\" : \"end\";\n};\n\nvar getVerticalAnchor = function getVerticalAnchor(orientation) {\n  if (orientation === \"left\" || orientation === \"right\") {\n    return \"middle\";\n  }\n\n  return orientation === \"bottom\" ? \"start\" : \"end\";\n};\n\nvar getLabelProps = function getLabelProps(text, dataProps, calculatedValues) {\n  var index = dataProps.index,\n      datum = dataProps.datum,\n      data = dataProps.data,\n      slice = dataProps.slice;\n  var style = calculatedValues.style,\n      defaultRadius = calculatedValues.defaultRadius,\n      origin = calculatedValues.origin,\n      width = calculatedValues.width,\n      height = calculatedValues.height;\n  var labelRadius = Helpers.evaluateProp(calculatedValues.labelRadius, _assign({\n    text: text\n  }, dataProps));\n  var labelPosition = Helpers.evaluateProp(calculatedValues.labelPosition, _assign({\n    text: text\n  }, dataProps));\n\n  var labelStyle = _assign({\n    padding: 0\n  }, style.labels);\n\n  var evaluatedStyle = Helpers.evaluateStyle(labelStyle, _assign({\n    labelRadius: labelRadius,\n    text: text\n  }, dataProps));\n  var labelArc = getLabelArc(defaultRadius, labelRadius, evaluatedStyle);\n  var position = getLabelPosition(labelArc, slice, labelPosition);\n  var orientation = getLabelOrientation(slice);\n  return {\n    width: width,\n    height: height,\n    index: index,\n    datum: datum,\n    data: data,\n    slice: slice,\n    orientation: orientation,\n    text: text,\n    style: labelStyle,\n    x: Math.round(position[0]) + origin.x,\n    y: Math.round(position[1]) + origin.y,\n    textAnchor: labelStyle.textAnchor || getTextAnchor(orientation),\n    verticalAnchor: labelStyle.verticalAnchor || getVerticalAnchor(orientation),\n    angle: labelStyle.angle\n  };\n};\n\nexport var getBaseProps = function getBaseProps(props, fallbackProps) {\n  props = Helpers.modifyProps(props, fallbackProps, \"pie\");\n  var calculatedValues = getCalculatedValues(props);\n  var slices = calculatedValues.slices,\n      style = calculatedValues.style,\n      data = calculatedValues.data,\n      origin = calculatedValues.origin,\n      defaultRadius = calculatedValues.defaultRadius,\n      labels = calculatedValues.labels,\n      events = calculatedValues.events,\n      sharedEvents = calculatedValues.sharedEvents,\n      height = calculatedValues.height,\n      width = calculatedValues.width,\n      standalone = calculatedValues.standalone,\n      name = calculatedValues.name,\n      innerRadius = calculatedValues.innerRadius,\n      cornerRadius = calculatedValues.cornerRadius,\n      padAngle = calculatedValues.padAngle;\n  var radius = props.radius || defaultRadius;\n  var initialChildProps = {\n    parent: {\n      standalone: standalone,\n      height: height,\n      width: width,\n      slices: slices,\n      name: name,\n      style: style.parent\n    }\n  };\n  return slices.reduce(function (childProps, slice, index) {\n    var datum = _defaults({}, data[index], {\n      startAngle: Helpers.radiansToDegrees(slice.startAngle),\n      endAngle: Helpers.radiansToDegrees(slice.endAngle),\n      padAngle: Helpers.radiansToDegrees(slice.padAngle)\n    });\n\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var dataProps = {\n      index: index,\n      slice: slice,\n      datum: datum,\n      data: data,\n      origin: origin,\n      innerRadius: innerRadius,\n      radius: radius,\n      cornerRadius: cornerRadius,\n      padAngle: padAngle,\n      style: getSliceStyle(index, calculatedValues)\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = getLabelText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      var evaluatedText = Helpers.evaluateProp(text, dataProps);\n      childProps[eventKey].labels = getLabelProps(evaluatedText, dataProps, calculatedValues);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/node_modules/victory-pie/es/helper-methods.js"],"names":["_isNil","_isPlainObject","_isFunction","_defaults","_assign","d3Shape","Helpers","Data","Style","checkForValidText","text","undefined","concat","getColor","style","colors","index","data","fill","length","getRadius","props","padding","radius","Math","min","width","left","right","height","top","bottom","getOrigin","origin","x","y","getSlices","padAngle","layoutFunction","pie","sort","startAngle","degreesToRadians","endAngle","value","datum","_y","getCalculatedValues","theme","colorScale","styleObject","getStyles","Array","isArray","getColorScale","getPadding","defaultRadius","getData","slices","getSliceStyle","calculatedValues","getLabelText","label","labels","xName","_x","getLabelArc","labelRadius","arcRadius","arc","outerRadius","innerRadius","getLabelPosition","slice","position","construct","clonedArc","centroid","getLabelOrientation","radiansToDegrees","radians","PI","start","end","degree","getTextAnchor","orientation","getVerticalAnchor","getLabelProps","dataProps","evaluateProp","labelPosition","labelStyle","evaluatedStyle","evaluateStyle","labelArc","round","textAnchor","verticalAnchor","angle","getBaseProps","fallbackProps","modifyProps","events","sharedEvents","standalone","name","cornerRadius","initialChildProps","parent","reduce","childProps","eventKey","evaluatedText"],"mappings":"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","sourcesContent":["import _isNil from \"lodash/isNil\";\nimport _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport * as d3Shape from \"d3-shape\";\nimport { Helpers, Data, Style } from \"victory-core\";\n\nvar checkForValidText = function (text) {\n  if (text === undefined || text === null || _isFunction(text)) {\n    return text;\n  } else {\n    return \"\".concat(text);\n  }\n};\n\nvar getColor = function (style, colors, index) {\n  if (style && style.data && style.data.fill) {\n    return style.data.fill;\n  }\n\n  return colors && colors[index % colors.length];\n};\n\nvar getRadius = function (props, padding) {\n  if (typeof props.radius === \"number\") {\n    return props.radius;\n  }\n\n  return Math.min(props.width - padding.left - padding.right, props.height - padding.top - padding.bottom) / 2;\n};\n\nvar getOrigin = function (props, padding) {\n  var width = props.width,\n      height = props.height;\n  var origin = _isPlainObject(props.origin) ? props.origin : {};\n  return {\n    x: origin.x !== undefined ? origin.x : (padding.left - padding.right + width) / 2,\n    y: origin.y !== undefined ? origin.y : (padding.top - padding.bottom + height) / 2\n  };\n};\n\nvar getSlices = function (props, data) {\n  var padAngle = _isFunction(props.padAngle) ? 0 : props.padAngle;\n  var layoutFunction = d3Shape.pie().sort(null).startAngle(Helpers.degreesToRadians(props.startAngle)).endAngle(Helpers.degreesToRadians(props.endAngle)).padAngle(Helpers.degreesToRadians(padAngle)).value(function (datum) {\n    return datum._y;\n  });\n  return layoutFunction(data);\n};\n\nvar getCalculatedValues = function (props) {\n  var theme = props.theme,\n      colorScale = props.colorScale;\n  var styleObject = theme && theme.pie && theme.pie.style ? theme.pie.style : {};\n  var style = Helpers.getStyles(props.style, styleObject, \"auto\", \"100%\");\n  var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n  var padding = Helpers.getPadding(props);\n  var defaultRadius = getRadius(props, padding);\n  var origin = getOrigin(props, padding);\n  var data = Data.getData(props);\n  var slices = getSlices(props, data);\n  return _assign({}, props, {\n    style: style,\n    colors: colors,\n    padding: padding,\n    defaultRadius: defaultRadius,\n    data: data,\n    slices: slices,\n    origin: origin\n  });\n};\n\nvar getSliceStyle = function (index, calculatedValues) {\n  var style = calculatedValues.style,\n      colors = calculatedValues.colors;\n  var fill = getColor(style, colors, index);\n  return _assign({\n    fill: fill\n  }, style.data);\n};\n\nvar getLabelText = function (props, datum, index) {\n  var text;\n\n  if (datum.label) {\n    text = datum.label;\n  } else if (Array.isArray(props.labels)) {\n    text = props.labels[index];\n  } else {\n    text = _isFunction(props.labels) ? props.labels : datum.xName || datum._x;\n  }\n\n  return checkForValidText(text);\n};\n\nvar getLabelArc = function (radius, labelRadius, style) {\n  var padding = style && style.padding || 0;\n  var arcRadius = labelRadius || radius + padding;\n  return d3Shape.arc().outerRadius(arcRadius).innerRadius(arcRadius);\n};\n\nvar getLabelPosition = function (arc, slice, position) {\n  var construct = {\n    startAngle: position === \"startAngle\" ? slice.endAngle : slice.startAngle,\n    endAngle: position === \"endAngle\" ? slice.startAngle : slice.endAngle\n  };\n\n  var clonedArc = _assign({}, slice, construct);\n\n  return arc.centroid(clonedArc);\n};\n\nvar getLabelOrientation = function (slice) {\n  var radiansToDegrees = function (radians) {\n    return radians * (180 / Math.PI);\n  };\n\n  var start = radiansToDegrees(slice.startAngle);\n  var end = radiansToDegrees(slice.endAngle);\n  var degree = start + (end - start) / 2;\n\n  if (degree < 45 || degree > 315) {\n    return \"top\";\n  } else if (degree >= 45 && degree < 135) {\n    return \"right\";\n  } else if (degree >= 135 && degree < 225) {\n    return \"bottom\";\n  } else {\n    return \"left\";\n  }\n};\n\nvar getTextAnchor = function (orientation) {\n  if (orientation === \"top\" || orientation === \"bottom\") {\n    return \"middle\";\n  }\n\n  return orientation === \"right\" ? \"start\" : \"end\";\n};\n\nvar getVerticalAnchor = function (orientation) {\n  if (orientation === \"left\" || orientation === \"right\") {\n    return \"middle\";\n  }\n\n  return orientation === \"bottom\" ? \"start\" : \"end\";\n};\n\nvar getLabelProps = function (text, dataProps, calculatedValues) {\n  var index = dataProps.index,\n      datum = dataProps.datum,\n      data = dataProps.data,\n      slice = dataProps.slice;\n  var style = calculatedValues.style,\n      defaultRadius = calculatedValues.defaultRadius,\n      origin = calculatedValues.origin,\n      width = calculatedValues.width,\n      height = calculatedValues.height;\n  var labelRadius = Helpers.evaluateProp(calculatedValues.labelRadius, _assign({\n    text: text\n  }, dataProps));\n  var labelPosition = Helpers.evaluateProp(calculatedValues.labelPosition, _assign({\n    text: text\n  }, dataProps));\n\n  var labelStyle = _assign({\n    padding: 0\n  }, style.labels);\n\n  var evaluatedStyle = Helpers.evaluateStyle(labelStyle, _assign({\n    labelRadius: labelRadius,\n    text: text\n  }, dataProps));\n  var labelArc = getLabelArc(defaultRadius, labelRadius, evaluatedStyle);\n  var position = getLabelPosition(labelArc, slice, labelPosition);\n  var orientation = getLabelOrientation(slice);\n  return {\n    width: width,\n    height: height,\n    index: index,\n    datum: datum,\n    data: data,\n    slice: slice,\n    orientation: orientation,\n    text: text,\n    style: labelStyle,\n    x: Math.round(position[0]) + origin.x,\n    y: Math.round(position[1]) + origin.y,\n    textAnchor: labelStyle.textAnchor || getTextAnchor(orientation),\n    verticalAnchor: labelStyle.verticalAnchor || getVerticalAnchor(orientation),\n    angle: labelStyle.angle\n  };\n};\n\nexport var getBaseProps = function (props, fallbackProps) {\n  props = Helpers.modifyProps(props, fallbackProps, \"pie\");\n  var calculatedValues = getCalculatedValues(props);\n  var slices = calculatedValues.slices,\n      style = calculatedValues.style,\n      data = calculatedValues.data,\n      origin = calculatedValues.origin,\n      defaultRadius = calculatedValues.defaultRadius,\n      labels = calculatedValues.labels,\n      events = calculatedValues.events,\n      sharedEvents = calculatedValues.sharedEvents,\n      height = calculatedValues.height,\n      width = calculatedValues.width,\n      standalone = calculatedValues.standalone,\n      name = calculatedValues.name,\n      innerRadius = calculatedValues.innerRadius,\n      cornerRadius = calculatedValues.cornerRadius,\n      padAngle = calculatedValues.padAngle;\n  var radius = props.radius || defaultRadius;\n  var initialChildProps = {\n    parent: {\n      standalone: standalone,\n      height: height,\n      width: width,\n      slices: slices,\n      name: name,\n      style: style.parent\n    }\n  };\n  return slices.reduce(function (childProps, slice, index) {\n    var datum = _defaults({}, data[index], {\n      startAngle: Helpers.radiansToDegrees(slice.startAngle),\n      endAngle: Helpers.radiansToDegrees(slice.endAngle),\n      padAngle: Helpers.radiansToDegrees(slice.padAngle)\n    });\n\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var dataProps = {\n      index: index,\n      slice: slice,\n      datum: datum,\n      data: data,\n      origin: origin,\n      innerRadius: innerRadius,\n      radius: radius,\n      cornerRadius: cornerRadius,\n      padAngle: padAngle,\n      style: getSliceStyle(index, calculatedValues)\n    };\n    childProps[eventKey] = {\n      data: dataProps\n    };\n    var text = getLabelText(props, datum, index);\n\n    if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n      var evaluatedText = Helpers.evaluateProp(text, dataProps);\n      childProps[eventKey].labels = getLabelProps(evaluatedText, dataProps, calculatedValues);\n    }\n\n    return childProps;\n  }, initialChildProps);\n};"]},"metadata":{},"sourceType":"module"}