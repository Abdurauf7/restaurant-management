{"ast":null,"code":"var _jsxFileName = \"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/src/components/Admin/components/dish.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { Layout, Table, Button, Form } from \"antd\";\nimport { Resizable } from \"react-resizable\";\nimport \"../../../assets/css/AdminForm.css\";\nimport WrappedDishForm from \"../../common/dishDrawer\";\nimport Title from \"../../common/title\";\nimport { getDishes, addDishes, deleteDishes } from \"../../../services/dishServices\";\nimport DishTable from \"../../common/table\"; // for resizing\n\nconst ResizeableTitle = props => {\n  const {\n    onResize,\n    width,\n    ...restProps\n  } = props;\n\n  if (!width) {\n    return React.createElement(\"th\", Object.assign({}, restProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(Resizable, {\n    width: width,\n    height: 0,\n    onResize: onResize,\n    draggableOpts: {\n      enableUserSelectHack: false\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"th\", Object.assign({}, restProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  })));\n};\n\nconst {\n  Content\n} = Layout; // Here Started Dish Component\n\nclass Dish extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      dataSource: [],\n      title: \"Dish Menu\"\n    };\n\n    this.cancel = () => {\n      this.setState({\n        editingKey: \"\"\n      });\n    };\n\n    this.handleDelete = async id => {\n      const orginaldata = this.state.dataSource;\n\n      try {\n        await deleteDishes(id);\n      } catch (err) {\n        this.setState({\n          dataSource: orginaldata\n        });\n      }\n    };\n\n    this.components = {\n      header: {\n        cell: ResizeableTitle\n      }\n    };\n\n    this.handleAdd = async e => {\n      e.preventDefault();\n      await this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          addDishes(values);\n          this.setState({\n            visible: false\n          });\n        }\n      });\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n  }\n\n  async populateDishTable() {\n    const {\n      data: dataSource\n    } = await getDishes();\n    this.setState({\n      dataSource\n    });\n  }\n\n  async componentDidMount() {\n    await this.populateDishTable();\n  }\n\n  edit(id) {\n    this.setState({\n      editingKey: id\n    });\n  }\n\n  render() {\n    const {\n      dataSource,\n      visible,\n      title\n    } = this.state;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Content, {\n      style: {\n        margin: \"2em 16px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        background: \"#fff\",\n        padding: 24,\n        minHeight: 280\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.showDrawer,\n      style: {\n        margin: \"2em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Add\")), React.createElement(WrappedDishForm, {\n      onClose: this.onClose,\n      visible: visible,\n      form: this.props.form,\n      handleSubmit: this.handleAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(DishTable, {\n      data: dataSource,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst WrappedHorizontalLoginForm = Form.create()(Dish);\nexport default WrappedHorizontalLoginForm;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Admin/components/dish.js"],"names":["React","Component","Fragment","Layout","Table","Button","Form","Resizable","WrappedDishForm","Title","getDishes","addDishes","deleteDishes","DishTable","ResizeableTitle","props","onResize","width","restProps","enableUserSelectHack","Content","Dish","state","visible","dataSource","title","cancel","setState","editingKey","handleDelete","id","orginaldata","err","components","header","cell","handleAdd","e","preventDefault","form","validateFieldsAndScroll","values","showDrawer","onClose","populateDishTable","data","componentDidMount","edit","render","margin","background","padding","minHeight","textAlign","WrappedHorizontalLoginForm","create"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { Layout, Table, Button, Form } from \"antd\";\nimport { Resizable } from \"react-resizable\";\nimport \"../../../assets/css/AdminForm.css\";\nimport WrappedDishForm from \"../../common/dishDrawer\";\nimport Title from \"../../common/title\";\nimport {\n  getDishes,\n  addDishes,\n  deleteDishes\n} from \"../../../services/dishServices\";\n\nimport DishTable from \"../../common/table\";\n// for resizing\nconst ResizeableTitle = props => {\n  const { onResize, width, ...restProps } = props;\n\n  if (!width) {\n    return <th {...restProps} />;\n  }\n  return (\n    <Resizable\n      width={width}\n      height={0}\n      onResize={onResize}\n      draggableOpts={{ enableUserSelectHack: false }}\n    >\n      <th {...restProps} />\n    </Resizable>\n  );\n};\n\nconst { Content } = Layout;\n\n// Here Started Dish Component\nclass Dish extends Component {\n  async populateDishTable() {\n    const { data: dataSource } = await getDishes();\n    this.setState({ dataSource });\n  }\n\n  async componentDidMount() {\n    await this.populateDishTable();\n  }\n\n  state = {\n    visible: false,\n    dataSource: [],\n    title: \"Dish Menu\"\n  };\n\n  cancel = () => {\n    this.setState({ editingKey: \"\" });\n  };\n  edit(id) {\n    this.setState({ editingKey: id });\n  }\n\n  handleDelete = async id => {\n    const orginaldata = this.state.dataSource;\n    try {\n      await deleteDishes(id);\n    } catch (err) {\n      this.setState({ dataSource: orginaldata });\n    }\n  };\n\n  components = {\n    header: {\n      cell: ResizeableTitle\n    }\n  };\n\n  handleAdd = async e => {\n    e.preventDefault();\n    await this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        addDishes(values);\n        this.setState({ visible: false });\n      }\n    });\n  };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n\n  render() {\n    const { dataSource, visible, title } = this.state;\n    return (\n      <Fragment>\n        <Content style={{ margin: \"2em 16px\" }}>\n          <div style={{ background: \"#fff\", padding: 24, minHeight: 280 }}>\n            <Title title={title} />\n            <div style={{ textAlign: \"right\" }}>\n              <Button\n                type=\"primary\"\n                onClick={this.showDrawer}\n                style={{ margin: \"2em\" }}\n              >\n                Add\n              </Button>\n            </div>\n            <WrappedDishForm\n              onClose={this.onClose}\n              visible={visible}\n              form={this.props.form}\n              handleSubmit={this.handleAdd}\n            />\n            <DishTable data={dataSource} />\n          </div>\n        </Content>\n      </Fragment>\n    );\n  }\n}\n\nconst WrappedHorizontalLoginForm = Form.create()(Dish);\nexport default WrappedHorizontalLoginForm;\n"]},"metadata":{},"sourceType":"module"}