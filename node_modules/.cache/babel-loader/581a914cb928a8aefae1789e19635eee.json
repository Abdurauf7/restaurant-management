{"ast":null,"code":"import jwtDecode from\"jwt-decode\";import https from\"./httpService\";import{apiUrl,admin,user,name}from\"../config.json\";import{openNotification}from\"../components/custom\";export function login(values,history){return https.post(apiUrl+\"user/login\",values).then(function(res){localStorage.setItem(admin,res.data.admin);localStorage.setItem(user,res.data.user);localStorage.setItem(name,res.data.data);if(res.data.status===200){history.replace(\"/admin\");openNotification(\"success\",\"\".concat(res.data.data,\" Successfully logged in\"));}else if(res.data.status===302){history.replace(\"/user\");openNotification(\"success\",\"\".concat(res.data.data,\" Successfully logged in\"));}else if(res.data.status===401){return openNotification(\"error\",\"Email or Password is not valid\",\"Please retype Email or Password\");}else if(res.data.status===404){return openNotification(\"error\",\"Email or Password is not valid\",\"Please retype Email or Password\");}});}export function getAdmin(){try{var jwt=localStorage.getItem(admin);return jwtDecode(jwt);}catch(error){return null;}}export function getUser(){try{var jwt=localStorage.getItem(user);return jwtDecode(jwt);}catch(error){return null;}}","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/services/auth.js"],"names":["jwtDecode","https","apiUrl","admin","user","name","openNotification","login","values","history","post","then","res","localStorage","setItem","data","status","replace","getAdmin","jwt","getItem","error","getUser"],"mappings":"AAAA,MAAOA,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,CAA8BC,IAA9B,KAA0C,gBAA1C,CACA,OAASC,gBAAT,KAAiC,sBAAjC,CAEA,MAAO,SAASC,CAAAA,KAAT,CAAeC,MAAf,CAAuBC,OAAvB,CAAgC,CACrC,MAAOR,CAAAA,KAAK,CAACS,IAAN,CAAWR,MAAM,CAAG,YAApB,CAAkCM,MAAlC,EAA0CG,IAA1C,CAA+C,SAAAC,GAAG,CAAI,CAC3DC,YAAY,CAACC,OAAb,CAAqBX,KAArB,CAA4BS,GAAG,CAACG,IAAJ,CAASZ,KAArC,EACAU,YAAY,CAACC,OAAb,CAAqBV,IAArB,CAA2BQ,GAAG,CAACG,IAAJ,CAASX,IAApC,EACAS,YAAY,CAACC,OAAb,CAAqBT,IAArB,CAA2BO,GAAG,CAACG,IAAJ,CAASA,IAApC,EACA,GAAIH,GAAG,CAACG,IAAJ,CAASC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BP,OAAO,CAACQ,OAAR,CAAgB,QAAhB,EACAX,gBAAgB,CAAC,SAAD,WAAeM,GAAG,CAACG,IAAJ,CAASA,IAAxB,4BAAhB,CACD,CAHD,IAGO,IAAIH,GAAG,CAACG,IAAJ,CAASC,MAAT,GAAoB,GAAxB,CAA6B,CAClCP,OAAO,CAACQ,OAAR,CAAgB,OAAhB,EACAX,gBAAgB,CAAC,SAAD,WAAeM,GAAG,CAACG,IAAJ,CAASA,IAAxB,4BAAhB,CACD,CAHM,IAGA,IAAIH,GAAG,CAACG,IAAJ,CAASC,MAAT,GAAoB,GAAxB,CAA6B,CAClC,MAAOV,CAAAA,gBAAgB,CACrB,OADqB,CAErB,gCAFqB,CAGrB,iCAHqB,CAAvB,CAKD,CANM,IAMA,IAAIM,GAAG,CAACG,IAAJ,CAASC,MAAT,GAAoB,GAAxB,CAA6B,CAClC,MAAOV,CAAAA,gBAAgB,CACrB,OADqB,CAErB,gCAFqB,CAGrB,iCAHqB,CAAvB,CAKD,CACF,CAvBM,CAAP,CAwBD,CAED,MAAO,SAASY,CAAAA,QAAT,EAAoB,CACzB,GAAI,CACF,GAAMC,CAAAA,GAAG,CAAGN,YAAY,CAACO,OAAb,CAAqBjB,KAArB,CAAZ,CACA,MAAOH,CAAAA,SAAS,CAACmB,GAAD,CAAhB,CACD,CAAC,MAAOE,KAAP,CAAc,CACd,MAAO,KAAP,CACD,CACF,CACD,MAAO,SAASC,CAAAA,OAAT,EAAmB,CACxB,GAAI,CACF,GAAMH,CAAAA,GAAG,CAAGN,YAAY,CAACO,OAAb,CAAqBhB,IAArB,CAAZ,CACA,MAAOJ,CAAAA,SAAS,CAACmB,GAAD,CAAhB,CACD,CAAC,MAAOE,KAAP,CAAc,CACd,MAAO,KAAP,CACD,CACF","sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport https from \"./httpService\";\nimport { apiUrl, admin, user, name } from \"../config.json\";\nimport { openNotification } from \"../components/custom\";\n\nexport function login(values, history) {\n  return https.post(apiUrl + \"user/login\", values).then(res => {\n    localStorage.setItem(admin, res.data.admin);\n    localStorage.setItem(user, res.data.user);\n    localStorage.setItem(name, res.data.data);\n    if (res.data.status === 200) {\n      history.replace(\"/admin\");\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 302) {\n      history.replace(\"/user\");\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 401) {\n      return openNotification(\n        \"error\",\n        \"Email or Password is not valid\",\n        \"Please retype Email or Password\"\n      );\n    } else if (res.data.status === 404) {\n      return openNotification(\n        \"error\",\n        \"Email or Password is not valid\",\n        \"Please retype Email or Password\"\n      );\n    }\n  });\n}\n\nexport function getAdmin() {\n  try {\n    const jwt = localStorage.getItem(admin);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}\nexport function getUser() {\n  try {\n    const jwt = localStorage.getItem(user);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}