{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport httpService from \"./httpService\";\nconst tokenKey = \"token\";\nexport function login(values, history) {\n  return https.post(apiUrl + \"user/login\", values).then(res => {\n    localStorage.setItem(\"token\", res.data.token);\n\n    if (res.data.status === 200) {\n      history.replace(`/admin/${res.data.data}`);\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 302) {\n      history.replace(`/user/${res.data.data}`);\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 401) {\n      return openNotification(\"error\", \"Email or Password is not valid\", \"Please retype Email or Password\");\n    } else if (res.data.status === 404) {\n      return openNotification(\"error\", \"Email or Password is not valid\", \"Please retype Email or Password\");\n    }\n  });\n}\nexport function getCurrentuser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    console.log(jwtDecode);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/services/auth.js"],"names":["jwtDecode","httpService","tokenKey","login","values","history","https","post","apiUrl","then","res","localStorage","setItem","data","token","status","replace","openNotification","getCurrentuser","jwt","getItem","console","log","error"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,MAAMC,QAAQ,GAAG,OAAjB;AAEA,OAAO,SAASC,KAAT,CAAeC,MAAf,EAAuBC,OAAvB,EAAgC;AACrC,SAAOC,KAAK,CAACC,IAAN,CAAWC,MAAM,GAAG,YAApB,EAAkCJ,MAAlC,EAA0CK,IAA1C,CAA+CC,GAAG,IAAI;AAC3DC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC;;AACA,QAAIJ,GAAG,CAACG,IAAJ,CAASE,MAAT,KAAoB,GAAxB,EAA6B;AAC3BV,MAAAA,OAAO,CAACW,OAAR,CAAiB,UAASN,GAAG,CAACG,IAAJ,CAASA,IAAK,EAAxC;AACAI,MAAAA,gBAAgB,CAAC,SAAD,EAAa,GAAEP,GAAG,CAACG,IAAJ,CAASA,IAAK,yBAA7B,CAAhB;AACD,KAHD,MAGO,IAAIH,GAAG,CAACG,IAAJ,CAASE,MAAT,KAAoB,GAAxB,EAA6B;AAClCV,MAAAA,OAAO,CAACW,OAAR,CAAiB,SAAQN,GAAG,CAACG,IAAJ,CAASA,IAAK,EAAvC;AACAI,MAAAA,gBAAgB,CAAC,SAAD,EAAa,GAAEP,GAAG,CAACG,IAAJ,CAASA,IAAK,yBAA7B,CAAhB;AACD,KAHM,MAGA,IAAIH,GAAG,CAACG,IAAJ,CAASE,MAAT,KAAoB,GAAxB,EAA6B;AAClC,aAAOE,gBAAgB,CACrB,OADqB,EAErB,gCAFqB,EAGrB,iCAHqB,CAAvB;AAKD,KANM,MAMA,IAAIP,GAAG,CAACG,IAAJ,CAASE,MAAT,KAAoB,GAAxB,EAA6B;AAClC,aAAOE,gBAAgB,CACrB,OADqB,EAErB,gCAFqB,EAGrB,iCAHqB,CAAvB;AAKD;AACF,GArBM,CAAP;AAsBD;AAED,OAAO,SAASC,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAMC,GAAG,GAAGR,YAAY,CAACS,OAAb,CAAqBlB,QAArB,CAAZ;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYtB,SAAZ;AACA,WAAOA,SAAS,CAACmB,GAAD,CAAhB;AACD,GAJD,CAIE,OAAOI,KAAP,EAAc;AACd,WAAO,IAAP;AACD;AACF","sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport httpService from \"./httpService\";\n\nconst tokenKey = \"token\";\n\nexport function login(values, history) {\n  return https.post(apiUrl + \"user/login\", values).then(res => {\n    localStorage.setItem(\"token\", res.data.token);\n    if (res.data.status === 200) {\n      history.replace(`/admin/${res.data.data}`);\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 302) {\n      history.replace(`/user/${res.data.data}`);\n      openNotification(\"success\", `${res.data.data} Successfully logged in`);\n    } else if (res.data.status === 401) {\n      return openNotification(\n        \"error\",\n        \"Email or Password is not valid\",\n        \"Please retype Email or Password\"\n      );\n    } else if (res.data.status === 404) {\n      return openNotification(\n        \"error\",\n        \"Email or Password is not valid\",\n        \"Please retype Email or Password\"\n      );\n    }\n  });\n}\n\nexport function getCurrentuser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    console.log(jwtDecode);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}