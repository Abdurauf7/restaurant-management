{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// React\nimport React,{useEffect,useState}from\"react\";// third part\nimport{Modal,Form,TreeSelect,Select,Input,TimePicker}from\"antd\";// Services\nimport{getTable}from\"../../../../../services/tableServices\";import{getDishes}from\"../../../../../services/dishServices\";// custom\nimport{openNotification}from\"../../../../custom\";var layout={labelCol:{span:5},wrapperCol:{span:16}};var EditModal=function EditModal(_ref){var editableData=_ref.editableData,visible=_ref.visible,handleUpdate=_ref.handleUpdate,onClose=_ref.onClose;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tableNumber=_useState2[0],setTableNumber=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];var fetchTableNumber=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getTable().then(function(res){return res.data;}).then(function(data){return setTableNumber(data);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);openNotification(\"error\",\"Cant get tables\",\"Check connection\");case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function fetchTableNumber(){return _ref2.apply(this,arguments);};}();var fetchOrders=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getDishes().then(function(res){return res.data;}).then(function(data){return setOrders(data);});case 3:_context2.next=7;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);case 7:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function fetchOrders(){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchTableNumber();fetchOrders();},[]);return React.createElement(Modal,{closable:false,visible:visible,okText:\"Edit\",cancelText:\"Cancel\",onCancel:onClose,onOk:function onOk(){form.validateFields().then(function(values){form.resetFields();handleUpdate(values);}).catch(function(info){console.log(\"Validate Failed:\",info);});}},React.createElement(Form,Object.assign({},layout,{hideRequiredMark:true,onFinish:handleUpdate,form:form,initialValues:{id:editableData.id,table_number:editableData.table,customer_name:editableData.customer,dish:editableData.ordered_items}}),React.createElement(Form.Item,{name:\"id\"},React.createElement(\"h1\",null,\"Edit Orders\")),React.createElement(Form.Item,{label:\"Table Number\",name:\"table_number\",rules:[{required:true,message:\"Enter Table Number\"}]},React.createElement(Select,{placeholder:\"select table number\"},tableNumber.map(function(table){return React.createElement(Select.Option,{key:table.id,value:table.table_number},table.table_number);}))),React.createElement(Form.Item,{label:\"Customer\",name:\"customer_name\",rules:[{required:true,message:\"Enter Customer Name\"}]},React.createElement(Input,{placeholder:\"Customer Name\",allowClear:true})),React.createElement(Form.Item,{label:\"Order\",name:\"dish\"},React.createElement(TreeSelect,{style:{width:\"100%\"},dropdownStyle:{maxHeight:400,overflow:\"auto\"},placeholder:\"Please select\",allowClear:true,multiple:true,showSearch:true,autoClearSearchValue:true,bordered:true},orders.map(function(or){return React.createElement(TreeSelect.TreeNode,{key:or.id,value:or.type,title:or.type,selectable:false},React.createElement(TreeSelect.TreeNode,{key:or.id,value:or.name,title:or.name}));}))),React.createElement(Form.Item,{label:\"Price\",name:\"price\"},React.createElement(TreeSelect,{showSearch:true,style:{width:\"100%\"},placeholder:\"Please select Price\",allowClear:true,multiple:true,bordered:true},orders.map(function(or){return React.createElement(TreeSelect.TreeNode,{key:or.id,selectable:false,title:or.name,value:or.name},React.createElement(TreeSelect.TreeNode,{key:or.id,title:or.price,value:or.price}));}))),React.createElement(Form.Item,{label:\"Time\",name:\"time\",placeholder:\"select time\",rules:[{required:true,message:\"Enter ordered time\"}]},React.createElement(TimePicker,null))));};export default EditModal;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Employee/components/Order/components/editModal.jsx"],"names":["React","useEffect","useState","Modal","Form","TreeSelect","Select","Input","TimePicker","getTable","getDishes","openNotification","layout","labelCol","span","wrapperCol","EditModal","editableData","visible","handleUpdate","onClose","useForm","form","tableNumber","setTableNumber","orders","setOrders","fetchTableNumber","then","res","data","fetchOrders","validateFields","values","resetFields","catch","info","console","log","id","table_number","table","customer_name","customer","dish","ordered_items","required","message","map","width","maxHeight","overflow","or","type","name","price"],"mappings":"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","sourcesContent":["// React\nimport React, { useEffect, useState } from \"react\";\n\n// third part\nimport { Modal, Form, TreeSelect, Select, Input, TimePicker } from \"antd\";\n\n// Services\nimport { getTable } from \"../../../../../services/tableServices\";\nimport { getDishes } from \"../../../../../services/dishServices\";\n// custom\nimport { openNotification } from \"../../../../custom\";\n\nconst layout = {\n  labelCol: {\n    span: 5\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst EditModal = ({ editableData, visible, handleUpdate, onClose }) => {\n  const [form] = Form.useForm();\n  const [tableNumber, setTableNumber] = useState([]);\n  const [orders, setOrders] = useState([]);\n\n  const fetchTableNumber = async () => {\n    try {\n      await getTable()\n        .then(res => res.data)\n        .then(data => setTableNumber(data));\n    } catch (error) {\n      openNotification(\"error\", \"Cant get tables\", \"Check connection\");\n    }\n  };\n  const fetchOrders = async () => {\n    try {\n      await getDishes()\n        .then(res => res.data)\n        .then(data => setOrders(data));\n    } catch (error) {}\n  };\n  useEffect(() => {\n    fetchTableNumber();\n    fetchOrders();\n  }, []);\n\n  return (\n    <Modal\n      closable={false}\n      visible={visible}\n      okText=\"Edit\"\n      cancelText=\"Cancel\"\n      onCancel={onClose}\n      onOk={() => {\n        form\n          .validateFields()\n          .then(values => {\n            form.resetFields();\n            handleUpdate(values);\n          })\n          .catch(info => {\n            console.log(\"Validate Failed:\", info);\n          });\n      }}\n    >\n      <Form\n        {...layout}\n        hideRequiredMark\n        onFinish={handleUpdate}\n        form={form}\n        initialValues={{\n          id: editableData.id,\n          table_number: editableData.table,\n          customer_name: editableData.customer,\n          dish: editableData.ordered_items\n        }}\n      >\n        <Form.Item name=\"id\">\n          <h1>Edit Orders</h1>\n        </Form.Item>\n        <Form.Item\n          label=\"Table Number\"\n          name=\"table_number\"\n          rules={[{ required: true, message: \"Enter Table Number\" }]}\n        >\n          <Select placeholder=\"select table number\">\n            {tableNumber.map(table => (\n              <Select.Option key={table.id} value={table.table_number}>\n                {table.table_number}\n              </Select.Option>\n            ))}\n          </Select>\n        </Form.Item>\n        <Form.Item\n          label=\"Customer\"\n          name=\"customer_name\"\n          rules={[{ required: true, message: \"Enter Customer Name\" }]}\n        >\n          <Input placeholder=\"Customer Name\" allowClear />\n        </Form.Item>\n        <Form.Item label=\"Order\" name=\"dish\">\n          <TreeSelect\n            style={{ width: \"100%\" }}\n            dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n            placeholder=\"Please select\"\n            allowClear\n            multiple\n            showSearch\n            autoClearSearchValue\n            bordered\n          >\n            {orders.map(or => (\n              <TreeSelect.TreeNode\n                key={or.id}\n                value={or.type}\n                title={or.type}\n                selectable={false}\n              >\n                <TreeSelect.TreeNode\n                  key={or.id}\n                  value={or.name}\n                  title={or.name}\n                />\n              </TreeSelect.TreeNode>\n            ))}\n          </TreeSelect>\n        </Form.Item>\n        <Form.Item label=\"Price\" name=\"price\">\n          <TreeSelect\n            showSearch\n            style={{ width: \"100%\" }}\n            placeholder=\"Please select Price\"\n            allowClear\n            multiple\n            bordered\n          >\n            {orders.map(or => (\n              <TreeSelect.TreeNode\n                key={or.id}\n                selectable={false}\n                title={or.name}\n                value={or.name}\n              >\n                <TreeSelect.TreeNode\n                  key={or.id}\n                  title={or.price}\n                  value={or.price}\n                />\n              </TreeSelect.TreeNode>\n            ))}\n          </TreeSelect>\n        </Form.Item>\n        <Form.Item\n          label=\"Time\"\n          name=\"time\"\n          placeholder=\"select time\"\n          rules={[{ required: true, message: \"Enter ordered time\" }]}\n        >\n          <TimePicker />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default EditModal;\n"]},"metadata":{},"sourceType":"module"}