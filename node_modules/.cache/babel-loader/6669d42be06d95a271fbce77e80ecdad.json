{"ast":null,"code":"var _jsxFileName = \"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/src/components/LoginForm/loginForm.jsx\";\n// React\nimport React, { Component, Fragment } from \"react\"; // Third part\n\nimport { Form, Icon, Input, Button, Row, Col, Typography, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport https from \"../../services/httpService\";\nimport { apiUrl } from \"../../config.json\"; // custom\n\nimport \"../../assets/css/LoginForm.css\";\nconst {\n  Title\n} = Typography;\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass SignInForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: []\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        history\n      } = this.props;\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          https.post(apiUrl + \"signin\", {\n            email: values.email,\n            password: values.password\n          }).then(res => {\n            console.log(res);\n\n            if (res.data.status === 200) {\n              history.replace(\"/admin\");\n            } else if (res.data.status === 202) {\n              history.replace(`/employee/`);\n            } else if (res.data === \"User not Founded\") {\n              return notification.error({\n                message: \"Login or Password is wrong\",\n                description: \"Please type again\"\n              });\n            }\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    // To disable submit button at the beginning.\n    this.props.form.validateFields();\n    https.get(apiUrl + \"employee\").then(res => res.data.map(user => user.push));\n    console.log(this.state.data);\n  }\n\n  render() {\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const {\n      getFieldDecorator,\n      getFieldsError,\n      getFieldError,\n      isFieldTouched\n    } = this.props.form; // Only show error after a field is touched.\n\n    const usernameError = isFieldTouched(\"email\") && getFieldError(\"email\");\n    const passwordError = isFieldTouched(\"password\") && getFieldError(\"password\");\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Row, {\n      gutter: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 10,\n      xl: 10,\n      md: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"restaurant\",\n      style: {\n        width: \"100%\"\n      },\n      src: \"https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1275&q=80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      xs: {\n        span: 10,\n        offset: 2\n      },\n      xl: {\n        span: 10,\n        offset: 3\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, formItemLayout, {\n      onSubmit: this.handleSubmit,\n      className: \"log-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Welcome Restaurant\"), React.createElement(Form.Item, {\n      validateStatus: usernameError ? \"error\" : \"\",\n      help: usernameError || \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, getFieldDecorator(\"email\", {\n      rules: [{\n        required: true,\n        message: \"Please input your username!\"\n      }]\n    })(React.createElement(Input, {\n      prefix: React.createElement(Icon, {\n        type: \"user\",\n        style: {\n          color: \"rgba(0,0,0,.25)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }),\n      placeholder: \"Username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      validateStatus: passwordError ? \"error\" : \"\",\n      help: passwordError || \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, getFieldDecorator(\"password\", {\n      rules: [{\n        required: true,\n        message: \"Please input your Password!\"\n      }]\n    })(React.createElement(Input, {\n      prefix: React.createElement(Icon, {\n        type: \"lock\",\n        style: {\n          color: \"rgba(0,0,0,.25)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }),\n      type: \"password\",\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      block: true,\n      htmlType: \"submit\",\n      disabled: hasErrors(getFieldsError()),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Log in\"))), React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \" or Register\")))))));\n  }\n\n}\n\nconst WrapperLoginForm = Form.create({\n  name: \"login\"\n})(SignInForm);\nexport default WrapperLoginForm;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/LoginForm/loginForm.jsx"],"names":["React","Component","Fragment","Form","Icon","Input","Button","Row","Col","Typography","notification","Link","https","apiUrl","Title","hasErrors","fieldsError","Object","keys","some","field","SignInForm","state","data","handleSubmit","e","preventDefault","history","props","form","validateFields","err","values","post","email","password","then","res","console","log","status","replace","error","message","description","componentDidMount","get","map","user","push","render","formItemLayout","labelCol","xs","span","sm","wrapperCol","getFieldDecorator","getFieldsError","getFieldError","isFieldTouched","usernameError","passwordError","width","offset","rules","required","color","textAlign","WrapperLoginForm","create","name"],"mappings":";AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C,C,CAEA;;AACA,SACEC,IADF,EAEEC,IAFF,EAGEC,KAHF,EAIEC,MAJF,EAKEC,GALF,EAMEC,GANF,EAOEC,UAPF,EAQEC,YARF,QASO,MATP;AAUA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,SAASC,MAAT,QAAuB,mBAAvB,C,CACA;;AACA,OAAO,gCAAP;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAYL,UAAlB;;AAEA,SAASM,SAAT,CAAmBC,WAAnB,EAAgC;AAC9B,SAAOC,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,IAAzB,CAA8BC,KAAK,IAAIJ,WAAW,CAACI,KAAD,CAAlD,CAAP;AACD;;AAED,MAAMC,UAAN,SAAyBpB,SAAzB,CAAmC;AAAA;AAAA;AAAA,SACjCqB,KADiC,GACzB;AACNC,MAAAA,IAAI,EAAE;AADA,KADyB;;AAAA,SAWjCC,YAXiC,GAWlBC,CAAC,IAAI;AAClBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAc,KAAKC,KAAzB;AAEA,WAAKA,KAAL,CAAWC,IAAX,CAAgBC,cAAhB,CAA+B,CAACC,GAAD,EAAMC,MAAN,KAAiB;AAC9C,YAAI,CAACD,GAAL,EAAU;AACRnB,UAAAA,KAAK,CACFqB,IADH,CACQpB,MAAM,GAAG,QADjB,EAC2B;AACvBqB,YAAAA,KAAK,EAAEF,MAAM,CAACE,KADS;AAEvBC,YAAAA,QAAQ,EAAEH,MAAM,CAACG;AAFM,WAD3B,EAKGC,IALH,CAKQC,GAAG,IAAI;AACXC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,gBAAIA,GAAG,CAACd,IAAJ,CAASiB,MAAT,KAAoB,GAAxB,EAA6B;AAC3Bb,cAAAA,OAAO,CAACc,OAAR,CAAgB,QAAhB;AACD,aAFD,MAEO,IAAIJ,GAAG,CAACd,IAAJ,CAASiB,MAAT,KAAoB,GAAxB,EAA6B;AAClCb,cAAAA,OAAO,CAACc,OAAR,CAAiB,YAAjB;AACD,aAFM,MAEA,IAAIJ,GAAG,CAACd,IAAJ,KAAa,kBAAjB,EAAqC;AAC1C,qBAAOb,YAAY,CAACgC,KAAb,CAAmB;AACxBC,gBAAAA,OAAO,EAAE,4BADe;AAExBC,gBAAAA,WAAW,EAAE;AAFW,eAAnB,CAAP;AAID;AACF,WAjBH;AAkBD;AACF,OArBD;AAsBD,KArCgC;AAAA;;AAIjCC,EAAAA,iBAAiB,GAAG;AAClB;AACA,SAAKjB,KAAL,CAAWC,IAAX,CAAgBC,cAAhB;AACAlB,IAAAA,KAAK,CAACkC,GAAN,CAAUjC,MAAM,GAAG,UAAnB,EAA+BuB,IAA/B,CAAoCC,GAAG,IAAIA,GAAG,CAACd,IAAJ,CAASwB,GAAT,CAAaC,IAAI,IAAIA,IAAI,CAACC,IAA1B,CAA3C;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,KAAL,CAAWC,IAAvB;AACD;;AA6BD2B,EAAAA,MAAM,GAAG;AACP,UAAMC,cAAc,GAAG;AACrBC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SADI;AAERC,QAAAA,EAAE,EAAE;AAAED,UAAAA,IAAI,EAAE;AAAR;AAFI,OADW;AAKrBE,MAAAA,UAAU,EAAE;AACVH,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SADM;AAEVC,QAAAA,EAAE,EAAE;AAAED,UAAAA,IAAI,EAAE;AAAR;AAFM;AALS,KAAvB;AAUA,UAAM;AACJG,MAAAA,iBADI;AAEJC,MAAAA,cAFI;AAGJC,MAAAA,aAHI;AAIJC,MAAAA;AAJI,QAKF,KAAKhC,KAAL,CAAWC,IALf,CAXO,CAkBP;;AACA,UAAMgC,aAAa,GAAGD,cAAc,CAAC,OAAD,CAAd,IAA2BD,aAAa,CAAC,OAAD,CAA9D;AACA,UAAMG,aAAa,GACjBF,cAAc,CAAC,UAAD,CAAd,IAA8BD,aAAa,CAAC,UAAD,CAD7C;AAEA,WACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,GAAG,EAAC,YADN;AAEE,MAAA,KAAK,EAAE;AAAEI,QAAAA,KAAK,EAAE;AAAT,OAFT;AAGE,MAAA,GAAG,EAAC,wIAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF,EAUE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAET,QAAAA,IAAI,EAAE,EAAR;AAAYU,QAAAA,MAAM,EAAE;AAApB,OAAT;AAAkC,MAAA,EAAE,EAAE;AAAEV,QAAAA,IAAI,EAAE,EAAR;AAAYU,QAAAA,MAAM,EAAE;AAApB,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,oBACMb,cADN;AAEE,MAAA,QAAQ,EAAE,KAAK3B,YAFjB;AAGE,MAAA,SAAS,EAAC,UAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BALF,EAME,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,cAAc,EAAEqC,aAAa,GAAG,OAAH,GAAa,EAD5C;AAEE,MAAA,IAAI,EAAEA,aAAa,IAAI,EAFzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGJ,iBAAiB,CAAC,OAAD,EAAU;AAC1BQ,MAAAA,KAAK,EAAE,CACL;AACEC,QAAAA,QAAQ,EAAE,IADZ;AAEEvB,QAAAA,OAAO,EAAE;AAFX,OADK;AADmB,KAAV,CAAjB,CAQC,oBAAC,KAAD;AACE,MAAA,MAAM,EACJ,oBAAC,IAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE;AAAEwB,UAAAA,KAAK,EAAE;AAAT,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ;AAOE,MAAA,WAAW,EAAC,UAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARD,CAJH,CANF,EA8BE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,cAAc,EAAEL,aAAa,GAAG,OAAH,GAAa,EAD5C;AAEE,MAAA,IAAI,EAAEA,aAAa,IAAI,EAFzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGL,iBAAiB,CAAC,UAAD,EAAa;AAC7BQ,MAAAA,KAAK,EAAE,CACL;AACEC,QAAAA,QAAQ,EAAE,IADZ;AAEEvB,QAAAA,OAAO,EAAE;AAFX,OADK;AADsB,KAAb,CAAjB,CAQC,oBAAC,KAAD;AACE,MAAA,MAAM,EACJ,oBAAC,IAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE;AAAEwB,UAAAA,KAAK,EAAE;AAAT,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ;AAOE,MAAA,IAAI,EAAC,UAPP;AAQE,MAAA,WAAW,EAAC,UARd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARD,CAJH,CA9BF,EAuDE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,KAAK,MAFP;AAGE,MAAA,QAAQ,EAAC,QAHX;AAIE,MAAA,QAAQ,EAAErD,SAAS,CAAC2C,cAAc,EAAf,CAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,CAvDF,EAoEE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CApEF,CADF,CAVF,CADF,CADF,CADF;AA2FD;;AAvJgC;;AA0JnC,MAAMW,gBAAgB,GAAGlE,IAAI,CAACmE,MAAL,CAAY;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAZ,EAA+BlD,UAA/B,CAAzB;AACA,eAAegD,gBAAf","sourcesContent":["// React\nimport React, { Component, Fragment } from \"react\";\n\n// Third part\nimport {\n  Form,\n  Icon,\n  Input,\n  Button,\n  Row,\n  Col,\n  Typography,\n  notification\n} from \"antd\";\nimport { Link } from \"react-router-dom\";\n\nimport https from \"../../services/httpService\";\nimport { apiUrl } from \"../../config.json\";\n// custom\nimport \"../../assets/css/LoginForm.css\";\n\nconst { Title } = Typography;\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass SignInForm extends Component {\n  state = {\n    data: []\n  };\n  componentDidMount() {\n    // To disable submit button at the beginning.\n    this.props.form.validateFields();\n    https.get(apiUrl + \"employee\").then(res => res.data.map(user => user.push));\n    console.log(this.state.data);\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { history } = this.props;\n\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        https\n          .post(apiUrl + \"signin\", {\n            email: values.email,\n            password: values.password\n          })\n          .then(res => {\n            console.log(res);\n            if (res.data.status === 200) {\n              history.replace(\"/admin\");\n            } else if (res.data.status === 202) {\n              history.replace(`/employee/`);\n            } else if (res.data === \"User not Founded\") {\n              return notification.error({\n                message: \"Login or Password is wrong\",\n                description: \"Please type again\"\n              });\n            }\n          });\n      }\n    });\n  };\n  render() {\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      }\n    };\n    const {\n      getFieldDecorator,\n      getFieldsError,\n      getFieldError,\n      isFieldTouched\n    } = this.props.form;\n\n    // Only show error after a field is touched.\n    const usernameError = isFieldTouched(\"email\") && getFieldError(\"email\");\n    const passwordError =\n      isFieldTouched(\"password\") && getFieldError(\"password\");\n    return (\n      <Fragment>\n        <div>\n          <Row gutter={20}>\n            <Col xs={10} xl={10} md={10}>\n              <div>\n                <img\n                  alt=\"restaurant\"\n                  style={{ width: \"100%\" }}\n                  src=\"https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1275&q=80\"\n                />\n              </div>\n            </Col>\n            <Col xs={{ span: 10, offset: 2 }} xl={{ span: 10, offset: 3 }}>\n              <Form\n                {...formItemLayout}\n                onSubmit={this.handleSubmit}\n                className=\"log-form\"\n              >\n                <Title>Welcome Restaurant</Title>\n                <Form.Item\n                  validateStatus={usernameError ? \"error\" : \"\"}\n                  help={usernameError || \"\"}\n                >\n                  {getFieldDecorator(\"email\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your username!\"\n                      }\n                    ]\n                  })(\n                    <Input\n                      prefix={\n                        <Icon\n                          type=\"user\"\n                          style={{ color: \"rgba(0,0,0,.25)\" }}\n                        />\n                      }\n                      placeholder=\"Username\"\n                    />\n                  )}\n                </Form.Item>\n\n                <Form.Item\n                  validateStatus={passwordError ? \"error\" : \"\"}\n                  help={passwordError || \"\"}\n                >\n                  {getFieldDecorator(\"password\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Password!\"\n                      }\n                    ]\n                  })(\n                    <Input\n                      prefix={\n                        <Icon\n                          type=\"lock\"\n                          style={{ color: \"rgba(0,0,0,.25)\" }}\n                        />\n                      }\n                      type=\"password\"\n                      placeholder=\"Password\"\n                    />\n                  )}\n                </Form.Item>\n\n                <Form.Item>\n                  <div style={{ textAlign: \"center\" }}>\n                    <Button\n                      type=\"primary\"\n                      block\n                      htmlType=\"submit\"\n                      disabled={hasErrors(getFieldsError())}\n                    >\n                      Log in\n                    </Button>\n                  </div>\n                </Form.Item>\n\n                <Link to=\"/register\">\n                  <p> or Register</p>\n                </Link>\n              </Form>\n            </Col>\n          </Row>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst WrapperLoginForm = Form.create({ name: \"login\" })(SignInForm);\nexport default WrapperLoginForm;\n"]},"metadata":{},"sourceType":"module"}