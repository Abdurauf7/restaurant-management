{"ast":null,"code":"import _objectSpread from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// React\nimport React,{Fragment,useEffect,useState}from\"react\";// Third Part\nimport{Layout,Divider}from\"antd\";// Custom\nimport{HeaderTitle,openNotification,CustomDrawerButton}from\"../../../../custom\";import*as All from\"./\";// Services\nimport{getUser,editUser,addUser,deleteUser}from\"../../../../../services/userServices\";var Content=Layout.Content;var PersonalContent=function PersonalContent(){// initializing states\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),editData=_useState6[0],setEditData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),drawerVisible=_useState8[0],setDrawerVisible=_useState8[1];//   hook cycles\nvar fetchPersonData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUser().then(function(res){return res.data;}).then(function(res){return setData(res);}).catch(function(err){return openNotification(\"error\",\"Cannot get informations\",\"Please check connection\");});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchPersonData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchPersonData();},[]);// custom Drawer\nvar showDrawer=function showDrawer(){setDrawerVisible(true);};var onhandleAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(items){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addUser(items);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);openNotification(\"error\",\"Cannot add User\",\"Check Connection\");case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function onhandleAdd(_x){return _ref2.apply(this,arguments);};}();var onClose=function onClose(){setDrawerVisible(false);window.location.reload();};//   Modal handle\nvar onCancel=function onCancel(){setVisible(false);window.location.reload();};// //   handle actions in table item\nvar onhandleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(items){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return editUser(items);case 3:console.log(items);_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);openNotification(\"error\",\"Can't Edit User\",\"Check Connection\");case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function onhandleUpdate(_x2){return _ref3.apply(this,arguments);};}();var deleteItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return deleteUser(item);case 3:_context4.next=8;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);openNotification(\"error\",\" Can't Delete User\",\"Check Connection\");case 8:case\"end\":return _context4.stop();}}},_callee4,null,[[0,5]]);}));return function deleteItem(_x3){return _ref4.apply(this,arguments);};}();var editItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(item){var newData;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newData=_objectSpread({},item);setEditData(newData);setVisible(true);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function editItem(_x4){return _ref5.apply(this,arguments);};}();return React.createElement(Fragment,null,React.createElement(Content,{style:{margin:\"2em 16px\"}},React.createElement(\"div\",{style:{background:\"#fff\",padding:24,minHeight:280},className:\"border border-dark rounded\"},React.createElement(HeaderTitle,{title:\"Personal Menu\",legth:data.length}),React.createElement(CustomDrawerButton,{title:\"Add Personal\",showDrawer:showDrawer}),React.createElement(Divider,null),React.createElement(All.PersonDarawer,{title:\"Add Person\",visible:drawerVisible,onClose:onClose,onhandleAdd:onhandleAdd}),React.createElement(All.PersonalTable,{data:data,deleteItem:deleteItem,editItem:editItem}),React.createElement(All.PersonModal,{visible:visible,onCancel:onCancel,data:editData,onhandleUpdate:onhandleUpdate}))));};export default PersonalContent;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Admin/components/PersonalComponent/components/personalContent.jsx"],"names":["React","Fragment","useEffect","useState","Layout","Divider","HeaderTitle","openNotification","CustomDrawerButton","All","getUser","editUser","addUser","deleteUser","Content","PersonalContent","data","setData","visible","setVisible","editData","setEditData","drawerVisible","setDrawerVisible","fetchPersonData","then","res","catch","err","showDrawer","onhandleAdd","items","onClose","window","location","reload","onCancel","onhandleUpdate","console","log","deleteItem","item","editItem","newData","margin","background","padding","minHeight","length"],"mappings":"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","sourcesContent":["// React\nimport React, { Fragment, useEffect, useState } from \"react\";\n\n// Third Part\nimport { Layout, Divider } from \"antd\";\n\n// Custom\nimport {\n  HeaderTitle,\n  openNotification,\n  CustomDrawerButton\n} from \"../../../../custom\";\nimport * as All from \"./\";\n\n// Services\nimport {\n  getUser,\n  editUser,\n  addUser,\n  deleteUser\n} from \"../../../../../services/userServices\";\n\nconst { Content } = Layout;\n\nconst PersonalContent = () => {\n  // initializing states\n  const [data, setData] = useState([]);\n  const [visible, setVisible] = useState();\n  const [editData, setEditData] = useState({});\n  const [drawerVisible, setDrawerVisible] = useState();\n\n  //   hook cycles\n  const fetchPersonData = async () => {\n    await getUser()\n      .then(res => res.data)\n      .then(res => setData(res))\n      .catch(err =>\n        openNotification(\n          \"error\",\n          \"Cannot get informations\",\n          \"Please check connection\"\n        )\n      );\n  };\n\n  useEffect(() => {\n    fetchPersonData();\n  }, []);\n\n  // custom Drawer\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n  const onhandleAdd = async items => {\n    try {\n      await addUser(items);\n    } catch (error) {\n      openNotification(\"error\", \"Cannot add User\", \"Check Connection\");\n    }\n  };\n\n  const onClose = () => {\n    setDrawerVisible(false);\n    window.location.reload();\n  };\n\n  //   Modal handle\n  const onCancel = () => {\n    setVisible(false);\n    window.location.reload();\n  };\n\n  // //   handle actions in table item\n  const onhandleUpdate = async items => {\n    try {\n      await editUser(items);\n      console.log(items);\n    } catch (error) {\n      openNotification(\"error\", \"Can't Edit User\", \"Check Connection\");\n    }\n  };\n  const deleteItem = async item => {\n    try {\n      await deleteUser(item);\n    } catch (error) {\n      openNotification(\"error\", \" Can't Delete User\", \"Check Connection\");\n    }\n  };\n  const editItem = async item => {\n    const newData = { ...item };\n    setEditData(newData);\n    setVisible(true);\n  };\n  return (\n    <Fragment>\n      <Content style={{ margin: \"2em 16px\" }}>\n        <div\n          style={{ background: \"#fff\", padding: 24, minHeight: 280 }}\n          className=\"border border-dark rounded\"\n        >\n          <HeaderTitle title={\"Personal Menu\"} legth={data.length} />\n          <CustomDrawerButton title=\"Add Personal\" showDrawer={showDrawer} />\n          <Divider />\n          <All.PersonDarawer\n            title=\"Add Person\"\n            visible={drawerVisible}\n            onClose={onClose}\n            onhandleAdd={onhandleAdd}\n          />\n\n          <All.PersonalTable\n            data={data}\n            deleteItem={deleteItem}\n            editItem={editItem}\n          />\n          <All.PersonModal\n            visible={visible}\n            onCancel={onCancel}\n            data={editData}\n            onhandleUpdate={onhandleUpdate}\n          />\n        </div>\n      </Content>\n    </Fragment>\n  );\n};\n\nexport default PersonalContent;\n"]},"metadata":{},"sourceType":"module"}