{"ast":null,"code":"import _objectSpread from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdurauf/Desktop/\\u6BD5\\u4E1A\\u8BBE\\u8BA1/orginal/restaurant-management-system/plov/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// React\nimport React,{useState,useEffect}from\"react\";// third part\nimport{Layout,Divider}from\"antd\";// custom\nimport{HeaderTitle,CustomDrawerButton,openNotification}from\"../../../../custom/\";import*as All from\"./\";// Services\nimport{getReservation,addReservation,deleteReservationItem,EditReservation}from\"../../../../../services/reservationServices\";var Content=Layout.Content;var ReservationContent=function ReservationContent(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),drawerVisible=_useState2[0],setDrawerVisible=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),getReservationData=_useState4[0],setReservationData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),modalVisible=_useState6[0],setModalVisible=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),editableData=_useState8[0],setEditableData=_useState8[1];var fetchReservationData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getReservation().then(function(res){return res.data;}).then(function(data){return setReservationData(data);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);openNotification(\"error\",\"Can't get Reservation info\",\"Check connection\");case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function fetchReservationData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchReservationData();},[]);var showDrawer=function showDrawer(){setDrawerVisible(true);};var onClose=function onClose(){setDrawerVisible(false);setModalVisible(false);window.location.reload();};var onHandleAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(items){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addReservation(items);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);openNotification(\"error\",\"Can't add user\",\"Check Connection\");case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function onHandleAdd(_x){return _ref2.apply(this,arguments);};}();var deleteReservation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return deleteReservationItem(item);case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);openNotification(\"error\",\"Can't delte \",\"Check Connection\");case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function deleteReservation(_x2){return _ref3.apply(this,arguments);};}();var handleEdit=function handleEdit(items){var newData=_objectSpread({},items);setEditableData(newData);setModalVisible(true);};var handleUpdate=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(items){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:try{EditReservation(items);}catch(error){openNotification(\"error\",\"Can't change Reservation\",\"Check connection\");}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdate(_x3){return _ref4.apply(this,arguments);};}();return React.createElement(Content,{style:{margin:\"2em 16px\"}},React.createElement(\"div\",{style:{background:\"#fff\",padding:24,minHeight:280},className:\"border border-dark rounded\"},React.createElement(HeaderTitle,{title:\"Reservation Menu\",legth:getReservationData.length}),React.createElement(CustomDrawerButton,{title:\"Reserv place\",showDrawer:showDrawer}),React.createElement(Divider,null),React.createElement(All.ReservationDrawer,{visible:drawerVisible,onHandleAdd:onHandleAdd,onClose:onClose}),React.createElement(All.ReservationList,{data:getReservationData,deleteReservation:deleteReservation,handleEdit:handleEdit}),React.createElement(All.EditModal,{data:editableData,visible:modalVisible,onClose:onClose,handleUpdate:handleUpdate})));};export default ReservationContent;","map":{"version":3,"sources":["/Users/abdurauf/Desktop/毕业设计/orginal/restaurant-management-system/plov/src/components/Employee/components/Reservation/components/reservationContent.jsx"],"names":["React","useState","useEffect","Layout","Divider","HeaderTitle","CustomDrawerButton","openNotification","All","getReservation","addReservation","deleteReservationItem","EditReservation","Content","ReservationContent","drawerVisible","setDrawerVisible","getReservationData","setReservationData","modalVisible","setModalVisible","editableData","setEditableData","fetchReservationData","then","res","data","showDrawer","onClose","window","location","reload","onHandleAdd","items","deleteReservation","item","handleEdit","newData","handleUpdate","error","margin","background","padding","minHeight","length"],"mappings":"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","sourcesContent":["// React\nimport React, { useState, useEffect } from \"react\";\n\n// third part\nimport { Layout, Divider } from \"antd\";\n\n// custom\nimport {\n  HeaderTitle,\n  CustomDrawerButton,\n  openNotification\n} from \"../../../../custom/\";\nimport * as All from \"./\";\n\n// Services\n\nimport {\n  getReservation,\n  addReservation,\n  deleteReservationItem,\n  EditReservation\n} from \"../../../../../services/reservationServices\";\n\nconst { Content } = Layout;\n\nconst ReservationContent = () => {\n  const [drawerVisible, setDrawerVisible] = useState();\n  const [getReservationData, setReservationData] = useState([]);\n  const [modalVisible, setModalVisible] = useState();\n  const [editableData, setEditableData] = useState({});\n\n  const fetchReservationData = async () => {\n    try {\n      await getReservation()\n        .then(res => res.data)\n        .then(data => setReservationData(data));\n    } catch (error) {\n      openNotification(\n        \"error\",\n        \"Can't get Reservation info\",\n        \"Check connection\"\n      );\n    }\n  };\n\n  useEffect(() => {\n    fetchReservationData();\n  }, []);\n\n  const showDrawer = () => {\n    setDrawerVisible(true);\n  };\n\n  const onClose = () => {\n    setDrawerVisible(false);\n    setModalVisible(false);\n    window.location.reload();\n  };\n\n  const onHandleAdd = async items => {\n    try {\n      await addReservation(items);\n    } catch (error) {\n      openNotification(\"error\", \"Can't add user\", \"Check Connection\");\n    }\n  };\n\n  const deleteReservation = async item => {\n    try {\n      await deleteReservationItem(item);\n    } catch (err) {\n      openNotification(\"error\", \"Can't delte \", \"Check Connection\");\n    }\n  };\n\n  const handleEdit = items => {\n    const newData = { ...items };\n    setEditableData(newData);\n    setModalVisible(true);\n  };\n\n  const handleUpdate = async items => {\n    try {\n      EditReservation(items);\n    } catch (error) {\n      openNotification(\"error\", \"Can't change Reservation\", \"Check connection\");\n    }\n  };\n  return (\n    <Content style={{ margin: \"2em 16px\" }}>\n      <div\n        style={{ background: \"#fff\", padding: 24, minHeight: 280 }}\n        className=\"border border-dark rounded\"\n      >\n        <HeaderTitle\n          title={\"Reservation Menu\"}\n          legth={getReservationData.length}\n        />\n        <CustomDrawerButton title={\"Reserv place\"} showDrawer={showDrawer} />\n        <Divider />\n        <All.ReservationDrawer\n          visible={drawerVisible}\n          onHandleAdd={onHandleAdd}\n          onClose={onClose}\n        />\n        <All.ReservationList\n          data={getReservationData}\n          deleteReservation={deleteReservation}\n          handleEdit={handleEdit}\n        />\n        <All.EditModal\n          data={editableData}\n          visible={modalVisible}\n          onClose={onClose}\n          handleUpdate={handleUpdate}\n        />\n      </div>\n    </Content>\n  );\n};\n\nexport default ReservationContent;\n"]},"metadata":{},"sourceType":"module"}