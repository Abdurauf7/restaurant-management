{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { convertChildrenToColumns } from \"rc-table/es/hooks/useColumns\";\nimport CaretDownOutlined from '@ant-design/icons/CaretDownOutlined';\nimport CaretUpOutlined from '@ant-design/icons/CaretUpOutlined';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n\n  function pushState(column, columnPos) {\n    sortStates.push({\n      column: column,\n      key: getColumnKey(column, columnPos),\n      multiplePriority: getMultiplePriority(column),\n      sortOrder: column.sortOrder\n    });\n  }\n\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if (column.children) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      }\n\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterSates, triggerSorter, defaultSortDirections, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterSates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var upNode = sortDirections.includes('ascend') &&\n      /*#__PURE__*/\n      React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === 'ascend'\n        })\n      });\n      var downNode = sortDirections.includes('descend') &&\n      /*#__PURE__*/\n      React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === 'descend'\n        })\n      });\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          return (\n            /*#__PURE__*/\n            React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-column-sorters\")\n            },\n            /*#__PURE__*/\n            React.createElement(\"span\", null, renderColumnTitle(column.title, renderProps)),\n            /*#__PURE__*/\n            React.createElement(\"span\", {\n              className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), upNode && downNode))\n            },\n            /*#__PURE__*/\n            React.createElement(\"span\", {\n              className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n            }, upNode, downNode)))\n          );\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortDirection(sortDirections, sorterOrder),\n              multiplePriority: getMultiplePriority(column)\n            });\n\n            if (originOnClick) {\n              originOnClick(event);\n            }\n          };\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterSates, triggerSorter, defaultSortDirections, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref2) {\n    var sortOrder = _ref2.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[0])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref3) {\n    var sorter = _ref3.column.sorter,\n        sortOrder = _ref3.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === 'ascend' ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      columns = _ref4.columns,\n      children = _ref4.children,\n      onSorterChange = _ref4.onSorterChange,\n      sortDirections = _ref4.sortDirections;\n  var mergedColumns = React.useMemo(function () {\n    return columns || convertChildrenToColumns(children);\n  }, [children, columns]);\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref5) {\n      var column = _ref5.column,\n          sortOrder = _ref5.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref6) {\n        var key = _ref6.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}","map":{"version":3,"sources":["/Users/abdurauf/Desktop/diploma/restaurant-management-system/plov/node_modules/antd/es/table/hooks/useSorter.js"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","_extends","assign","target","arguments","source","prototype","hasOwnProperty","call","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","from","test","iter","len","arr2","_typeof","React","classNames","convertChildrenToColumns","CaretDownOutlined","CaretUpOutlined","getColumnKey","getColumnPos","renderColumnTitle","getMultiplePriority","column","sorter","multiple","getSortFunction","compare","nextSortDirection","sortDirections","current","indexOf","collectSortStates","columns","init","pos","sortStates","pushState","columnPos","multiplePriority","sortOrder","forEach","index","children","concat","defaultSortOrder","injectSorter","prefixCls","sorterSates","triggerSorter","defaultSortDirections","map","newColumn","columnKey","sorterState","find","_ref","sorterOrder","upNode","includes","createElement","className","active","downNode","title","renderProps","onHeaderCell","col","cell","originOnClick","onClick","event","stateToInfo","sorterStates","order","field","dataIndex","generateSorterInfo","list","filter","_ref2","getSortData","data","childrenColumnName","innerSorterStates","sort","a","b","cloneData","runningSorters","_ref3","record1","record2","compareFn","compareResult","record","subRecords","useFilterSorter","_ref4","onSorterChange","mergedColumns","useMemo","_React$useState","useState","_React$useState2","setSortStates","mergedSorterStates","validate","collectedStates","validateStates","patchStates","state","multipleMode","columnTitleSorterProps","sortColumns","_ref5","sortColumn","sortState","newSorterStates","_ref6","transformColumns","innerColumns","getSorters"],"mappings":"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","sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { convertChildrenToColumns } from \"rc-table/es/hooks/useColumns\";\nimport CaretDownOutlined from '@ant-design/icons/CaretDownOutlined';\nimport CaretUpOutlined from '@ant-design/icons/CaretUpOutlined';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n\n  function pushState(column, columnPos) {\n    sortStates.push({\n      column: column,\n      key: getColumnKey(column, columnPos),\n      multiplePriority: getMultiplePriority(column),\n      sortOrder: column.sortOrder\n    });\n  }\n\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if (column.children) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      }\n\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterSates, triggerSorter, defaultSortDirections, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterSates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var upNode = sortDirections.includes('ascend') && /*#__PURE__*/React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === 'ascend'\n        })\n      });\n      var downNode = sortDirections.includes('descend') && /*#__PURE__*/React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === 'descend'\n        })\n      });\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-column-sorters\")\n          }, /*#__PURE__*/React.createElement(\"span\", null, renderColumnTitle(column.title, renderProps)), /*#__PURE__*/React.createElement(\"span\", {\n            className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), upNode && downNode))\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n          }, upNode, downNode)));\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortDirection(sortDirections, sorterOrder),\n              multiplePriority: getMultiplePriority(column)\n            });\n\n            if (originOnClick) {\n              originOnClick(event);\n            }\n          };\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterSates, triggerSorter, defaultSortDirections, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref2) {\n    var sortOrder = _ref2.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[0])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref3) {\n    var sorter = _ref3.column.sorter,\n        sortOrder = _ref3.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === 'ascend' ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      columns = _ref4.columns,\n      children = _ref4.children,\n      onSorterChange = _ref4.onSorterChange,\n      sortDirections = _ref4.sortDirections;\n  var mergedColumns = React.useMemo(function () {\n    return columns || convertChildrenToColumns(children);\n  }, [children, columns]);\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref5) {\n      var column = _ref5.column,\n          sortOrder = _ref5.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref6) {\n        var key = _ref6.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}"]},"metadata":{},"sourceType":"module"}